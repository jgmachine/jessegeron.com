!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Sentry={})}(this,function(e){"use strict";const t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,n=globalThis,r="9.47.1";function o(){i(n);return n}function i(e){const t=e.__SENTRY__=e.__SENTRY__||{};t.version=t.version||r;return t[r]=t[r]||{}}function s(e,t,o=n){const i=o.__SENTRY__=o.__SENTRY__||{},s=i[r]=i[r]||{};return s[e]||(s[e]=t())}const a=["debug","info","warn","error","log","assert","trace"],c={};function u(e){if(!("console"in n))return e();const t=n.console,r={},o=Object.keys(c);o.forEach(e=>{const n=c[e];r[e]=t[e];t[e]=n});try{return e()}finally{o.forEach(e=>{t[e]=r[e]})}}function l(){return f().enabled}function d(e,...r){t&&l()&&u(()=>{n.console[e](`Sentry Logger [${e}]:`,...r)})}function f(){return t?s("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const p={enable:function(){f().enabled=!0},disable:function(){f().enabled=!1},isEnabled:l,log:function(...e){d("log",...e)},warn:function(...e){d("warn",...e)},error:function(...e){d("error",...e)}},h="?",m=/\(error: (.*)\)/,g=/captureMessage|captureException/;function y(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0,r=0)=>{const o=[],i=e.split("\n");for(let s=n;s<i.length;s++){const e=i[s];if(e.length>1024)continue;const n=m.test(e)?e.replace(m,"$1"):e;if(!n.match(/\S*Error: /)){for(const e of t){const t=e(n);if(t){o.push(t);break}}if(o.length>=50+r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(_(t).function||"")&&t.pop();t.reverse();if(g.test(_(t).function||"")){t.pop();g.test(_(t).function||"")&&t.pop()}return t.slice(0,50).map(e=>({...e,filename:e.filename||_(t).filename,function:e.function||h}))}(o.slice(r))}}function _(e){return e[e.length-1]||{}}const v="<anonymous>";function b(e){try{return e&&"function"==typeof e&&e.name||v}catch{return v}}function S(e){const t=e.exception;if(t){const e=[];try{t.values.forEach(t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)});return e}catch{return}}}const w={},k={};function E(e,t){w[e]=w[e]||[];w[e].push(t)}function x(e,n){if(!k[e]){k[e]=!0;try{n()}catch(r){t&&p.error(`Error while instrumenting ${e}`,r)}}}function C(e,n){const r=e&&w[e];if(r)for(const i of r)try{i(n)}catch(o){t&&p.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${b(i)}\nError:`,o)}}let T=null;function I(e){const t="error";E(t,e);x(t,M)}function M(){T=n.onerror;n.onerror=function(e,t,n,r,o){C("error",{column:r,error:o,line:n,msg:e,url:t});return!!T&&T.apply(this,arguments)};n.onerror.__SENTRY_INSTRUMENTED__=!0}let R=null;function O(e){const t="unhandledrejection";E(t,e);x(t,L)}function L(){R=n.onunhandledrejection;n.onunhandledrejection=function(e){C("unhandledrejection",e);return!R||R.apply(this,arguments)};n.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const A=Object.prototype.toString;function P(e){switch(A.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return q(e,Error)}}function D(e,t){return A.call(e)===`[object ${t}]`}function N(e){return D(e,"ErrorEvent")}function F(e){return D(e,"DOMError")}function $(e){return D(e,"String")}function U(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function j(e){return null===e||U(e)||"object"!=typeof e&&"function"!=typeof e}function B(e){return D(e,"Object")}function H(e){return"undefined"!=typeof Event&&q(e,Event)}function z(e){return Boolean(e?.then&&"function"==typeof e.then)}function q(e,t){try{return e instanceof t}catch{return!1}}function W(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function V(e){return"undefined"!=typeof Request&&q(e,Request)}const G=n;function J(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r;){u=K(n,l);if("html"===u||i>1&&s+o.length*c+u.length>=d)break;o.push(u);s+=u.length;n=n.parentNode}return o.reverse().join(a)}catch{return"<unknown>"}}function K(e,t){const n=e,r=[];if(!n?.tagName)return"";if(G.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t?.length?t.filter(e=>n.getAttribute(e)).map(e=>[e,n.getAttribute(e)]):null;if(o?.length)o.forEach(e=>{r.push(`[${e[0]}="${e[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&$(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const s of i){const e=n.getAttribute(s);e&&r.push(`[${s}="${e}"]`)}return r.join("")}function Y(){try{return G.document.location.href}catch{return""}}function X(e){if(!G.HTMLElement)return null;let t=e;for(let n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Z(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Q(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);i>r-5&&(i=r);i===r&&(o=Math.max(i-140,0));n=n.slice(o,i);o>0&&(n=`'{snip} ${n}`);i<r&&(n+=" {snip}");return n}function ee(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const t=e[r];try{W(t)?n.push("[VueViewModel]"):n.push(String(t))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function te(e,t,n=!1){return!!$(e)&&(D(t,"RegExp")?t.test(e):!!$(t)&&(n?e===t:e.includes(t)))}function ne(e,t=[],n=!1){return t.some(t=>te(e,t,n))}function re(e,n,r){if(!(n in e))return;const o=e[n];if("function"!=typeof o)return;const i=r(o);"function"==typeof i&&ie(i,o);try{e[n]=i}catch{t&&p.log(`Failed to replace method "${n}" in object`,e)}}function oe(e,n,r){try{Object.defineProperty(e,n,{value:r,writable:!0,configurable:!0})}catch{t&&p.log(`Failed to add non-enumerable property "${n}" to object`,e)}}function ie(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n;oe(e,"__sentry_original__",t)}catch{}}function se(e){return e.__sentry_original__}function ae(e){if(P(e))return{message:e.message,name:e.name,stack:e.stack,...ue(e)};if(H(e)){const t={type:e.type,target:ce(e.target),currentTarget:ce(e.currentTarget),...ue(e)};"undefined"!=typeof CustomEvent&&q(e,CustomEvent)&&(t.detail=e.detail);return t}return e}function ce(e){try{return t=e,"undefined"!=typeof Element&&q(t,Element)?J(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}var t}function ue(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function le(e=function(){const e=n;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);e.getRandomValues(t);return t[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function de(e){return e.exception?.values?.[0]}function fe(e){const{message:t,event_id:n}=e;if(t)return t;const r=de(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function pe(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||"");i.type||(i.type=n||"Error")}function he(e,t){const n=de(e);if(!n)return;const r=n.mechanism;n.mechanism={type:"generic",handled:!0,...r,...t};if(t&&"data"in t){const e={...r?.data,...t.data};n.mechanism.data=e}}function me(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{oe(e,"__sentry_captured__",!0)}catch{}return!1}function ge(){return Date.now()/1e3}let ye,_e;function ve(){return(ye??(ye=function(){const{performance:e}=n;if(!e?.now||!e.timeOrigin)return ge;const t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function be(){_e||(_e=function(){const{performance:e}=n;if(!e?.now)return[void 0,"none"];const t=36e5,r=e.now(),o=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-o):t,s=i<t,a=e.timing?.navigationStart,c="number"==typeof a?Math.abs(a+r-o):t;return s||c<t?i<=c?[e.timeOrigin,"timeOrigin"]:[a,"navigationStart"]:[o,"dateNow"]}());return _e[0]}function Se(e){const t=ve(),n={sid:le(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(n)};e&&we(n,e);return n}function we(e,t={}){if(t.user){!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address);e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)}e.timestamp=t.timestamp||ve();t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism);t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration);t.sid&&(e.sid=32===t.sid.length?t.sid:le());void 0!==t.init&&(e.init=t.init);!e.did&&t.did&&(e.did=`${t.did}`);"number"==typeof t.started&&(e.started=t.started);if(e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release);t.environment&&(e.environment=t.environment);!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress);!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent);"number"==typeof t.errors&&(e.errors=t.errors);t.status&&(e.status=t.status)}function ke(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=ke(r[o],t[o],n-1));return r}function Ee(){return le()}function xe(){return le().substring(16)}const Ce="_sentrySpan";function Te(e,t){t?oe(e,Ce,t):delete e[Ce]}function Ie(e){return e[Ce]}class Me{constructor(){this._notifyingListeners=!1;this._scopeListeners=[];this._eventProcessors=[];this._breadcrumbs=[];this._attachments=[];this._user={};this._tags={};this._extra={};this._contexts={};this._sdkProcessingMetadata={};this._propagationContext={traceId:Ee(),sampleRand:Math.random()}}clone(){const e=new Me;e._breadcrumbs=[...this._breadcrumbs];e._tags={...this._tags};e._extra={...this._extra};e._contexts={...this._contexts};this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]});e._user=this._user;e._level=this._level;e._session=this._session;e._transactionName=this._transactionName;e._fingerprint=this._fingerprint;e._eventProcessors=[...this._eventProcessors];e._attachments=[...this._attachments];e._sdkProcessingMetadata={...this._sdkProcessingMetadata};e._propagationContext={...this._propagationContext};e._client=this._client;e._lastEventId=this._lastEventId;Te(e,Ie(this));return e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){this._eventProcessors.push(e);return this}setUser(e){this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0};this._session&&we(this._session,{user:e});this._notifyScopeListeners();return this}getUser(){return this._user}setTags(e){this._tags={...this._tags,...e};this._notifyScopeListeners();return this}setTag(e,t){this._tags={...this._tags,[e]:t};this._notifyScopeListeners();return this}setExtras(e){this._extra={...this._extra,...e};this._notifyScopeListeners();return this}setExtra(e,t){this._extra={...this._extra,[e]:t};this._notifyScopeListeners();return this}setFingerprint(e){this._fingerprint=e;this._notifyScopeListeners();return this}setLevel(e){this._level=e;this._notifyScopeListeners();return this}setTransactionName(e){this._transactionName=e;this._notifyScopeListeners();return this}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t;this._notifyScopeListeners();return this}setSession(e){e?this._session=e:delete this._session;this._notifyScopeListeners();return this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof Me?t.getScopeData():B(t)?e:void 0,{tags:r,extra:o,user:i,contexts:s,level:a,fingerprint:c=[],propagationContext:u}=n||{};this._tags={...this._tags,...r};this._extra={...this._extra,...o};this._contexts={...this._contexts,...s};i&&Object.keys(i).length&&(this._user=i);a&&(this._level=a);c.length&&(this._fingerprint=c);u&&(this._propagationContext=u);return this}clear(){this._breadcrumbs=[];this._tags={};this._extra={};this._user={};this._contexts={};this._level=void 0;this._transactionName=void 0;this._fingerprint=void 0;this._session=void 0;Te(this,void 0);this._attachments=[];this.setPropagationContext({traceId:Ee(),sampleRand:Math.random()});this._notifyScopeListeners();return this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:ge(),...e,message:e.message?Z(e.message,2048):e.message};this._breadcrumbs.push(r);if(this._breadcrumbs.length>n){this._breadcrumbs=this._breadcrumbs.slice(-n);this._client?.recordDroppedEvent("buffer_overflow","log_item")}this._notifyScopeListeners();return this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){this._breadcrumbs=[];this._notifyScopeListeners();return this}addAttachment(e){this._attachments.push(e);return this}clearAttachments(){this._attachments=[];return this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Ie(this)}}setSDKProcessingMetadata(e){this._sdkProcessingMetadata=ke(this._sdkProcessingMetadata,e,2);return this}setPropagationContext(e){this._propagationContext=e;return this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n?.event_id||le();if(!this._client){t&&p.warn("No client configured on scope - will not capture exception!");return r}const o=new Error("Sentry syntheticException");this._client.captureException(e,{originalException:e,syntheticException:o,...n,event_id:r},this);return r}captureMessage(e,n,r){const o=r?.event_id||le();if(!this._client){t&&p.warn("No client configured on scope - will not capture message!");return o}const i=new Error(e);this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:o},this);return o}captureEvent(e,n){const r=n?.event_id||le();if(!this._client){t&&p.warn("No client configured on scope - will not capture event!");return r}this._client.captureEvent(e,{...n,event_id:r},this);return r}_notifyScopeListeners(){if(!this._notifyingListeners){this._notifyingListeners=!0;this._scopeListeners.forEach(e=>{e(this)});this._notifyingListeners=!1}}}class Re{constructor(e,t){let n,r;n=e||new Me;r=t||new Me;this._stack=[{scope:n}];this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(r){this._popScope();throw r}if(z(n))return n.then(e=>{this._popScope();return e},e=>{this._popScope();throw e});this._popScope();return n}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();this._stack.push({client:this.getClient(),scope:e});return e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Oe(){const e=i(o());return e.stack=e.stack||new Re(s("defaultCurrentScope",()=>new Me),s("defaultIsolationScope",()=>new Me))}function Le(e){return Oe().withScope(e)}function Ae(e,t){const n=Oe();return n.withScope(()=>{n.getStackTop().scope=e;return t(e)})}function Pe(e){return Oe().withScope(()=>e(Oe().getIsolationScope()))}function De(e){const t=i(e);return t.acs?t.acs:{withIsolationScope:Pe,withScope:Le,withSetScope:Ae,withSetIsolationScope:(e,t)=>Pe(t),getCurrentScope:()=>Oe().getScope(),getIsolationScope:()=>Oe().getIsolationScope()}}function Ne(){return De(o()).getCurrentScope()}function Fe(){return De(o()).getIsolationScope()}function $e(){return s("globalScope",()=>new Me)}function Ue(...e){const t=De(o());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function je(){return Ne().getClient()}function Be(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||xe()};r&&(i.parent_span_id=r);return i}const He="sentry.source",ze="sentry.sample_rate",qe="sentry.previous_trace_sample_rate",We="sentry.op",Ve="sentry.origin",Ge="sentry.idle_span_finish_reason",Je="sentry.measurement_unit",Ke="sentry.measurement_value",Ye="sentry.custom_span_name",Xe="sentry.profile_id",Ze="sentry.exclusive_time",Qe="http.request.method",et="url.full",tt="sentry.link.type";function nt(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function rt(e,t){e.setAttribute("http.response.status_code",t);const n=nt(t);"unknown_error"!==n.message&&e.setStatus(n)}const ot="_sentryScope",it="_sentryIsolationScope";function st(e){return{scope:e[ot],isolationScope:e[it]}}const at="sentry-",ct=/^sentry-/;function ut(e){const t=function(e){if(!e||!$(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((e,t)=>{const n=dt(t);Object.entries(n).forEach(([t,n])=>{e[t]=n});return e},{});return dt(e)}(e);if(!t)return;const n=Object.entries(t).reduce((e,[t,n])=>{if(t.match(ct)){e[t.slice(7)]=n}return e},{});return Object.keys(n).length>0?n:void 0}function lt(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce((e,[n,r],o)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=0===o?i:`${e},${i}`;if(s.length>8192){t&&p.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`);return e}return s},"")}(Object.entries(e).reduce((e,[t,n])=>{n&&(e[`${at}${t}`]=n);return e},{}))}function dt(e){return e.split(",").map(e=>e.split("=").map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})).reduce((e,[t,n])=>{t&&n&&(e[t]=n);return e},{})}function ft(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}const pt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ht(e,t){const n=function(e){if(!e)return;const t=e.match(pt);if(!t)return;let n;"1"===t[3]?n=!0:"0"===t[3]&&(n=!1);return{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),r=ut(t);if(!n?.traceId)return{traceId:Ee(),sampleRand:Math.random()};const o=function(e,t){const n=ft(t?.sample_rand);if(void 0!==n)return n;const r=ft(t?.sample_rate);return r&&void 0!==e?.parentSampled?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}(n,r);r&&(r.sample_rand=o.toString());const{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function mt(e=Ee(),t=xe(),n){let r="";void 0!==n&&(r=n?"-1":"-0");return`${e}-${t}${r}`}let gt=!1;function yt(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=kt(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c}}function _t(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:kt(e).parent_span_id,i=st(e).scope;return{parent_span_id:o,span_id:r?i?.getPropagationContext().propagationSpanId||xe():t,trace_id:n}}function vt(e){const{traceId:t,spanId:n}=e.spanContext();return mt(t,n,Et(e))}function bt(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:o})=>({span_id:e,trace_id:t,sampled:1===n,attributes:o,...r})):void 0}function St(e){return"number"==typeof e?wt(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?wt(e.getTime()):ve()}function wt(e){return e>9999999999?e/1e3:e}function kt(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:o,name:i,endTime:s,status:a,links:c}=e;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:St(o),timestamp:St(s)||void 0,status:xt(a),op:r[We],origin:r[Ve],links:bt(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function Et(e){const{traceFlags:t}=e.spanContext();return 1===t}function xt(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}const Ct="_sentryChildSpans",Tt="_sentryRootSpan";function It(e,t){const n=e[Tt]||e;oe(t,Tt,n);e[Ct]?e[Ct].add(t):oe(e,Ct,new Set([t]))}function Mt(e){const t=new Set;!function e(n){if(!t.has(n)&&Et(n)){t.add(n);const r=n[Ct]?Array.from(n[Ct]):[];for(const t of r)e(t)}}(e);return Array.from(t)}function Rt(e){return e[Tt]||e}function Ot(){const e=De(o());return e.getActiveSpan?e.getActiveSpan():Ie(Ne())}function Lt(){if(!gt){u(()=>{});gt=!0}}let At=!1;function Pt(){if(!At){e.tag="sentry_tracingErrorCallback";At=!0;I(e);O(e)}function e(){const e=Ot(),n=e&&Rt(e);if(n){const e="internal_error";t&&p.log(`[Tracing] Root span: ${e} -> Global error occurred`);n.setStatus({code:2,message:e})}}}function Dt(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||je()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}const Nt="production",Ft=/^o(\d+)\./,$t=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Ut(e,t=!1){const{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${s}`}function jt(e){const t=$t.exec(e);if(!t){u(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,o="",i="",s="",a=""]=t.slice(1);let c="",l=a;const d=l.split("/");if(d.length>1){c=d.slice(0,-1).join("/");l=d.pop()}if(l){const e=l.match(/^\d+/);e&&(l=e[0])}return Bt({host:i,pass:o,path:c,projectId:l,port:s,protocol:n,publicKey:r})}function Bt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ht(e){const n="string"==typeof e?jt(e):Bt(e);if(n&&function(e){if(!t)return!0;const{port:n,projectId:r,protocol:o}=e;if(["protocol","publicKey","host","projectId"].find(t=>{if(!e[t]){p.error(`Invalid Sentry Dsn: ${t} missing`);return!0}return!1}))return!1;if(!r.match(/^\d+$/)){p.error(`Invalid Sentry Dsn: Invalid projectId ${r}`);return!1}if(!function(e){return"http"===e||"https"===e}(o)){p.error(`Invalid Sentry Dsn: Invalid protocol ${o}`);return!1}if(n&&isNaN(parseInt(n,10))){p.error(`Invalid Sentry Dsn: Invalid port ${n}`);return!1}return!0}(n))return n}const zt="_frozenDsc";function qt(e,t){oe(e,zt,t)}function Wt(e,t){const n=t.getOptions(),{publicKey:r,host:o}=t.getDsn()||{};let i;n.orgId?i=String(n.orgId):o&&(i=function(e){const t=e.match(Ft);return t?.[1]}(o));const s={environment:n.environment||Nt,release:n.release,public_key:r,trace_id:e,org_id:i};t.emit("createDsc",s);return s}function Vt(e,t){const n=t.getPropagationContext();return n.dsc||Wt(n.traceId,e)}function Gt(e){const t=je();if(!t)return{};const n=Rt(e),r=kt(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[ze]??o[qe];function a(e){"number"!=typeof s&&"string"!=typeof s||(e.sample_rate=`${s}`);return e}const c=n[zt];if(c)return a(c);const u=i?.get("sentry.dsc"),l=u&&ut(u);if(l)return a(l);const d=Wt(e.spanContext().traceId,t),f=o[He],p=r.description;"url"!==f&&p&&(d.transaction=p);if(Dt()){d.sampled=String(Et(n));d.sample_rand=i?.get("sentry.sample_rand")??st(n).scope?.getPropagationContext().sampleRand.toString()}a(d);t.emit("createDsc",d,n);return d}class Jt{constructor(e={}){this._traceId=e.traceId||Ee();this._spanId=e.spanId||xe()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}var Kt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Yt(e,t=100,n=1/0){try{return Zt("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Xt(e,t=3,n=102400){const r=Yt(e,t);return(o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o)))>n?Xt(e,t-1,n):r;var o}function Zt(e,t,n=1/0,r=1/0,o=function(){const e=new WeakSet;function t(t){if(e.has(t))return!0;e.add(t);return!1}function n(t){e.delete(t)}return[t,n]}()){const[i,s]=o;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==Kt&&t===Kt)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(W(t))return"[VueViewModel]";if(B(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${b(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return Zt("",u.toJSON(),c-1,r,o)}catch{}const l=Array.isArray(t)?[]:{};let d=0;const f=ae(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}const e=f[p];l[p]=Zt(p,e,c-1,r,o);d++}s(t);return l}function Qt(e,t=[]){return[e,t]}function en(e,t){const[n,r]=e;return[n,[...r,t]]}function tn(e,t){const n=e[1];for(const r of n){if(t(r,r[0].type))return!0}return!1}function nn(e,t){return tn(e,(e,n)=>t.includes(n))}function rn(e){const t=i(n);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function on(e){const[t,n]=e;let r=JSON.stringify(t);function o(e){"string"==typeof r?r="string"==typeof e?r+e:[rn(r),e]:r.push("string"==typeof e?rn(e):e)}for(const i of n){const[e,t]=i;o(`\n${JSON.stringify(e)}\n`);if("string"==typeof t||t instanceof Uint8Array)o(t);else{let e;try{e=JSON.stringify(t)}catch{e=JSON.stringify(Yt(t))}o(e)}}return"string"==typeof r?r:function(e){const t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t);let r=0;for(const o of e){n.set(o,r);r+=o.length}return n}(r)}function sn(e){let t="string"==typeof e?rn(e):e;function r(e){const n=t.subarray(0,e);t=t.subarray(e+1);return n}function o(){let e=t.indexOf(10);e<0&&(e=t.length);return JSON.parse(function(e){const t=i(n);return t.decodePolyfill?t.decodePolyfill(e):(new TextDecoder).decode(e)}(r(e)))}const s=o(),a=[];for(;t.length;){const e=o(),t="number"==typeof e.length?e.length:void 0;a.push([e,t?r(t):o()])}return[s,a]}function an(e){return[{type:"span"},e]}function cn(e){const t="string"==typeof e.data?rn(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const un={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function ln(e){return un[e]}function dn(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function fn(e,t,n,r){const o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ut(r)},...o&&{trace:o}}}function pn(e,n,r,o=Ot()){const i=o&&Rt(o);if(i){t&&p.log(`[Measurement] Setting measurement on root span: ${e} = ${n} ${r}`);i.addEvent(e,{[Ke]:n,[Je]:r})}}function hn(e){if(!e||0===e.length)return;const t={};e.forEach(e=>{const n=e.attributes||{},r=n[Je],o=n[Ke];"string"==typeof r&&"number"==typeof o&&(t[e.name]={value:o,unit:r})});return t}class mn{constructor(e={}){this._traceId=e.traceId||Ee();this._spanId=e.spanId||xe();this._startTime=e.startTimestamp||ve();this._links=e.links;this._attributes={};this.setAttributes({[Ve]:"manual",[We]:e.op,...e.attributes});this._name=e.name;e.parentSpanId&&(this._parentSpanId=e.parentSpanId);"sampled"in e&&(this._sampled=e.sampled);e.endTimestamp&&(this._endTime=e.endTimestamp);this._events=[];this._isStandaloneSpan=e.isStandalone;this._endTime&&this._onSpanEnded()}addLink(e){this._links?this._links.push(e):this._links=[e];return this}addLinks(e){this._links?this._links.push(...e):this._links=e;return this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t;return this}setAttributes(e){Object.keys(e).forEach(t=>this.setAttribute(t,e[t]));return this}updateStartTime(e){this._startTime=St(e)}setStatus(e){this._status=e;return this}updateName(e){this._name=e;this.setAttribute(He,"custom");return this}end(e){if(!this._endTime){this._endTime=St(e);!function(e){if(!t)return;const{description:n="< unknown name >",op:r="< unknown op >"}=kt(e),{spanId:o}=e.spanContext(),i=`[Tracing] Finishing "${r}" ${Rt(e)===e?"root ":""}span "${n}" with ID ${o}`;p.log(i)}(this);this._onSpanEnded()}}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[We],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:xt(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ve],profile_id:this._attributes[Xe],exclusive_time:this._attributes[Ze],measurements:hn(this._events),is_segment:this._isStandaloneSpan&&Rt(this)===this||void 0,segment_id:this._isStandaloneSpan?Rt(this).spanContext().spanId:void 0,links:bt(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){t&&p.log("[Tracing] Adding an event to span:",e);const o=gn(n)?n:r||ve(),i=gn(n)?{}:n||{},s={name:e,time:St(o),attributes:i};this._events.push(s);return this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=je();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===Rt(this)))return;if(this._isStandaloneSpan){if(this._sampled)!function(e){const t=je();if(!t)return;const n=e[1];if(!n||0===n.length){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}(function(e,t){const n=Gt(e[0]),r=t?.getDsn(),o=t?.getOptions().tunnel,i={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!o&&r&&{dsn:Ut(r)}},s=t?.getOptions().beforeSendSpan,a=s?e=>{const t=kt(e),n=s(t);if(!n){Lt();return t}return n}:kt,c=[];for(const u of e){const e=a(u);e&&c.push(an(e))}return Qt(i,c)}([this],e));else{t&&p.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled.");e&&e.recordDroppedEvent("sample_rate","span")}return}const n=this._convertSpanToTransaction();if(n){(st(this).scope||Ne()).captureEvent(n)}}_convertSpanToTransaction(){if(!yn(kt(this)))return;if(!this._name){t&&p.warn("Transaction has no name, falling back to `<unlabeled transaction>`.");this._name="<unlabeled transaction>"}const{scope:e,isolationScope:n}=st(this),r=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(!0!==this._sampled)return;const o=Mt(this).filter(e=>e!==this&&!function(e){return e instanceof mn&&e.isStandaloneSpan()}(e)).map(e=>kt(e)).filter(yn),i=this._attributes[He];delete this._attributes[Ye];o.forEach(e=>{delete e.data[Ye]});const s={contexts:{trace:yt(this)},spans:o.length>1e3?o.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:Gt(this)},request:r,...i&&{transaction_info:{source:i}}},a=hn(this._events);if(a&&Object.keys(a).length){t&&p.log("[Measurements] Adding measurements to transaction event",JSON.stringify(a,void 0,2));s.measurements=a}return s}}function gn(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function yn(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}function _n(e,t,n=()=>{}){let r;try{r=e()}catch(o){t(o);n();throw o}return function(e,t,n){if(z(e))return e.then(e=>{n();return e},e=>{t(e);n();throw e});n();return e}(r,t,n)}const vn="__SENTRY_SUPPRESS_TRACING__";function bn(e,t){const n=xn();if(n.startSpan)return n.startSpan(e,t);const r=En(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Ue(a,()=>In(i)(()=>{const n=Ne(),s=Tn(n,i),a=e.onlyIfParent&&!s?new Jt:kn({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});Te(n,a);return _n(()=>t(a),()=>{const{status:e}=kt(a);!a.isRecording()||e&&"ok"!==e||a.setStatus({code:2,message:"internal_error"})},()=>{a.end()})}))}function Sn(e){const t=xn();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=En(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>Ue(e.scope,t):void 0!==o?e=>wn(o,e):e=>e())(()=>{const t=Ne(),i=Tn(t,o);return e.onlyIfParent&&!i?new Jt:kn({parentSpan:i,spanArguments:n,forceTransaction:r,scope:t})})}function wn(e,t){const n=xn();return n.withActiveSpan?n.withActiveSpan(e,t):Ue(n=>{Te(n,e||void 0);return t(n)})}function kn({parentSpan:e,spanArguments:n,forceTransaction:r,scope:o}){if(!Dt()){const t=new Jt;if(r||!e){qt(t,{sampled:"false",sample_rate:"0",transaction:n.name,...Gt(t)})}return t}const i=Fe();let s;if(e&&!r){s=function(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),i=!t.getScopeData().sdkProcessingMetadata[vn]&&Et(e),s=i?new mn({...n,parentSpanId:r,traceId:o,sampled:i}):new Jt({traceId:o});It(e,s);const a=je();if(a){a.emit("spanStart",s);n.endTimestamp&&a.emit("spanEnd",s)}return s}(e,o,n);It(e,s)}else if(e){const t=Gt(e),{traceId:r,spanId:i}=e.spanContext(),a=Et(e);s=Cn({traceId:r,parentSpanId:i,...n},o,a);qt(s,t)}else{const{traceId:e,dsc:t,parentSpanId:r,sampled:a}={...i.getPropagationContext(),...o.getPropagationContext()};s=Cn({traceId:e,parentSpanId:r,...n},o,a);t&&qt(s,t)}!function(e){if(!t)return;const{description:n="< unknown name >",op:r="< unknown op >",parent_span_id:o}=kt(e),{spanId:i}=e.spanContext(),s=Et(e),a=Rt(e),c=a===e,u=`[Tracing] Starting ${s?"sampled":"unsampled"} ${c?"root ":""}span`,l=[`op: ${r}`,`name: ${n}`,`ID: ${i}`];o&&l.push(`parent ID: ${o}`);if(!c){const{op:e,description:t}=kt(a);l.push(`root ID: ${a.spanContext().spanId}`);e&&l.push(`root op: ${e}`);t&&l.push(`root description: ${t}`)}p.log(`${u}\n  ${l.join("\n  ")}`)}(s);!function(e,t,n){if(e){oe(e,it,n);oe(e,ot,t)}}(s,o,i);return s}function En(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};n.startTimestamp=St(e.startTime);delete n.startTime;return n}return t}function xn(){return De(o())}function Cn(e,n,r){const o=je(),i=o?.getOptions()||{},{name:s=""}=e,a={spanAttributes:{...e.attributes},spanName:s,parentSampled:r};o?.emit("beforeSampling",a,{decision:!1});const c=a.parentSampled??r,u=a.spanAttributes,l=n.getPropagationContext(),[d,f,h]=n.getScopeData().sdkProcessingMetadata[vn]?[!1]:function(e,n,r){if(!Dt(e))return[!1];let o,i;if("function"==typeof e.tracesSampler){i=e.tracesSampler({...n,inheritOrSampleWith:e=>"number"==typeof n.parentSampleRate?n.parentSampleRate:"boolean"==typeof n.parentSampled?Number(n.parentSampled):e});o=!0}else if(void 0!==n.parentSampled)i=n.parentSampled;else if(void 0!==e.tracesSampleRate){i=e.tracesSampleRate;o=!0}const s=ft(i);if(void 0===s){t&&p.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(i)} of type ${JSON.stringify(typeof i)}.`);return[!1]}if(!s){t&&p.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"));return[!1,s,o]}const a=r<s;a||t&&p.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`);return[a,s,o]}(i,{name:s,parentSampled:c,attributes:u,parentSampleRate:ft(l.dsc?.sample_rate)},l.sampleRand),m=new mn({...e,attributes:{[He]:"custom",[ze]:void 0!==f&&h?f:void 0,...u},sampled:d});if(!d&&o){t&&p.log("[Tracing] Discarding root span because its trace was not chosen to be sampled.");o.recordDroppedEvent("sample_rate","transaction")}o&&o.emit("spanStart",m);return m}function Tn(e,t){if(t)return t;if(null===t)return;const n=Ie(e);if(!n)return;const r=je();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Rt(n):n}function In(e){return void 0!==e?t=>wn(e,t):e=>e()}const Mn={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function Rn(e,n={}){const r=new Map;let o,i=!1,s="externalFinish",a=!n.disableAutoFinish;const c=[],{idleTimeout:u=Mn.idleTimeout,finalTimeout:l=Mn.finalTimeout,childSpanTimeout:d=Mn.childSpanTimeout,beforeSpanEnd:f}=n,h=je();if(!h||!Dt()){const e=new Jt;qt(e,{sample_rate:"0",sampled:"false",...Gt(e)});return e}const m=Ne(),g=Ot(),y=function(e){const n=Sn(e);Te(Ne(),n);t&&p.log("[Tracing] Started span is an idle span");return n}(e);y.end=new Proxy(y.end,{apply(e,t,n){f&&f(y);if(t instanceof Jt)return;const[r,...o]=n,i=St(r||ve()),s=Mt(y).filter(e=>e!==y);if(!s.length){S(i);return Reflect.apply(e,t,[i,...o])}const a=s.map(e=>kt(e).timestamp).filter(e=>!!e),c=a.length?Math.max(...a):void 0,u=kt(y).start_timestamp,d=Math.min(u?u+l/1e3:1/0,Math.max(u||-1/0,Math.min(i,c||1/0)));S(d);return Reflect.apply(e,t,[d,...o])}});function _(){if(o){clearTimeout(o);o=void 0}}function v(e){_();o=setTimeout(()=>{if(!i&&0===r.size&&a){s="idleTimeout";y.end(e)}},u)}function b(e){o=setTimeout(()=>{if(!i&&a){s="heartbeatFailed";y.end(e)}},d)}function S(e){i=!0;r.clear();c.forEach(e=>e());Te(m,g);const n=kt(y),{start_timestamp:o}=n;if(!o)return;n.data[Ge]||y.setAttribute(Ge,s);p.log(`[Tracing] Idle span "${n.op}" finished`);const a=Mt(y).filter(e=>e!==y);let d=0;a.forEach(n=>{if(n.isRecording()){n.setStatus({code:2,message:"cancelled"});n.end(e);t&&p.log("[Tracing] Cancelling span since span ended early",JSON.stringify(n,void 0,2))}const r=kt(n),{timestamp:o=0,start_timestamp:i=0}=r,s=i<=e,a=o-i<=(l+u)/1e3;if(t){const e=JSON.stringify(n,void 0,2);s?a||p.log("[Tracing] Discarding span since it finished after idle span final timeout",e):p.log("[Tracing] Discarding span since it happened after idle span was finished",e)}if(!a||!s){!function(e,t){e[Ct]&&e[Ct].delete(t)}(y,n);d++}});d>0&&y.setAttribute("sentry.idle_span_discarded_spans",d)}c.push(h.on("spanStart",e=>{if(i||e===y||kt(e).timestamp||e instanceof mn&&e.isStandaloneSpan())return;Mt(y).includes(e)&&function(e){_();r.set(e,!0);b(ve()+d/1e3)}(e.spanContext().spanId)}));c.push(h.on("spanEnd",e=>{i||function(e){r.has(e)&&r.delete(e);0===r.size&&v(ve()+u/1e3)}(e.spanContext().spanId)}));c.push(h.on("idleSpanEnableAutoFinish",e=>{if(e===y){a=!0;v();r.size&&b()}}));n.disableAutoFinish||v();setTimeout(()=>{if(!i){y.setStatus({code:2,message:"deadline_exceeded"});s="finalTimeout";y.end()}},l);return y}function On(e){return new An(t=>{t(e)})}function Ln(e){return new An((t,n)=>{n(e)})}class An{constructor(e){this._state=0;this._handlers=[];this._runExecutor(e)}then(e,t){return new An((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(o){r(o)}else n(t)},e=>{if(t)try{n(t(e))}catch(o){r(o)}else r(e)}]);this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new An((t,n)=>{let r,o;return this.then(t=>{o=!1;r=t;e&&e()},t=>{o=!0;r=t;e&&e()}).then(()=>{o?n(r):t(r)})})}_executeHandlers(){if(0===this._state)return;const e=this._handlers.slice();this._handlers=[];e.forEach(e=>{if(!e[0]){1===this._state&&e[1](this._value);2===this._state&&e[2](this._value);e[0]=!0}})}_runExecutor(e){const t=(e,t)=>{if(0===this._state)if(z(t))t.then(n,r);else{this._state=e;this._value=t;this._executeHandlers()}},n=e=>{t(1,e)},r=e=>{t(2,e)};try{e(n,r)}catch(o){r(o)}}}function Pn(e,n,r,o=0){return new An((i,s)=>{const a=e[o];if(null===n||"function"!=typeof a)i(n);else{const c=a({...n},r);t&&a.id&&null===c&&p.log(`Event processor "${a.id}" dropped event`);z(c)?c.then(t=>Pn(e,t,r,o+1).then(i)).then(null,s):Pn(e,c,r,o+1).then(i).then(null,s)}})}function Dn(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra});Object.keys(r).length&&(e.tags={...r,...e.tags});Object.keys(o).length&&(e.user={...o,...e.user});Object.keys(i).length&&(e.contexts={...i,...e.contexts});s&&(e.level=s);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t);r&&function(e,t){e.contexts={trace:_t(t),...e.contexts};e.sdkProcessingMetadata={dynamicSamplingContext:Gt(t),...e.sdkProcessingMetadata};const n=Rt(t),r=kt(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r);!function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[];t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,n);!function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o);!function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function Nn(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:f,transactionName:p,span:h}=t;Fn(e,"extra",n);Fn(e,"tags",r);Fn(e,"user",o);Fn(e,"contexts",i);e.sdkProcessingMetadata=ke(e.sdkProcessingMetadata,a,2);s&&(e.level=s);p&&(e.transactionName=p);h&&(e.span=h);c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]);u.length&&(e.fingerprint=[...e.fingerprint,...u]);l.length&&(e.eventProcessors=[...e.eventProcessors,...l]);d.length&&(e.attachments=[...e.attachments,...d]);e.propagationContext={...e.propagationContext,...f}}function Fn(e,t,n){e[t]=ke(e[t],n,1)}let $n,Un,jn;function Bn(e){const t=n._sentryDebugIds;if(!t)return{};const r=Object.keys(t);if(jn&&r.length===Un)return jn;Un=r.length;jn=r.reduce((n,r)=>{$n||($n={});const o=$n[r];if(o)n[o[0]]=o[1];else{const o=e(r);for(let e=o.length-1;e>=0;e--){const i=o[e],s=i?.filename,a=t[r];if(s&&a){n[s]=a;$n[r]=[s,a];break}}}return n},{});return jn}function Hn(e,t,n,r,o,i){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||le(),timestamp:t.timestamp||ge()},u=n.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;e.environment=e.environment||n||Nt;!e.release&&r&&(e.release=r);!e.dist&&o&&(e.dist=o);const s=e.request;s?.url&&(s.url=Z(s.url,i))}(c,e);!function(e,t){if(t.length>0){e.sdk=e.sdk||{};e.sdk.integrations=[...e.sdk.integrations||[],...t]}}(c,u);o&&o.emit("applyFrameMetadata",t);void 0===t.type&&function(e,t){const n=Bn(t);e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=n[e.filename])})})}(c,e.stackParser);const l=function(e,t){if(!t)return e;const n=e?e.clone():new Me;n.update(t);return n}(r,n.captureContext);n.mechanism&&he(c,n.mechanism);const d=o?o.getEventProcessors():[],f=$e().getScopeData();if(i){Nn(f,i.getScopeData())}if(l){Nn(f,l.getScopeData())}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p);Dn(c,f);return Pn([...d,...f.eventProcessors],c,n).then(e=>{e&&function(e){const t={};e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{if(e.debug_id){e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id);delete e.debug_id}})});if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{};e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})})}(e);return"number"==typeof s&&s>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:Yt(e.data,t,n)}}))},...e.user&&{user:Yt(e.user,t,n)},...e.contexts&&{contexts:Yt(e.contexts,t,n)},...e.extra&&{extra:Yt(e.extra,t,n)}};if(e.contexts?.trace&&r.contexts){r.contexts.trace=e.contexts.trace;e.contexts.trace.data&&(r.contexts.trace.data=Yt(e.contexts.trace.data,t,n))}e.spans&&(r.spans=e.spans.map(e=>({...e,...e.data&&{data:Yt(e.data,t,n)}})));e.contexts?.flags&&r.contexts&&(r.contexts.flags=Yt(e.contexts.flags,3,n));return r}(e,s,a):e})}function zn(e){if(e)return function(e){return e instanceof Me||"function"==typeof e}(e)||function(e){return Object.keys(e).some(e=>qn.includes(e))}(e)?{captureContext:e}:e}const qn=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Wn(e,t){return Ne().captureException(e,zn(t))}function Vn(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return Ne().captureMessage(e,n,r)}function Gn(e,t){return Ne().captureEvent(e,t)}function Jn(e,t){Fe().setContext(e,t)}function Kn(){return Fe().lastEventId()}function Yn(){const e=je();return!1!==e?.getOptions().enabled&&!!e?.getTransport()}function Xn(e){Fe().addEventProcessor(e)}function Zn(e){const t=Fe(),r=Ne(),{userAgent:o}=n.navigator||{},i=Se({user:r.getUser()||t.getUser(),...o&&{userAgent:o},...e}),s=t.getSession();"ok"===s?.status&&we(s,{status:"exited"});Qn();t.setSession(i);return i}function Qn(){const e=Fe(),t=Ne().getSession()||e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"});we(e,n)}(t);er();e.setSession()}function er(){const e=Fe(),t=je(),n=e.getSession();n&&t&&t.captureSession(n)}function tr(e=!1){e?Qn():er()}function nr(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function rr(e,t,n){return t||`${function(e){return`${nr(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:"7"};e.publicKey&&(n.sentry_key=e.publicKey);t&&(n.sentry_client=`${t.name}/${t.version}`);return new URLSearchParams(n).toString()}(e,n)}`}const or=[];function ir(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(e=>{e.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if("function"==typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;return function(e){const t={};e.forEach(e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)});return Object.values(t)}(r)}function sr(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function ar(e,n,r){if(r[n.name])t&&p.log(`Integration skipped because it was already installed: ${n.name}`);else{r[n.name]=n;if(-1===or.indexOf(n.name)&&"function"==typeof n.setupOnce){n.setupOnce();or.push(n.name)}n.setup&&"function"==typeof n.setup&&n.setup(e);if("function"==typeof n.preprocessEvent){const t=n.preprocessEvent.bind(n);e.on("preprocessEvent",(n,r)=>t(n,r,e))}if("function"==typeof n.processEvent){const t=n.processEvent.bind(n),r=Object.assign((n,r)=>t(n,r,e),{id:n.name});e.addEventProcessor(r)}t&&p.log(`Integration installed: ${n.name}`)}}function cr(e){const n=je();n?n.addIntegration(e):t&&p.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}function ur(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];if(n?.value){t.push(n.value);n.type&&t.push(`${n.type}: ${n.value}`)}}catch{}return t}const lr="Not capturing exception because it's already been captured.",dr="Discarded session because of missing or non-string release",fr=Symbol.for("SentryInternalError"),pr=Symbol.for("SentryDoNotSendEventError");function hr(e){return{message:e,[fr]:!0}}function mr(e){return{message:e,[pr]:!0}}function gr(e){return!!e&&"object"==typeof e&&fr in e}function yr(e){return!!e&&"object"==typeof e&&pr in e}class _r{constructor(e){this._options=e;this._integrations={};this._numProcessing=0;this._outcomes={};this._hooks={};this._eventProcessors=[];e.dsn?this._dsn=Ht(e.dsn):t&&p.warn("No DSN provided, client will not send events.");if(this._dsn){const t=rr(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,n,r){const o=le();if(me(e)){t&&p.log(lr);return o}const i={event_id:o,...n};this._process(this.eventFromException(e,i).then(e=>this._captureEvent(e,i,r)));return i.event_id}captureMessage(e,t,n,r){const o={event_id:le(),...n},i=U(e)?e:String(e),s=j(e)?this.eventFromMessage(i,t,o):this.eventFromException(e,o);this._process(s.then(e=>this._captureEvent(e,o,r)));return o.event_id}captureEvent(e,n,r){const o=le();if(n?.originalException&&me(n.originalException)){t&&p.log(lr);return o}const i={event_id:o,...n},s=e.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope;this._process(this._captureEvent(e,i,a||r,c));return i.event_id}captureSession(e){this.sendSession(e);we(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;if(t){this.emit("flush");return this._isClientDoneProcessing(e).then(n=>t.flush(e).then(e=>n&&e))}return On(!0)}close(e){return this.flush(e).then(e=>{this.getOptions().enabled=!1;this.emit("close");return e})}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];ar(this,e,this._integrations);t||sr(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=function(e,t,n,r){const o=dn(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){if(!t)return e;e.sdk=e.sdk||{};e.sdk.name=e.sdk.name||t.name;e.sdk.version=e.sdk.version||t.version;e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]];e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]}(e,n?.sdk);const s=fn(e,o,r,t);delete e.sdkProcessingMetadata;return Qt(s,[[{type:i},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const o of t.attachments||[])n=en(n,cn(o));const r=this.sendEnvelope(n);r&&r.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){const{release:n,environment:r=Nt}=this._options;if("aggregates"in e){const o=e.attrs||{};if(!o.release&&!n){t&&p.warn(dr);return}o.release=o.release||n;o.environment=o.environment||r;e.attrs=o}else{if(!e.release&&!n){t&&p.warn(dr);return}e.release=e.release||n;e.environment=e.environment||r}this.emit("beforeSendSession",e);const o=function(e,t,n,r){const o=dn(n);return Qt({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Ut(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const o=`${e}:${n}`;t&&p.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`);this._outcomes[o]=(this._outcomes[o]||0)+r}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];n.push(t);return()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach(e=>e(...t))}sendEnvelope(e){this.emit("beforeEnvelope",e);if(this._isEnabled()&&this._transport)return this._transport.send(e).then(null,e=>{t&&p.error("Error while sending envelope:",e);return e});t&&p.error("Transport disabled");return On({})}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};t.forEach(t=>{t&&ar(e,t,n)});return n}(this,e);sr(this,e)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,r=!1;const o=t.exception?.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(!1===t?.handled){n=!0;break}}}const i="ok"===e.status;if(i&&0===e.errors||i&&n){we(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)});this.captureSession(e)}}_isClientDoneProcessing(e){return new An(t=>{let n=0;const r=setInterval(()=>{if(0==this._numProcessing){clearInterval(r);t(!0)}else{n+=1;if(e&&n>=e){clearInterval(r);t(!1)}}},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){const o=this.getOptions(),i=Object.keys(this._integrations);!t.integrations&&i?.length&&(t.integrations=i);this.emit("preprocessEvent",e,t);e.type||r.setLastEventId(e.event_id||t.event_id);return Hn(o,e,t,n,this,r).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t);e.contexts={trace:Be(n),...e.contexts};const r=Vt(this,n);e.sdkProcessingMetadata={dynamicSamplingContext:r,...e.sdkProcessingMetadata};return e})}_captureEvent(e,n={},r=Ne(),o=Fe()){t&&vr(e)&&p.log(`Captured error event \`${ur(e)[0]||"<unknown>"}\``);return this._processEvent(e,n,r,o).then(e=>e.event_id,e=>{t&&(yr(e)?p.log(e.message):gr(e)?p.warn(e.message):p.warn(e))})}_processEvent(e,t,n,r){const o=this.getOptions(),{sampleRate:i}=o,s=br(e),a=vr(e),c=e.type||"error",u=`before send for type \`${c}\``,l=void 0===i?void 0:ft(i);if(a&&"number"==typeof l&&Math.random()>l){this.recordDroppedEvent("sample_rate","error");return Ln(mr(`Discarding event because it's not included in the random sample (sampling rate = ${i})`))}const d="replay_event"===c?"replay":c;return this._prepareEvent(e,t,n,r).then(e=>{if(null===e){this.recordDroppedEvent("event_processor",d);throw mr("An event processor returned `null`, will not send event.")}if(t.data&&!0===t.data.__sentry__)return e;const n=function(e,t,n,r){const{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s}=t;let a=n;if(vr(a)&&o)return o(a,r);if(br(a)){if(s){const e=s(function(e){const{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[Xe],exclusive_time:s?.[Ze],measurements:e.measurements,is_segment:!0}}(a));e?a=ke(n,{type:"transaction",timestamp:(c=e).timestamp,start_timestamp:c.start_timestamp,transaction:c.description,contexts:{trace:{trace_id:c.trace_id,span_id:c.span_id,parent_span_id:c.parent_span_id,op:c.op,status:c.status,origin:c.origin,data:{...c.data,...c.profile_id&&{[Xe]:c.profile_id},...c.exclusive_time&&{[Ze]:c.exclusive_time}}}},measurements:c.measurements}):Lt();if(a.spans){const e=[];for(const t of a.spans){const n=s(t);if(n)e.push(n);else{Lt();e.push(t)}}a.spans=e}}if(i){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(a,r)}}var c;return a}(0,o,e,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(z(e))return e.then(e=>{if(!B(e)&&null!==e)throw hr(n);return e},e=>{throw hr(`${t} rejected with ${e}`)});if(!B(e)&&null!==e)throw hr(n);return e}(n,u)}).then(o=>{if(null===o){this.recordDroppedEvent("before_send",d);if(s){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw mr(`${u} returned \`null\`, will not send event.`)}const i=n.getSession()||r.getSession();a&&i&&this._updateSessionFromEvent(i,o);if(s){const e=(o.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(o.spans?o.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const c=o.transaction_info;if(s&&c&&o.transaction!==e.transaction){const e="custom";o.transaction_info={...c,source:e}}this.sendEvent(o,t);return o}).then(null,e=>{if(yr(e)||gr(e))throw e;this.captureException(e,{data:{__sentry__:!0},originalException:e});throw hr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)})}_process(e){this._numProcessing++;e.then(e=>{this._numProcessing--;return e},e=>{this._numProcessing--;return e})}_clearOutcomes(){const e=this._outcomes;this._outcomes={};return Object.entries(e).map(([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}})}_flushOutcomes(){t&&p.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length){t&&p.log("No outcomes to send");return}if(!this._dsn){t&&p.log("No dsn provided, will not send outcomes");return}t&&p.log("Sending outcomes:",e);const n=(r=e,Qt((o=this._options.tunnel&&Ut(this._dsn))?{dsn:o}:{},[[{type:"client_report"},{timestamp:i||ge(),discarded_events:r}]]));var r,o,i;this.sendEnvelope(n)}}function vr(e){return void 0===e.type}function br(e){return"transaction"===e.type}const Sr={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function wr(e,t,n,r=!0){!n||e[t]&&!r||(e[t]=n)}function kr(e,t){const n=Tr(),r=Cr(e);if(void 0===r)n.set(e,[t]);else if(r.length>=100){xr(e,r);n.set(e,[t])}else n.set(e,[...r,t])}function Er(e,n=je(),r=Ne(),o=kr){if(!n){t&&p.warn("No client available to capture log.");return}const{release:i,environment:s,enableLogs:a,beforeSendLog:c,_experiments:l}=n.getOptions();if(!(a??l?.enableLogs)){t&&p.warn("logging option not enabled, log will not be captured.");return}const d=c??l?.beforeSendLog,[,f]=function(e,t){return t?Ue(t,()=>{const n=Ot(),r=n?_t(n):Be(t);return[n?Gt(n):Vt(e,t),r]}):[void 0,void 0]}(n,r),h={...e.attributes},{user:{id:m,email:g,username:y}}=function(e){const t=$e().getScopeData();Nn(t,Fe().getScopeData());Nn(t,e.getScopeData());return t}(r);wr(h,"user.id",m,!1);wr(h,"user.email",g,!1);wr(h,"user.name",y,!1);wr(h,"sentry.release",i);wr(h,"sentry.environment",s);const{name:_,version:v}=n.getSdkMetadata()?.sdk??{};wr(h,"sentry.sdk.name",_);wr(h,"sentry.sdk.version",v);const b=e.message;if(U(b)){const{__sentry_template_string__:e,__sentry_template_values__:t=[]}=b;h["sentry.message.template"]=e;t.forEach((e,t)=>{h[`sentry.message.parameter.${t}`]=e})}const S=Ie(r);wr(h,"sentry.trace.parent_span_id",S?.spanContext().spanId);const w={...e,attributes:h};n.emit("beforeCaptureLog",w);const k=d?u(()=>d(w)):w;if(!k){n.recordDroppedEvent("before_send","log_item",1);t&&p.warn("beforeSendLog returned null, log will not be captured.");return}const{level:E,message:x,attributes:C={},severityNumber:T}=k;o(n,{timestamp:ve(),level:E,body:x,trace_id:f?.trace_id,severity_number:T??Sr[E],attributes:Object.keys(C).reduce((e,t)=>{e[t]=function(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}(C[t]);return e},{})});n.emit("afterCaptureLog",k)}function xr(e,t){const n=t??Cr(e)??[];if(0===n.length)return;const r=e.getOptions(),o=function(e,t,n,r){const o={};t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version});n&&r&&(o.dsn=Ut(r));return Qt(o,[(i=e,[{type:"log",item_count:i.length,content_type:"application/vnd.sentry.items.log+json"},{items:i}])]);var i}(n,r._metadata,r.tunnel,e.getDsn());Tr().set(e,[]);e.emit("flushLogs");e.sendEnvelope(o)}function Cr(e){return Tr().get(e)}function Tr(){return s("clientToLogBufferMap",()=>new WeakMap)}function Ir(e){Ne().setClient(e)}const Mr=Symbol.for("SentryBufferFullError");function Rr(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Ln(Mr);const o=r();-1===t.indexOf(o)&&t.push(o);o.then(()=>n(o)).then(null,()=>n(o).then(null,()=>{}));return o},drain:function(e){return new An((n,r)=>{let o=t.length;if(!o)return n(!0);const i=setTimeout(()=>{e&&e>0&&n(!1)},e);t.forEach(e=>{On(e).then(()=>{if(! --o){clearTimeout(i);n(!0)}},r)})})}}}function Or(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Lr(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function Ar(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(const a of i.trim().split(",")){const[e,t,,,n]=a.split(":",5),i=parseInt(e,10),s=1e3*(isNaN(i)?60:i);if(t)for(const a of t.split(";"))"metric_bucket"===a&&n&&!n.split(";").includes("custom")||(o[a]=r+s);else o.all=r+s}else s?o.all=r+Or(s,r):429===t&&(o.all=r+6e4);return o}function Pr(e,n,r=Rr(e.bufferSize||64)){let o={};return{send:function(i){const s=[];tn(i,(t,n)=>{const r=ln(n);Lr(o,r)?e.recordDroppedEvent("ratelimit_backoff",r):s.push(t)});if(0===s.length)return On({});const a=Qt(i[0],s),c=t=>{tn(a,(n,r)=>{e.recordDroppedEvent(t,ln(r))})};return r.add(()=>n({body:on(a)}).then(e=>{void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&t&&p.warn(`Sentry responded with status code ${e.statusCode} to sent event.`);o=Ar(o,e);return e},e=>{c("network_error");t&&p.error("Encountered error running transport request:",e);throw e})).then(e=>e,e=>{if(e===Mr){t&&p.error("Skipped sending event because buffer is full.");c("queue_overflow");return On({})}throw e})},flush:e=>r.drain(e)}}const Dr=5e3;function Nr(e){function n(...e){t&&p.log("[Offline]:",...e)}return t=>{const r=e(t);if(!t.createStore)throw new Error("No `createStore` function was provided");const o=t.createStore(t);let i,s=Dr;function a(e){i&&clearTimeout(i);i=setTimeout(async()=>{i=void 0;const e=await o.shift();if(e){n("Attempting to send previously queued event");e[0].sent_at=(new Date).toISOString();u(e,!0).catch(e=>{n("Failed to retry sending",e)})}},e);"number"!=typeof i&&i.unref&&i.unref()}function c(){if(!i){a(s);s=Math.min(2*s,36e5)}}async function u(e,i=!1){if(!i&&nn(e,["replay_event","replay_recording"])){await o.push(e);a(100);return{}}try{if(t.shouldSend&&!1===await t.shouldSend(e))throw new Error("Envelope not sent because `shouldSend` callback returned false");const n=await r.send(e);let o=100;if(n)if(n.headers?.["retry-after"])o=Or(n.headers["retry-after"]);else if(n.headers?.["x-sentry-rate-limits"])o=6e4;else if((n.statusCode||0)>=400)return n;a(o);s=Dr;return n}catch(u){if(await function(e,n,r){return!nn(e,["client_report"])&&(!t.shouldStore||t.shouldStore(e,n,r))}(e,u,s)){i?await o.unshift(e):await o.push(e);c();n("Error sending. Event queued.",u);return{}}throw u}}t.flushAtStartup&&c();return{send:u,flush:e=>{if(void 0===e){s=Dr;a(100)}return r.flush(e)}}}}function Fr(e,t){let n;tn(e,(e,r)=>{t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0);return!!n});return n}function $r(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,n)||function(e,t){if(!t)return!1;return Ur(e)===Ur(t)}(e,r)}function Ur(e){return"/"===e[e.length-1]?e.slice(0,-1):e}function jr(e,...t){const n=new String(String.raw(e,...t));n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s");n.__sentry_template_values__=t;return n}const Br=jr;function Hr(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function zr(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function qr(e={}){const t=e.client||je();if(!Yn()||!t)return{};const n=De(o());if(n.getTraceData)return n.getTraceData(e);const r=e.scope||Ne(),i=e.span||Ot(),s=i?vt(i):function(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return mt(t,r,n)}(r),a=lt(i?Gt(i):Vt(t,r));if(!pt.test(s)){p.warn("Invalid sentry-trace data. Cannot generate trace data");return{}}return{"sentry-trace":s,baggage:a}}const Wr=100;function Vr(e,t){const n=je(),r=Fe();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Wr}=n.getOptions();if(i<=0)return;const s={timestamp:ge(),...e},a=o?u(()=>o(s,t)):s;if(null!==a){n.emit&&n.emit("beforeAddBreadcrumb",a,t);r.addBreadcrumb(a,i)}}let Gr;const Jr=new WeakMap,Kr=()=>({name:"FunctionToString",setupOnce(){Gr=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=se(this),n=Jr.has(je())&&void 0!==t?t:this;return Gr.apply(n,e)}}catch{}},setup(e){Jr.set(e,!0)}}),Yr=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Xr=(e={})=>{let n;return{name:"EventFilters",setup(t){const r=t.getOptions();n=Qr(e,r)},processEvent(r,o,i){if(!n){const t=i.getOptions();n=Qr(e,t)}return function(e,n){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;const n=e.transaction;return!!n&&ne(n,t)}(e,n.ignoreTransactions)){t&&p.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${fe(e)}`);return!0}}else{if(function(e,t){if(!t?.length)return!1;return ur(e).some(e=>ne(e,t))}(e,n.ignoreErrors)){t&&p.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${fe(e)}`);return!0}if(function(e){if(!e.exception?.values?.length)return!1;return!e.message&&!e.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value)}(e)){t&&p.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${fe(e)}`);return!0}if(function(e,t){if(!t?.length)return!1;const n=eo(e);return!!n&&ne(n,t)}(e,n.denyUrls)){t&&p.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${fe(e)}.\nUrl: ${eo(e)}`);return!0}if(!function(e,t){if(!t?.length)return!0;const n=eo(e);return!n||ne(n,t)}(e,n.allowUrls)){t&&p.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${fe(e)}.\nUrl: ${eo(e)}`);return!0}}return!1}(r,n)?null:r}}},Zr=(e={})=>({...Xr(e),name:"InboundFilters"});function Qr(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Yr],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function eo(e){try{const t=[...e.exception?.values??[]].reverse().find(e=>void 0===e.mechanism?.parent_id&&e.stacktrace?.frames?.length),n=t?.stacktrace?.frames;return n?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch{t&&p.error(`Cannot extract url for event ${fe(e)}`);return null}}function to(e,t,n,r,o,i){if(!o.exception?.values||!i||!q(i.originalException,Error))return;const s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=no(e,t,r,i.originalException,n,o.exception.values,s,0))}function no(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(q(r[o],Error)){ro(s,a);const i=e(t,r[o]),u=c.length;oo(i,o,u,a);c=no(e,t,n,r[o],o,[i,...c],i,u)}Array.isArray(r.errors)&&r.errors.forEach((r,i)=>{if(q(r,Error)){ro(s,a);const u=e(t,r),l=c.length;oo(u,`errors[${i}]`,l,a);c=no(e,t,n,r,o,[u,...c],u,l)}});return c}function ro(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0};e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function oo(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0};e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const io=new Map,so=new Set;function ao(e,t){!function(e){if(n._sentryModuleMetadata)for(const t of Object.keys(n._sentryModuleMetadata)){const r=n._sentryModuleMetadata[t];if(so.has(t))continue;so.add(t);const o=e(t);for(const e of o.reverse())if(e.filename){io.set(e.filename,r);break}}}(e);return io.get(t)}function co(e,t){try{t.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=ao(e,n.filename);t&&(n.module_metadata=t)}})}catch{}}function uo(e){try{e.exception.values.forEach(e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata})}catch{}}const lo=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",e=>{tn(e,(e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;if(t){uo(t);e[1]=t}}})});e.on("applyFrameMetadata",t=>{if(t.type)return;co(e.getOptions().stackParser,t)})}});function fo(e){const t="console";E(t,e);x(t,po)}function po(){"console"in n&&a.forEach(function(e){e in n.console&&re(n.console,e,function(t){c[e]=t;return function(...t){C("console",{args:t,level:e});const r=c[e];r?.apply(n.console,t)}})})}function ho(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const mo=(e={})=>{const t=e.levels||a,r=e.handled??!0;return{name:"CaptureConsole",setup(e){"console"in n&&fo(({args:n,level:o})=>{je()===e&&t.includes(o)&&function(e,t,n){const r={level:ho(t),extra:{arguments:e}};Ue(o=>{o.addEventProcessor(e=>{e.logger="console";he(e,{handled:n,type:"console"});return e});if("assert"===t){if(!e[0]){const t=`Assertion failed: ${ee(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1));Vn(t,r)}return}const i=e.find(e=>e instanceof Error);if(i){Wn(i,r);return}Vn(ee(e," "),r)})}(n,o,r)})}}};const go=()=>{let e;return{name:"Dedupe",processEvent(n){if(n.type)return n;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!_o(e,t))return!1;if(!yo(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=vo(t),r=vo(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!_o(e,t))return!1;if(!yo(e,t))return!1;return!0}(e,t))return!0;return!1}(n,e)){t&&p.warn("Event dropped due to being a duplicate of previously captured event.");return null}}catch{}return e=n}}};function yo(e,t){let n=S(e),r=S(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++){const e=r[o],t=n[o];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function _o(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch{return!1}}function vo(e){return e.exception?.values?.[0]}const bo=(e={})=>{const{depth:n=3,captureErrorCause:r=!0}=e;return{name:"ExtraErrorData",processEvent(e,o,i){const{maxValueLength:s=250}=i.getOptions();return function(e,n={},r,o,i){if(!n.originalException||!P(n.originalException))return e;const s=n.originalException.name||n.originalException.constructor.name,a=function(e,n,r){try{const t=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const n of Object.keys(e)){if(-1!==t.indexOf(n))continue;const i=e[n];o[n]=P(i)||"string"==typeof i?Z(`${i}`,r):i}n&&void 0!==e.cause&&(o.cause=P(e.cause)?e.cause.toString():e.cause);if("function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];o[e]=P(n)?n.toString():n}}return o}catch(o){t&&p.error("Unable to extract extra data from the Error object:",o)}return null}(n.originalException,o,i);if(a){const t={...e.contexts},n=Yt(a,r);if(B(n)){oe(n,"__sentry_skip_normalization__",!0);t[s]=n}return{...e,contexts:t}}return e}(e,o,n,r,s)}}};const So=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function wo(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";if(o){t=`${o}/${t}`;n="/"===o.charAt(0)}}t=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const t=e[r];if("."===t)e.splice(r,1);else if(".."===t){e.splice(r,1);n++}else if(n){e.splice(r,1);n--}}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter(e=>!!e),!n).join("/");return(n?"/":"")+t||"."}function ko(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function Eo(e,t){let n=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=So.exec(t);return n?n.slice(1):[]}(e)[2]||"";t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length));return n}const xo=(e={})=>{const t=e.root,r=e.prefix||"app:///",o="window"in n&&!!n.window,i=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){const e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(o||i){const e=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,i=t?function(e,t){e=wo(e).slice(1);t=wo(t).slice(1);const n=ko(e.split("/")),r=ko(t.split("/")),o=Math.min(n.length,r.length);let i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");s=s.concat(r.slice(i));return s.join("/")}(t,e):Eo(e);r.filename=`${n}${i}`}return r}}({isBrowser:o,root:t,prefix:r});return{name:"RewriteFrames",processEvent(e){let t=e;e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map(e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t?.frames?.map(e=>i(e))})}};var t})}}}catch{return e}}(t));return t}}};const Co=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],To=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],Io={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Mo=["select","insert","upsert","update","delete"];function Ro(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Oo(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function Lo(e,t){if(""===t||"*"===t)return"select(*)";if("select"===e)return`select(${t})`;if("or"===e||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let o;o=n?.startsWith("fts")?"textSearch":n?.startsWith("plfts")?"textSearch[plain]":n?.startsWith("phfts")?"textSearch[phrase]":n?.startsWith("wfts")?"textSearch[websearch]":n&&Io[n]||"filter";return`${o}(${e}, ${r.join(".")})`}function Ao(e,t=!1){return new Proxy(e,{apply:(n,r,o)=>bn({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[Ve]:"auto.db.supabase",[We]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},e=>Reflect.apply(n,r,o).then(t=>{if(t&&"object"==typeof t&&"error"in t&&t.error){e.setStatus({code:2});Wn(t.error,{mechanism:{handled:!1}})}else e.setStatus({code:1});e.end();return t}).catch(t=>{e.setStatus({code:2});e.end();Wn(t,{mechanism:{handled:!1}});throw t}).then(...o))})}function Po(e){if(!Oo(e.prototype.from)){e.prototype.from=new Proxy(e.prototype.from,{apply(e,n,r){const o=Reflect.apply(e,n,r);!function(e){for(const n of Mo)if(!Oo(e.prototype[n])){e.prototype[n]=new Proxy(e.prototype[n],{apply(e,r,o){const i=Reflect.apply(e,r,o),s=i.constructor;t&&p.log(`Instrumenting ${n} operation's PostgRESTFilterBuilder`);Do(s);return i}});Ro(e.prototype[n])}}(o.constructor);return o}});Ro(e.prototype.from)}}function Do(e){if(!Oo(e.prototype.then)){e.prototype.then=new Proxy(e.prototype.then,{apply(e,t,n){const r=Mo,o=t,i=function(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}(o.method,o.headers);if(!r.includes(i))return Reflect.apply(e,t,n);if(!o?.url?.pathname||"string"!=typeof o.url.pathname)return Reflect.apply(e,t,n);const s=o.url.pathname.split("/"),a=s.length>0?s[s.length-1]:"",c=[];for(const[f,p]of o.url.searchParams.entries())c.push(Lo(f,p));const u=Object.create(null);if(B(o.body))for(const[f,p]of Object.entries(o.body))u[f]=p;const l=`${"select"===i?"":`${i}${u?"(...) ":""}`}${c.join(" ")} from(${a})`,d={"db.table":a,"db.schema":o.schema,"db.url":o.url.origin,"db.sdk":o.headers["X-Client-Info"],"db.system":"postgresql","db.operation":i,[Ve]:"auto.db.supabase",[We]:"db"};c.length&&(d["db.query"]=c);Object.keys(u).length&&(d["db.body"]=u);return bn({name:l,attributes:d},r=>Reflect.apply(e,t,[]).then(e=>{if(r){e&&"object"==typeof e&&"status"in e&&rt(r,e.status||500);r.end()}if(e.error){const t=new Error(e.error.message);e.error.code&&(t.code=e.error.code);e.error.details&&(t.details=e.error.details);const n={};c.length&&(n.query=c);Object.keys(u).length&&(n.body=u);Wn(t,{contexts:{supabase:n}})}const t={type:"supabase",category:`db.${i}`,message:l},n={};c.length&&(n.query=c);Object.keys(u).length&&(n.body=u);Object.keys(n).length&&(t.data=n);Vr(t);return e},e=>{if(r){rt(r,500);r.end()}throw e}).then(...n))}});Ro(e.prototype.then)}}const No=e=>{if(!e){t&&p.warn("Supabase integration was not installed because no Supabase client was provided.");return}Po(e.constructor===Function?e:e.constructor);!function(e){const t=e.auth;if(t&&!Oo(e.auth)){for(const n of Co){const r=t[n];r&&"function"==typeof e.auth[n]&&(e.auth[n]=Ao(r))}for(const n of To){const r=t.admin[n];r&&"function"==typeof e.auth.admin[n]&&(e.auth.admin[n]=Ao(r,!0))}Ro(e.auth)}}(e)},Fo=e=>{return t=e.supabaseClient,{setupOnce(){No(t)},name:"Supabase"};var t};function $o(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function Uo(e){return e.map(e=>"number"==typeof e?"<array>":e).join(".")}function jo(e){const t=new Set;for(const r of e.issues){const e=Uo(r.path);e.length>0&&t.add(e)}const n=Array.from(t);if(0===n.length){let t="variable";if(e.issues.length>0){const n=e.issues[0];void 0!==n&&"expected"in n&&"string"==typeof n.expected&&(t=n.expected)}return`Failed to validate ${t}`}return`Failed to validate keys: ${Z(n.join(", "),100)}`}function Bo(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!(o=r.originalException,P(o)&&"ZodError"===o.name&&Array.isArray(o.issues))||0===r.originalException.issues.length)return n;var o;try{const o=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map($o);if(t){Array.isArray(r.attachments)||(r.attachments=[]);r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})}return{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:jo(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":o.slice(0,e)}}}catch(i){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:i instanceof Error?`${i.name}: ${i.message}\n${i.stack}`:"unknown"}}}}}const Ho=(e={})=>{const t=e.limit??10;return{name:"ZodErrors",processEvent:(n,r)=>Bo(t,e.saveZodIssuesAsAttachment,n,r)}},zo=e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",e=>{tn(e,(e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;if(t){uo(t);e[1]=t}}})});e.on("applyFrameMetadata",t=>{if(t.type)return;co(e.getOptions().stackParser,t)})},processEvent(t){const n=function(e){const t=S(e);if(!t)return;return t.filter(e=>!!e.filename).map(e=>e.module_metadata?Object.keys(e.module_metadata).filter(e=>e.startsWith(qo)).map(e=>e.slice(qo.length)):[])}(t);if(n){const r=n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"](t=>!t.some(t=>e.filterKeys.includes(t)));if(r){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags={...t.tags,third_party_code:!0}}}return t}});const qo="_sentryBundlerPluginAppKey:",Wo="flag.evaluation.";function Vo(e){const t=Ne().getScopeData().contexts.flags,n=t?t.values:[];if(!n.length)return e;void 0===e.contexts&&(e.contexts={});e.contexts.flags={values:[...n]};return e}function Go(e,n,r=100){const o=Ne().getScopeData().contexts;o.flags||(o.flags={values:[]});!function(e,n,r,o){if("boolean"!=typeof r)return;if(e.length>o){t&&p.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${o}`);return}const i=e.findIndex(e=>e.flag===n);-1!==i&&e.splice(i,1);e.length===o&&e.shift();e.push({flag:n,result:r})}(o.flags.values,e,n,r)}function Jo(e,t,n=10){if("boolean"!=typeof t)return;const r=Ot();if(!r)return;const o=kt(r).data;if(`${Wo}${e}`in o){r.setAttribute(`${Wo}${e}`,t);return}Object.keys(o).filter(e=>e.startsWith(Wo)).length<n&&r.setAttribute(`${Wo}${e}`,t)}const Ko=()=>({name:"FeatureFlags",processEvent:(e,t,n)=>Vo(e),addFeatureFlag(e,t){Go(e,t);Jo(e,t)}});function Yo(e){return"isRelative"in e}function Xo(e,t){const n=e.indexOf("://")<=0&&0!==e.indexOf("//"),r=t??(n?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;const t=new URL(e,r);return n?{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash}:t}catch{}}function Zo(e){if(Yo(e))return e.pathname;const t=new URL(e);t.search="";t.hash="";["80","443"].includes(t.port)&&(t.port="");t.password&&(t.password="%filtered%");t.username&&(t.username="%filtered%");return t.toString()}function Qo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function ei(e){return e.split(/[?#]/,1)[0]}function ti(e,t,n,r,o="auto.http.browser"){if(!e.fetchData)return;const{method:i,url:s}=e.fetchData,a=Dt()&&t(s);if(e.endTimestamp&&a){const t=e.fetchData.__span;if(!t)return;const n=r[t];if(n){!function(e,t){if(t.response){rt(e,t.response.status);const n=t.response?.headers?.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}(n,e);delete r[t]}return}const c=!!Ot(),u=a&&c?Sn(function(e,t,n){const r=Xo(e);return{name:r?`${t} ${Zo(r)}`:t,attributes:ri(e,r,t,n)}}(s,i,o)):new Jt;e.fetchData.__span=u.spanContext().spanId;r[u.spanContext().spanId]=u;if(n(e.fetchData.url)){const t=e.args[0],n=e.args[1]||{},r=function(e,t,n){const r=qr({span:n}),o=r["sentry-trace"],i=r.baggage;if(!o)return;const s=t.headers||(V(e)?e.headers:void 0);if(s){if(function(e){return"undefined"!=typeof Headers&&q(e,Headers)}(s)){const e=new Headers(s);e.get("sentry-trace")||e.set("sentry-trace",o);if(i){const t=e.get("baggage");t?ni(t)||e.set("baggage",`${t},${i}`):e.set("baggage",i)}return e}if(Array.isArray(s)){const e=[...s];s.find(e=>"sentry-trace"===e[0])||e.push(["sentry-trace",o]);const t=s.find(e=>"baggage"===e[0]&&ni(e[1]));i&&!t&&e.push(["baggage",i]);return e}{const e="sentry-trace"in s?s["sentry-trace"]:void 0,t="baggage"in s?s.baggage:void 0,n=t?Array.isArray(t)?[...t]:[t]:[],r=t&&(Array.isArray(t)?t.find(e=>ni(e)):ni(t));i&&!r&&n.push(i);return{...s,"sentry-trace":e??o,baggage:n.length>0?n.join(","):void 0}}}return{...r}}(t,n,Dt()&&c?u:void 0);if(r){e.args[1]=n;n.headers=r}}const l=je();if(l){const t={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};l.emit("beforeOutgoingRequestSpan",u,t)}return u}function ni(e){return e.split(",").some(e=>e.trim().startsWith(at))}function ri(e,t,n,r){const o={url:e,type:"fetch","http.method":n,[Ve]:r,[We]:"http.client"};if(t){if(!Yo(t)){o["http.url"]=t.href;o["server.address"]=t.host}t.search&&(o["http.query"]=t.search);t.hash&&(o["http.fragment"]=t.hash)}return o}function oi(e,t={},n=Ne()){const{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,l={contexts:{feedback:{contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},d=n?.getClient()||je();d&&d.emit("beforeSendFeedback",l,t);return n.captureEvent(l,t)}const ii={[Ve]:"auto.console.logging"},si=(e={})=>{const n=e.levels||a;return{name:"ConsoleLogs",setup(e){const{enableLogs:r,_experiments:o,normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=e.getOptions();r??o?.enableLogs?fo(({args:t,level:r})=>{if(je()!==e||!n.includes(r))return;if("assert"===r){if(!t[0]){const e=t.slice(1);Er({level:"error",message:e.length>0?`Assertion failed: ${ai(e,i,s)}`:"Assertion failed",attributes:ii})}return}const o="log"===r;Er({level:o?"info":r,message:ai(t,i,s),severityNumber:o?10:void 0,attributes:ii})}):t&&p.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled")}}};function ai(e,t,r){return"util"in n&&"function"==typeof n.util.format?n.util.format(...e):function(e,t,n){return e.map(e=>j(e)?String(e):JSON.stringify(Yt(e,t,n))).join(" ")}(e,t,r)}function ci(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}const ui=n;function li(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function di(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in ui))return!1;try{new Headers;new Request("http://www.example.com");new Response;return!0}catch{return!1}}())return!1;if(li(ui.fetch))return!0;let e=!1;const n=ui.document;if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0;n.head.appendChild(t);t.contentWindow?.fetch&&(e=li(t.contentWindow.fetch));n.head.removeChild(t)}catch(r){t&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function fi(e,t){const n="fetch";E(n,e);x(n,()=>pi(void 0,t))}function pi(e,t=!1){t&&!di()||re(n,"fetch",function(t){return function(...r){const o=new Error,{method:i,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:gi(t),method:mi(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:gi(t),method:mi(t,"method")?String(t.method).toUpperCase():"GET"}}(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:1e3*ve(),virtualError:o,headers:yi(r)};e||C("fetch",{...a});return t.apply(n,r).then(async t=>{e?e(t):C("fetch",{...a,endTimestamp:1e3*ve(),response:t});return t},e=>{C("fetch",{...a,endTimestamp:1e3*ve(),error:e});if(P(e)&&void 0===e.stack){e.stack=o.stack;oe(e,"framesToPop",1)}if(e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{const t=new URL(a.fetchData.url);e.message=`${e.message} (${t.host})`}catch{}throw e})}})}function hi(e){let t;try{t=e.clone()}catch{return}!async function(e,t){if(e?.body){const n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},9e4);let i=!0;for(;i;){let e;try{e=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:o}=await r.read();clearTimeout(e);if(o){t();i=!1}}catch{i=!1}finally{clearTimeout(e)}}clearTimeout(o);r.releaseLock();n.cancel().then(null,()=>{})}}(t,()=>{C("fetch-body-resolved",{endTimestamp:1e3*ve(),response:e})})}function mi(e,t){return!!e&&"object"==typeof e&&!!e[t]}function gi(e){return"string"==typeof e?e:e?mi(e,"url")?e.url:e.toString?e.toString():"":""}function yi(e){const[t,n]=e;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(V(t))return new Headers(t.headers)}catch{}}function _i(){throw new Error("setTimeout has not been defined")}function vi(){throw new Error("clearTimeout has not been defined")}var bi=_i,Si=vi;"function"==typeof Kt.setTimeout&&(bi=setTimeout);"function"==typeof Kt.clearTimeout&&(Si=clearTimeout);function wi(e){if(bi===setTimeout)return setTimeout(e,0);if((bi===_i||!bi)&&setTimeout){bi=setTimeout;return setTimeout(e,0)}try{return bi(e,0)}catch(t){try{return bi.call(null,e,0)}catch(t){return bi.call(this,e,0)}}}var ki,Ei=[],xi=!1,Ci=-1;function Ti(){if(xi&&ki){xi=!1;ki.length?Ei=ki.concat(Ei):Ci=-1;Ei.length&&Ii()}}function Ii(){if(!xi){var e=wi(Ti);xi=!0;for(var t=Ei.length;t;){ki=Ei;Ei=[];for(;++Ci<t;)ki&&ki[Ci].run();Ci=-1;t=Ei.length}ki=null;xi=!1;!function(e){if(Si===clearTimeout)return clearTimeout(e);if((Si===vi||!Si)&&clearTimeout){Si=clearTimeout;return clearTimeout(e)}try{return Si(e)}catch(t){try{return Si.call(null,e)}catch(t){return Si.call(this,e)}}}(e)}}function Mi(e,t){this.fun=e;this.array=t}Mi.prototype.run=function(){this.fun.apply(null,this.array)};function Ri(){}var Oi=Ri,Li=Ri,Ai=Ri,Pi=Ri,Di=Ri,Ni=Ri,Fi=Ri;var $i=Kt.performance||{},Ui=$i.now||$i.mozNow||$i.msNow||$i.oNow||$i.webkitNow||function(){return(new Date).getTime()};var ji=new Date;var Bi={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ei.push(new Mi(e,t));1!==Ei.length||xi||wi(Ii)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Oi,addListener:Li,once:Ai,off:Pi,removeListener:Di,removeAllListeners:Ni,emit:Fi,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Ui.call($i),n=Math.floor(t),r=Math.floor(t%1*1e9);if(e){n-=e[0];if((r-=e[1])<0){n--;r+=1e9}}return[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ji)/1e3}};function Hi(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call(Bi)}function zi(){return"undefined"!=typeof window&&(!Hi()||function(){const e=n.process;return"renderer"===e?.type}())}const qi=n,Wi=qi.document,Vi=qi.navigator,Gi="Report a Bug",Ji=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=je();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&Ne().setTags(e.tags);const r=oi({source:"api",url:Y(),...e},t);return new Promise((e,t)=>{const o=setTimeout(()=>t("Unable to determine if Feedback was correctly sent."),3e4),i=n.on("afterSendEvent",(n,s)=>{if(n.event_id===r){clearTimeout(o);i();return s&&"number"==typeof s.statusCode&&s.statusCode>=200&&s.statusCode<300?e(r):s&&"number"==typeof s.statusCode&&0===s.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):s&&"number"==typeof s.statusCode&&403===s.statusCode?t("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):t("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")}})})},Ki="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Yi(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.();e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.();e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r);e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n);e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.();e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Xi(e,t){Object.entries(t).forEach(([t,n])=>{e.setAttributeNS(null,t,n)});return e}function Zi({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const o=Wi.createElement("button");o.type="button";o.className="widget__actor";o.ariaHidden="false";o.ariaLabel=t||e||Gi;o.appendChild(function(){const e=e=>qi.document.createElementNS("http://www.w3.org/2000/svg",e),t=Xi(e("svg"),{width:"20",height:"20",viewBox:"0 0 20 20",fill:"var(--actor-color, var(--foreground))"}),n=Xi(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Xi(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),i=Xi(e("clipPath"),{id:"clip0_57_80"}),s=Xi(e("rect"),{width:"20",height:"20",fill:"white"});i.appendChild(s);o.appendChild(i);t.appendChild(o).appendChild(i).appendChild(s);return t}());if(e){const t=Wi.createElement("span");t.appendChild(Wi.createTextNode(e));o.appendChild(t)}const i=function(e){const t=Wi.createElement("style");t.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n';e&&t.setAttribute("nonce",e);return t}(r);return{el:o,appendToDom(){n.appendChild(i);n.appendChild(o)},removeFromDom(){o.remove();i.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}const Qi="rgba(88, 74, 192, 1)",es={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Qi,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},ts={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Qi,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function ns(e){return`\n  --foreground: ${e.foreground};\n  --background: ${e.background};\n  --accent-foreground: ${e.accentForeground};\n  --accent-background: ${e.accentBackground};\n  --success-color: ${e.successColor};\n  --error-color: ${e.errorColor};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n  --outline: ${e.outline};\n  --interactive-filter: ${e.interactiveFilter};\n  `}const rs=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:r="sentry-feedback",autoInject:o=!0,showBranding:i=!0,isEmailRequired:s=!1,isNameRequired:a=!1,showEmail:c=!0,showName:u=!0,enableScreenshot:l=!0,useSentryUser:d={email:"email",name:"username"},tags:f,styleNonce:h,scriptNonce:m,colorScheme:g="system",themeLight:y={},themeDark:_={},addScreenshotButtonLabel:v="Add a screenshot",cancelButtonLabel:b="Cancel",confirmButtonLabel:S="Confirm",emailLabel:w="Email",emailPlaceholder:k="your.email@example.org",formTitle:E="Report a Bug",isRequiredLabel:x="(required)",messageLabel:C="Description",messagePlaceholder:T="What's the bug? What did you expect?",nameLabel:I="Name",namePlaceholder:M="Your Name",removeScreenshotButtonLabel:R="Remove screenshot",submitButtonLabel:O="Send Bug Report",successMessageText:L="Thank you for your report!",triggerLabel:A=Gi,triggerAriaLabel:P="",onFormOpen:D,onFormClose:N,onSubmitSuccess:F,onSubmitError:$,onFormSubmitted:U}={})=>{const j={id:r,autoInject:o,showBranding:i,isEmailRequired:s,isNameRequired:a,showEmail:c,showName:u,enableScreenshot:l,useSentryUser:d,tags:f,styleNonce:h,scriptNonce:m,colorScheme:g,themeDark:_,themeLight:y,triggerLabel:A,triggerAriaLabel:P,cancelButtonLabel:b,submitButtonLabel:O,confirmButtonLabel:S,formTitle:E,emailLabel:w,emailPlaceholder:k,messageLabel:C,messagePlaceholder:T,nameLabel:I,namePlaceholder:M,successMessageText:L,isRequiredLabel:x,addScreenshotButtonLabel:v,removeScreenshotButtonLabel:R,onFormClose:N,onFormOpen:D,onSubmitError:$,onSubmitSuccess:F,onFormSubmitted:U};let B=null,H=[];const z=e=>{if(!B){const t=Wi.createElement("div");t.id=String(e.id);Wi.body.appendChild(t);B=t.attachShadow({mode:"open"});B.appendChild(function({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const o=Wi.createElement("style");o.textContent=`\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${"system"!==e?"color-scheme: only light;":""}\n\n  ${ns("dark"===e?{...ts,...t}:{...es,...n})}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${ns({...ts,...t})}\n  }\n}`:""}\n}\n`;r&&o.setAttribute("nonce",r);return o}(e))}return B},q=async r=>{const o=r.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Vi.userAgent)||/Macintosh/i.test(Vi.userAgent)&&Vi.maxTouchPoints&&Vi.maxTouchPoints>1||!isSecureContext);let i,s;try{i=(t?t():await e("feedbackModalIntegration",m))();cr(i)}catch{Ki&&p.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`.");throw new Error("[Feedback] Missing feedback modal integration!")}try{const t=o?n?n():await e("feedbackScreenshotIntegration",m):void 0;if(t){s=t();cr(s)}}catch{Ki&&p.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const a=i.createDialog({options:{...r,onFormClose:()=>{a?.close();r.onFormClose?.()},onFormSubmitted:()=>{a?.close();r.onFormSubmitted?.()}},screenshotIntegration:s,sendFeedback:Ji,shadow:z(r)});return a},W=(e,t={})=>{const n=Yi(j,t),r="string"==typeof e?Wi.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r){Ki&&p.error("[Feedback] Unable to attach to target element");throw new Error("Unable to attach to target element")}let o=null;const i=async()=>{o||(o=await q({...n,onFormSubmitted:()=>{o?.removeFromDom();n.onFormSubmitted?.()}}));o.appendToDom();o.open()};r.addEventListener("click",i);const s=()=>{H=H.filter(e=>e!==s);o?.removeFromDom();o=null;r.removeEventListener("click",i)};H.push(s);return s},V=(e={})=>{const t=Yi(j,e),n=z(t),r=Zi({triggerLabel:t.triggerLabel,triggerAriaLabel:t.triggerAriaLabel,shadow:n,styleNonce:h});W(r.el,{...t,onFormOpen(){r.hide()},onFormClose(){r.show()},onFormSubmitted(){r.show()}});return r};return{name:"Feedback",setupOnce(){zi()&&j.autoInject&&("loading"===Wi.readyState?Wi.addEventListener("DOMContentLoaded",()=>V().appendToDom()):V().appendToDom())},attachTo:W,createWidget(e={}){const t=V(Yi(j,e));t.appendToDom();return t},createForm:async(e={})=>q(Yi(j,e)),remove(){if(B){B.parentElement?.remove();B=null}H.forEach(e=>e());H=[]}}};var os,is,ss,as,cs,us,ls,ds={},fs=[],ps=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,hs=Array.isArray;function ms(e,t){for(var n in t)e[n]=t[n];return e}function gs(e){var t=e.parentNode;t&&t.removeChild(e)}function ys(e,t,n){var r,o,i,s={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?os.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return _s(e,s,r,o,null)}function _s(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++ss:o,__i:-1,__u:0};return null==o&&null!=is.vnode&&is.vnode(i),i}function vs(e){return e.children}function bs(e,t){this.props=e,this.context=t}function Ss(e,t){if(null==t)return e.__?Ss(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Ss(e):null}function ws(e,t,n){var r,o=e.__v,i=o.__e,s=e.__P;if(s)return(r=ms({},o)).__v=o.__v+1,is.vnode&&is.vnode(r),As(s,r,o,e.__n,void 0!==s.ownerSVGElement,32&o.__u?[i]:null,t,null==i?Ss(o):i,!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&ks(r),r}function ks(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return ks(e)}}function Es(e){(!e.__d&&(e.__d=!0)&&as.push(e)&&!xs.__r++||cs!==is.debounceRendering)&&((cs=is.debounceRendering)||us)(xs)}function xs(){var e,t,n,r=[],o=[];for(as.sort(ls);e=as.shift();)e.__d&&(n=as.length,t=ws(e,r,o)||t,0===n||as.length>n?(Ps(r,t,o),o.length=r.length=0,t=void 0,as.sort(ls)):t&&is.__c&&is.__c(t,fs));t&&Ps(r,t,o),xs.__r=0}function Cs(e,t,n,r,o,i,s,a,c,u,l){var d,f,p,h,m,g=r&&r.__k||fs,y=t.length;for(n.__d=c,function(e,t,n){var r,o,i,s,a,c=t.length,u=n.length,l=u,d=0;for(e.__k=[],r=0;r<c;r++)null!=(o=e.__k[r]=null==(o=t[r])||"boolean"==typeof o||"function"==typeof o?null:"string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?_s(null,o,null,null,o):hs(o)?_s(vs,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?_s(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)?(o.__=e,o.__b=e.__b+1,a=Is(o,n,s=r+d,l),o.__i=a,i=null,-1!==a&&(l--,(i=n[a])&&(i.__u|=131072)),null==i||null===i.__v?(-1==a&&d--,"function"!=typeof o.type&&(o.__u|=65536)):a!==s&&(a===s+1?d++:a>s?l>c-s?d+=a-s:d--:d=a<s&&a==s-1?a-s:0,a!==r+d&&(o.__u|=65536))):(i=n[r])&&null==i.key&&i.__e&&(i.__e==e.__d&&(e.__d=Ss(i)),Ns(i,i,!1),n[r]=null,l--);if(l)for(r=0;r<u;r++)null!=(i=n[r])&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=Ss(i)),Ns(i,i))}(n,t,g),c=n.__d,d=0;d<y;d++)null!=(p=n.__k[d])&&"boolean"!=typeof p&&"function"!=typeof p&&(f=-1===p.__i?ds:g[p.__i]||ds,p.__i=d,As(e,p,f,o,i,s,a,c,u,l),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Ds(f.ref,null,p),l.push(p.ref,p.__c||h,p)),null==m&&null!=h&&(m=h),65536&p.__u||f.__k===p.__k?c=Ts(p,c,e):"function"==typeof p.type&&void 0!==p.__d?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function Ts(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=Ts(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function Is(e,t,n,r){var o=e.key,i=e.type,s=n-1,a=n+1,c=t[n];if(null===c||c&&o==c.key&&i===c.type)return n;if(r>(null==c||131072&c.__u?0:1))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&!(131072&c.__u)&&o==c.key&&i===c.type)return s;s--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&o==c.key&&i===c.type)return a;a++}}return-1}function Ms(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||ps.test(t)?n:n+"px"}function Rs(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ms(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Ms(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?Ls:Os,i)):e.removeEventListener(t,i?Ls:Os,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function Os(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(is.event?is.event(e):e)}}function Ls(e){if(this.l)return this.l[e.type+!0](is.event?is.event(e):e)}function As(e,t,n,r,o,i,s,a,c,u){var l,d,f,p,h,m,g,y,_,v,b,S,w,k,E,x=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(l=is.__b)&&l(t);e:if("function"==typeof x)try{if(y=t.props,_=(l=x.contextType)&&r[l.__c],v=l?_?_.props.value:l.__:r,n.__c?g=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(y,v):(t.__c=d=new bs(y,v),d.constructor=x,d.render=Fs),_&&_.sub(d),d.props=y,d.state||(d.state={}),d.context=v,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=ms({},d.__s)),ms(d.__s,x.getDerivedStateFromProps(y,d.__s))),p=d.props,h=d.state,d.__v=t,f)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&y!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,v),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,v)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=y,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),b=0;b<d._sb.length;b++)d.__h.push(d._sb[b]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,v),null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,h,m)})}if(d.context=v,d.props=y,d.__P=e,d.__e=!1,S=is.__r,w=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(t),l=d.render(d.props,d.state,d.context),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[]}else do{d.__d=!1,S&&S(t),l=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(r=ms(ms({},r),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(p,h)),Cs(e,hs(E=null!=l&&l.type===vs&&null==l.key?l.props.children:l)?E:[E],t,n,r,o,i,s,a,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),g&&(d.__E=d.__=null)}catch(e){t.__v=null,c||null!=i?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),is.__e(e,t,n)}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,o,i,s,a,c){var u,l,d,f,p,h,m,g=n.props,y=t.props,_=t.type;if("svg"===_&&(o=!0),null!=i)for(u=0;u<i.length;u++)if((p=i[u])&&"setAttribute"in p==!!_&&(_?p.localName===_:3===p.nodeType)){e=p,i[u]=null;break}if(null==e){if(null===_)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,y.is&&y),i=null,a=!1}if(null===_)g===y||a&&e.data===y||(e.data=y);else{if(i=i&&os.call(e.childNodes),g=n.props||ds,!a&&null!=i)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],"children"==u||("dangerouslySetInnerHTML"==u?d=p:"key"===u||u in y||Rs(e,u,null,p,o));for(u in y)p=y[u],"children"==u?f=p:"dangerouslySetInnerHTML"==u?l=p:"value"==u?h=p:"checked"==u?m=p:"key"===u||a&&"function"!=typeof p||g[u]===p||Rs(e,u,p,g[u],o);if(l)a||d&&(l.__html===d.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),Cs(e,hs(f)?f:[f],t,n,r,o&&"foreignObject"!==_,i,s,i?i[0]:n.__k&&Ss(n,0),a,c),null!=i)for(u=i.length;u--;)null!=i[u]&&gs(i[u]);a||(u="value",void 0!==h&&(h!==e[u]||"progress"===_&&!h||"option"===_&&h!==g[u])&&Rs(e,u,h,g[u],!1),u="checked",void 0!==m&&m!==e[u]&&Rs(e,u,m,g[u],!1))}return e}(n.__e,t,n,r,o,i,s,c,u);(l=is.diffed)&&l(t)}function Ps(e,t,n){for(var r=0;r<n.length;r++)Ds(n[r],n[++r],n[++r]);is.__c&&is.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){is.__e(e,t.__v)}})}function Ds(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){is.__e(e,n)}}function Ns(e,t,n){var r,o;if(is.unmount&&is.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ds(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){is.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Ns(r[o],t,n||"function"!=typeof e.type);n||null==e.__e||gs(e.__e),e.__=e.__e=e.__d=void 0}function Fs(e,t,n){return this.constructor(e,n)}os=fs.slice,is={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(t){e=t}throw e}},ss=0,bs.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=ms({},this.state),"function"==typeof e&&(e=e(ms({},n),this.props)),e&&ms(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),Es(this))},bs.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Es(this))},bs.prototype.render=vs,as=[],us="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ls=function(e,t){return e.__v.__b-t.__v.__b},xs.__r=0;var $s,Us,js,Bs,Hs=0,zs=[],qs=[],Ws=is,Vs=Ws.__b,Gs=Ws.__r,Js=Ws.diffed,Ks=Ws.__c,Ys=Ws.unmount,Xs=Ws.__;function Zs(e,t){Ws.__h&&Ws.__h(Us,e,Hs||t),Hs=0;var n=Us.__H||(Us.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:qs}),n.__[e]}function Qs(e){return Hs=1,ea(la,e)}function ea(e,t,n){var r=Zs($s++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):la(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Us,!Us.u)){var o=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter(function(e){return!!e.__c});if(o.every(function(e){return!e.__N}))return!i||i.call(this,e,t,n);var s=!1;return o.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}}),!(!s&&r.__c.props===e)&&(!i||i.call(this,e,t,n))};Us.u=!0;var i=Us.shouldComponentUpdate,s=Us.componentWillUpdate;Us.componentWillUpdate=function(e,t,n){if(this.__e){var r=i;i=void 0,o(e,t,n),i=r}s&&s.call(this,e,t,n)},Us.shouldComponentUpdate=o}return r.__N||r.__}function ta(e,t){var n=Zs($s++,4);!Ws.__s&&ua(n.__H,t)&&(n.__=e,n.i=t,Us.__h.push(n))}function na(e,t){var n=Zs($s++,7);return ua(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function ra(e,t){return Hs=8,na(function(){return e},t)}function oa(){for(var e;e=zs.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(aa),e.__H.__h.forEach(ca),e.__H.__h=[]}catch($s){e.__H.__h=[],Ws.__e($s,e.__v)}}Ws.__b=function(e){Us=null,Vs&&Vs(e)},Ws.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Xs&&Xs(e,t)},Ws.__r=function(e){Gs&&Gs(e),$s=0;var t=(Us=e.__c).__H;t&&(js===Us?(t.__h=[],Us.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=qs,e.__N=e.i=void 0})):(t.__h.forEach(aa),t.__h.forEach(ca),t.__h=[],$s=0)),js=Us},Ws.diffed=function(e){Js&&Js(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==zs.push(t)&&Bs===Ws.requestAnimationFrame||((Bs=Ws.requestAnimationFrame)||sa)(oa)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==qs&&(e.__=e.__V),e.i=void 0,e.__V=qs})),js=Us=null},Ws.__c=function(e,t){t.some(function(e){try{e.__h.forEach(aa),e.__h=e.__h.filter(function(e){return!e.__||ca(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],Ws.__e(n,e.__v)}}),Ks&&Ks(e,t)},Ws.unmount=function(e){Ys&&Ys(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{aa(e)}catch(e){t=e}}),n.__H=void 0,t&&Ws.__e(t,n.__v))};var ia="function"==typeof requestAnimationFrame;function sa(e){var t,n=function(){clearTimeout(r),ia&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ia&&(t=requestAnimationFrame(n))}function aa(e){var t=Us,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Us=t}function ca(e){var t=Us;e.__c=e.__(),Us=t}function ua(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function la(e,t){return"function"==typeof t?t(e):t}const da=Object.defineProperty({__proto__:null,useCallback:ra,useContext:function(e){var t=Us.context[e.__c],n=Zs($s++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Us)),t.props.value):e.__},useDebugValue:function(e,t){Ws.useDebugValue&&Ws.useDebugValue(t?t(e):e)},useEffect:function(e,t){var n=Zs($s++,3);!Ws.__s&&ua(n.__H,t)&&(n.__=e,n.i=t,Us.__H.__h.push(n))},useErrorBoundary:function(e){var t=Zs($s++,10),n=Qs();return t.__=e,Us.componentDidCatch||(Us.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:function(){var e=Zs($s++,11);if(!e.__){for(var t=Us.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useImperativeHandle:function(e,t,n){Hs=6,ta(function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},null==n?n:n.concat(e))},useLayoutEffect:ta,useMemo:na,useReducer:ea,useRef:function(e){return Hs=5,na(function(){return{current:e}},[])},useState:Qs},Symbol.toStringTag,{value:"Module"});function fa(){const e=e=>Wi.createElementNS("http://www.w3.org/2000/svg",e),t=Xi(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Xi(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});t.appendChild(n);return t}function pa({options:e}){const t=na(()=>({__html:fa().outerHTML}),[]);return ys("h2",{class:"dialog__header"},ys("span",{class:"dialog__title"},e.formTitle),e.showBranding?ys("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function ha(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function ma({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:i,onSubmitError:s,showEmail:a,showName:c,screenshotInput:u}){const{tags:l,addScreenshotButtonLabel:d,removeScreenshotButtonLabel:f,cancelButtonLabel:h,emailLabel:m,emailPlaceholder:g,isEmailRequired:y,isNameRequired:_,messageLabel:v,messagePlaceholder:b,nameLabel:S,namePlaceholder:w,submitButtonLabel:k,isRequiredLabel:E}=e,[x,C]=Qs(!1),[T,I]=Qs(null),[M,R]=Qs(!1),O=u?.input,[L,A]=Qs(null),P=ra(e=>{A(e);R(!1)},[]),D=ra(e=>{const t=function(e,t){const n=[];t.isNameRequired&&!e.name&&n.push(t.nameLabel);t.isEmailRequired&&!e.email&&n.push(t.emailLabel);e.message||n.push(t.messageLabel);return n}(e,{emailLabel:m,isEmailRequired:y,isNameRequired:_,messageLabel:v,nameLabel:S});t.length>0?I(`Please enter in the following required fields: ${t.join(", ")}`):I(null);return 0===t.length},[m,y,_,v,S]),N=ra(async e=>{C(!0);try{e.preventDefault();if(!(e.target instanceof HTMLFormElement))return;const t=new FormData(e.target),n=await(u&&M?u.value():void 0),r={name:ha(t,"name"),email:ha(t,"email"),message:ha(t,"message"),attachments:n?[n]:void 0};if(!D(r))return;try{const e=await o({name:r.name,email:r.email,message:r.message,source:"widget",tags:l},{attachments:r.attachments});i(r,e)}catch(T){Ki&&p.error(T);I(T);s(T)}}finally{C(!1)}},[u&&M,i,s]);return ys("form",{class:"form",onSubmit:N},O&&M?ys(O,{onError:P}):null,ys("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:x},ys("div",{class:"form__top"},T?ys("div",{class:"form__error-container"},T):null,c?ys("label",{for:"name",class:"form__label"},ys(ga,{label:S,isRequiredLabel:E,isRequired:_}),ys("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:w,required:_,type:"text"})):ys("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?ys("label",{for:"email",class:"form__label"},ys(ga,{label:m,isRequiredLabel:E,isRequired:y}),ys("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:g,required:y,type:"email"})):ys("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),ys("label",{for:"message",class:"form__label"},ys(ga,{label:v,isRequiredLabel:E,isRequired:!0}),ys("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:b,required:!0,rows:5})),O?ys("label",{for:"screenshot",class:"form__label"},ys("button",{class:"btn btn--default",disabled:x,type:"button",onClick:()=>{A(null);R(e=>!e)}},M?f:d),L?ys("div",{class:"form__error-container"},L.message):null):null),ys("div",{class:"btn-group"},ys("button",{class:"btn btn--primary",disabled:x,type:"submit"},k),ys("button",{class:"btn btn--default",disabled:x,type:"button",onClick:r},h))))}function ga({label:e,isRequired:t,isRequiredLabel:n}){return ys("span",{class:"form__label__text"},e,t&&ys("span",{class:"form__label__text--required"},n))}function ya(){const e=e=>qi.document.createElementNS("http://www.w3.org/2000/svg",e),t=Xi(e("svg"),{width:"16",height:"17",viewBox:"0 0 16 17",fill:"inherit"}),n=Xi(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Xi(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Xi(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const i=e("defs"),s=Xi(e("clipPath"),{id:"clip0_57_156"}),a=Xi(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});s.appendChild(a);i.appendChild(s);t.appendChild(i).appendChild(s).appendChild(a);return t}function _a({open:e,onFormSubmitted:t,...n}){const r=n.options,o=na(()=>({__html:ya().outerHTML}),[]),[i,s]=Qs(null),a=ra(()=>{if(i){clearTimeout(i);s(null)}t()},[i]),c=ra((e,r)=>{n.onSubmitSuccess(e,r);s(setTimeout(()=>{t();s(null)},5e3))},[t]);return ys(vs,null,i?ys("div",{class:"success__position",onClick:a},ys("div",{class:"success__content"},r.successMessageText,ys("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):ys("dialog",{class:"dialog",onClick:r.onFormClose,open:e},ys("div",{class:"dialog__position"},ys("div",{class:"dialog__content",onClick:e=>{e.stopPropagation()}},ys(pa,{options:r}),ys(ma,{...n,onSubmitSuccess:c})))))}const va=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const o=r,i=e.useSentryUser,s=function(){const e=Ne().getUser(),t=Fe().getUser(),n=$e().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}(),a=Wi.createElement("div"),c=function(e){const t=Wi.createElement("style");t.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n\n\n.dialog__header {\n  display: flex;\n  gap: 4px;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n.dialog__title {\n  align-self: center;\n  width: var(--form-width, 272px);\n}\n\n@media (max-width: 600px) {\n  .dialog__title {\n    width: auto;\n  }\n}\n\n.dialog__position:has(.editor) .dialog__title {\n  width: auto;\n}\n\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form fieldset {\n  border: none;\n  margin: 0;\n  padding: 0;\n}\n\n.form__right {\n  flex: 0 0 auto;\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n  width: var(--form-width, 100%);\n}\n\n.dialog__position:has(.editor) .form__right {\n  width: var(--form-width, 272px);\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n";e&&t.setAttribute("nonce",e);return t}(e.styleNonce);let u="";const l={get el(){return a},appendToDom(){if(!o.contains(c)&&!o.contains(a)){o.appendChild(c);o.appendChild(a)}},removeFromDom(){a.remove();c.remove();Wi.body.style.overflow=u},open(){f(!0);e.onFormOpen?.();je()?.emit("openFeedbackWidget");u=Wi.body.style.overflow;Wi.body.style.overflow="hidden"},close(){f(!1);Wi.body.style.overflow=u}},d=t?.createInput({h:ys,hooks:da,dialog:l,options:e}),f=t=>{!function(e,t){var n,r,o;is.__&&is.__(e,t),n=t.__k,r=[],o=[],As(t,e=t.__k=ys(vs,null,[e]),n||ds,ds,void 0!==t.ownerSVGElement,n?null:t.firstChild?os.call(t.childNodes):null,r,n?n.__e:t.firstChild,!1,o),e.__d=void 0,Ps(r,e,o)}(ys(_a,{options:e,screenshotInput:d,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&s?.[i.name]||"",defaultEmail:i&&s?.[i.email]||"",onFormClose:()=>{f(!1);e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(t,n)=>{f(!1);e.onSubmitSuccess?.(t,n)},onSubmitError:t=>{e.onSubmitError?.(t)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:t}),a)};return l}});function ba(e){const t=Wi.createElement("style"),n="#1A141F",r="#302735";t.textContent=`\n.editor {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n}\n\n.editor__image-container {\n  justify-items: center;\n  padding: 15px;\n  position: relative;\n  height: 100%;\n  border-radius: var(--menu-border-radius, 6px);\n\n  background-color: ${n};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${n} 8px,\n      ${n} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${r} 15px,\n      ${r} 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container > * {\n  object-fit: contain;\n  position: absolute;\n}\n\n.editor__tool-container {\n  padding-top: 8px;\n  display: flex;\n  justify-content: center;\n}\n\n.editor__tool-bar {\n  display: flex;\n  gap: 8px;\n}\n\n.editor__tool {\n  display: flex;\n  padding: 8px 12px;\n  justify-content: center;\n  align-items: center;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  background: var(--button-background, var(--background));\n  color: var(--button-color, var(--foreground));\n}\n\n.editor__tool--active {\n  background: var(--button-primary-background, var(--accent-background));\n  color: var(--button-primary-color, var(--accent-foreground));\n}\n\n.editor__rect {\n  position: absolute;\n  z-index: 2;\n}\n\n.editor__rect button {\n  opacity: 0;\n  position: absolute;\n  top: -12px;\n  right: -12px;\n  cursor: pointer;\n  padding: 0;\n  z-index: 3;\n  border: none;\n  background: none;\n}\n\n.editor__rect:hover button {\n  opacity: 1;\n}\n`;e&&t.setAttribute("nonce",e);return t}function Sa({hooks:e}){return function({onBeforeScreenshot:t,onScreenshot:n,onAfterScreenshot:r,onError:o}){const i=function(){const[t,n]=e.useState(qi.devicePixelRatio??1);e.useEffect(()=>{const e=()=>{n(qi.devicePixelRatio)},t=matchMedia(`(resolution: ${qi.devicePixelRatio}dppx)`);t.addEventListener("change",e);return()=>{t.removeEventListener("change",e)}},[]);return t}();e.useEffect(()=>{(async()=>{t();const e=await Vi.mediaDevices.getDisplayMedia({video:{width:qi.innerWidth*i,height:qi.innerHeight*i},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),o=Wi.createElement("video");await new Promise((t,r)=>{o.srcObject=e;o.onloadedmetadata=()=>{n(o,i);e.getTracks().forEach(e=>e.stop());t()};o.play().catch(r)});r()})().catch(o)},[])}}function wa(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function ka(e,t){wa(e,{alpha:!0},(e,n)=>{n.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height)})}function Ea(e,t,n){wa(e,{alpha:!0},(e,r)=>{if(n.length){r.fillStyle="rgba(0, 0, 0, 0.25)";r.fillRect(0,0,e.width,e.height)}n.forEach(e=>{!function(e,t,n){switch(e.type){case"highlight":t.shadowColor="rgba(0, 0, 0, 0.7)";t.shadowBlur=50;t.fillStyle=n;t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2);t.clearRect(e.x,e.y,e.w,e.h);break;case"hide":t.fillStyle="rgb(0, 0, 0)";t.fillRect(e.x,e.y,e.w,e.h)}}(e,r,t)})})}function xa({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){const i=Sa({hooks:t}),s=function({h:e}){return function({action:t,setAction:n}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:"editor__tool "+("highlight"===t?"editor__tool--active":""),onClick:()=>{n("highlight"===t?"":"highlight")}},"Highlight"),e("button",{type:"button",class:"editor__tool "+("hide"===t?"editor__tool--active":""),onClick:()=>{n("hide"===t?"":"hide")}},"Hide")))}}({h:e}),a=function({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}({h:e}),c={__html:ba(o.styleNonce).innerText},u=r.el.style,l=({screenshot:r})=>{const[i,u]=t.useState("highlight"),[l,d]=t.useState([]),f=t.useRef(null),p=t.useRef(null),h=t.useRef(null),m=t.useRef(null),[g,y]=t.useState(1),_=t.useMemo(()=>{const e=Wi.getElementById(o.id);if(!e)return"white";const t=getComputedStyle(e);return t.getPropertyValue("--button-primary-background")||t.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{const e=()=>{const t=f.current;if(t){wa(r.canvas,{alpha:!1},e=>{const n=Math.min(t.clientWidth/e.width,t.clientHeight/e.height);y(n)});0!==t.clientHeight&&0!==t.clientWidth||setTimeout(e,0)}};e();qi.addEventListener("resize",e);return()=>{qi.removeEventListener("resize",e)}},[r]);const v=t.useCallback((e,t)=>{wa(e,{alpha:!0},(e,n)=>{n.scale(t,t);e.width=r.canvas.width;e.height=r.canvas.height})},[r]);t.useEffect(()=>{v(p.current,r.dpi);ka(p.current,r.canvas)},[r]);t.useEffect(()=>{v(h.current,r.dpi);wa(h.current,{alpha:!0},(e,t)=>{t.clearRect(0,0,e.width,e.height)});Ea(h.current,_,l)},[l,_]);t.useEffect(()=>{v(n,r.dpi);ka(n,r.canvas);wa(Wi.createElement("canvas"),{alpha:!0},(e,t)=>{t.scale(r.dpi,r.dpi);e.width=r.canvas.width;e.height=r.canvas.height;Ea(e,_,l);ka(n,e)})},[l,r,_]);const b=t.useCallback(e=>t=>{t.preventDefault();t.stopPropagation();d(t=>{const n=[...t];n.splice(e,1);return n})},[]),S={width:r.canvas.width*g+"px",height:r.canvas.height*g+"px"},w=e=>{e.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:f},e("canvas",{ref:p,id:"background",style:S}),e("canvas",{ref:h,id:"foreground",style:S}),e("div",{ref:m,onMouseDown:e=>{if(!i||!m.current)return;const t=m.current.getBoundingClientRect(),n={type:i,x:e.offsetX/g,y:e.offsetY/g},r=(e,n)=>{const r=(n.clientX-t.x)/g,o=(n.clientY-t.y)/g;return{type:e.type,x:Math.min(e.x,r),y:Math.min(e.y,o),w:Math.abs(r-e.x),h:Math.abs(o-e.y)}},o=e=>{wa(h.current,{alpha:!0},(e,t)=>{t.clearRect(0,0,e.width,e.height)});Ea(h.current,_,[...l,r(n,e)])},s=e=>{const t=r(n,e);t.w*g>=1&&t.h*g>=1&&d(e=>[...e,t]);Wi.removeEventListener("mousemove",o);Wi.removeEventListener("mouseup",s)};Wi.addEventListener("mousemove",o);Wi.addEventListener("mouseup",s)},style:S},l.map((t,n)=>e("div",{key:n,class:"editor__rect",style:{top:t.y*g+"px",left:t.x*g+"px",width:t.w*g+"px",height:t.h*g+"px"}},e("button",{"aria-label":"Remove",onClick:b(n),onMouseDown:w,onMouseUp:w,type:"button"},e(a,null))))))),e(s,{action:i,setAction:u}))};return function({onError:r}){const[o,s]=t.useState();i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((e,t)=>{wa(Wi.createElement("canvas"),{alpha:!1},(n,r)=>{r.scale(t,t);n.width=e.videoWidth;n.height=e.videoHeight;r.drawImage(e,0,0,n.width,n.height);s({canvas:n,dpi:t})});n.width=e.videoWidth;n.height=e.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(e=>{u.display="block";r(e)},[])});return o?e(l,{screenshot:o}):e("div",null)}}const Ca=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const o=Wi.createElement("canvas");return{input:xa({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{const e=await new Promise(e=>{o.toBlob(e,"image/png")});if(e){return{data:new Uint8Array(await e.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}});var Ta,Ia,Ma,Ra,Oa,La,Aa,Pa,Da,Na,Fa,$a,Ua,ja,Ba,Ha,za,qa,Wa,Va,Ga,Ja,Ka,Ya,Xa,Za,Qa,ec,tc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nc={};function rc(){if(Ia)return Ta;Ia=1;var e=function(e){return e&&e.Math===Math&&e};return Ta=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof tc&&tc)||e("object"==typeof Ta&&Ta)||function(){return this}()||Function("return this")()}function oc(){if(La)return Oa;La=1;var e="object"==typeof document&&document.all;return Oa=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(e){return"function"==typeof e}}function ic(){if(Pa)return Aa;Pa=1;var e=oc();return Aa=function(t){return"object"==typeof t?null!==t:e(t)}}function sc(){if(Na)return Da;Na=1;var e=rc(),t=ic(),n=e.document,r=t(n)&&t(n.createElement);return Da=function(e){return r?n.createElement(e):{}}}function ac(){if(ja)return Ua;ja=1;return Ua=function(e){try{return!!e()}catch(t){return!0}}}function cc(){if(Ha)return Ba;Ha=1;var e=ac();return Ba=!e(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})}function uc(){if(qa)return za;qa=1;var e=cc(),t=Function.prototype,n=t.call,r=e&&t.bind.bind(n,n);za=e?r:function(e){return function(){return n.apply(e,arguments)}};return za}function lc(){if(Va)return Wa;Va=1;var e=uc(),t=e({}.toString),n=e("".slice);return Wa=function(e){return n(t(e),8,-1)}}function dc(){if(Ja)return Ga;Ja=1;var e=uc(),t=ac(),n=lc(),r=Object,o=e("".split);return Ga=t(function(){return!r("z").propertyIsEnumerable(0)})?function(e){return"String"===n(e)?o(e,""):r(e)}:r}function fc(){if(Ya)return Ka;Ya=1;return Ka=function(e){return null==e}}function pc(){if(Za)return Xa;Za=1;var e=fc(),t=TypeError;return Xa=function(n){if(e(n))throw new t("Can't call method on "+n);return n}}function hc(){if(ec)return Qa;ec=1;var e=dc(),t=pc();return Qa=function(n){return e(t(n))}}var mc,gc,yc,_c,vc,bc,Sc,wc,kc,Ec,xc,Cc,Tc,Ic,Mc,Rc,Oc,Lc,Ac,Pc,Dc,Nc,Fc,$c,Uc,jc={exports:{}};function Bc(){if(gc)return mc;gc=1;return mc=!1}function Hc(){if(_c)return yc;_c=1;var e=rc(),t=Object.defineProperty;return yc=function(n,r){try{t(e,n,{value:r,configurable:!0,writable:!0})}catch(o){e[n]=r}return r}}function zc(){if(vc)return jc.exports;vc=1;var e=Bc(),t=rc(),n=Hc(),r="__core-js_shared__",o=jc.exports=t[r]||n(r,{});(o.versions||(o.versions=[])).push({version:"3.47.0",mode:e?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"});return jc.exports}function qc(){if(Sc)return bc;Sc=1;var e=zc();return bc=function(t,n){return e[t]||(e[t]=n||{})}}function Wc(){if(kc)return wc;kc=1;var e=pc(),t=Object;return wc=function(n){return t(e(n))}}function Vc(){if(xc)return Ec;xc=1;var e=uc(),t=Wc(),n=e({}.hasOwnProperty);return Ec=Object.hasOwn||function(e,r){return n(t(e),r)}}function Gc(){if(Tc)return Cc;Tc=1;var e=uc(),t=0,n=Math.random(),r=e(1.1.toString);return Cc=function(e){return"Symbol("+(void 0===e?"":e)+")_"+r(++t+n,36)}}function Jc(){if(Oc)return Rc;Oc=1;var e,t,n=rc(),r=function(){if(Mc)return Ic;Mc=1;var e=rc().navigator,t=e&&e.userAgent;return Ic=t?String(t):""}(),o=n.process,i=n.Deno,s=o&&o.versions||i&&i.version,a=s&&s.v8;a&&(t=(e=a.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1]));!t&&r&&(!(e=r.match(/Edge\/(\d+)/))||e[1]>=74)&&(e=r.match(/Chrome\/(\d+)/))&&(t=+e[1]);return Rc=t}function Kc(){if(Ac)return Lc;Ac=1;var e=Jc(),t=ac(),n=rc().String;return Lc=!!Object.getOwnPropertySymbols&&!t(function(){var t=Symbol("symbol detection");return!n(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41})}function Yc(){if(Dc)return Pc;Dc=1;var e=Kc();return Pc=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function Xc(){if(Fc)return Nc;Fc=1;var e=rc(),t=qc(),n=Vc(),r=Gc(),o=Kc(),i=Yc(),s=e.Symbol,a=t("wks"),c=i?s.for||s:s&&s.withoutSetter||r;return Nc=function(e){n(a,e)||(a[e]=o&&n(s,e)?s[e]:c("Symbol."+e));return a[e]}}function Zc(){if(Uc)return $c;Uc=1;var e=ic(),t=String,n=TypeError;return $c=function(r){if(e(r))return r;throw new n(t(r)+" is not an object")}}var Qc,eu,tu,nu,ru={};function ou(){if(eu)return Qc;eu=1;var e=ac();return Qc=!e(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})}function iu(){if(nu)return tu;nu=1;var e=ou(),t=ac();return tu=e&&t(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})}var su,au,cu,uu,lu,du,fu,pu,hu,mu,gu,yu,_u,vu,bu,Su,wu,ku,Eu,xu,Cu,Tu,Iu,Mu,Ru,Ou,Lu,Au,Pu,Du,Nu,Fu,$u,Uu,ju,Bu,Hu,zu,qu,Wu,Vu,Gu,Ju,Ku,Yu,Xu,Zu,Qu,el,tl,nl,rl,ol,il,sl,al,cl,ul,ll,dl,fl,pl,hl={};function ml(){if(au)return su;au=1;var e=ou(),t=ac(),n=sc();return su=!e&&!t(function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a})}function gl(){if(uu)return cu;uu=1;var e=cc(),t=Function.prototype.call;cu=e?t.bind(t):function(){return t.apply(t,arguments)};return cu}function yl(){if(du)return lu;du=1;var e=rc(),t=oc();lu=function(n,r){return arguments.length<2?(o=e[n],t(o)?o:void 0):e[n]&&e[n][r];var o};return lu}function _l(){if(pu)return fu;pu=1;var e=uc();return fu=e({}.isPrototypeOf)}function vl(){if(mu)return hu;mu=1;var e=yl(),t=oc(),n=_l(),r=Yc(),o=Object;return hu=r?function(e){return"symbol"==typeof e}:function(r){var i=e("Symbol");return t(i)&&n(i.prototype,o(r))}}function bl(){if(yu)return gu;yu=1;var e=String;return gu=function(t){try{return e(t)}catch(n){return"Object"}}}function Sl(){if(vu)return _u;vu=1;var e=oc(),t=bl(),n=TypeError;return _u=function(r){if(e(r))return r;throw new n(t(r)+" is not a function")}}function wl(){if(Su)return bu;Su=1;var e=Sl(),t=fc();bu=function(n,r){var o=n[r];return t(o)?void 0:e(o)};return bu}function kl(){if(ku)return wu;ku=1;var e=gl(),t=oc(),n=ic(),r=TypeError;return wu=function(o,i){var s,a;if("string"===i&&t(s=o.toString)&&!n(a=e(s,o)))return a;if(t(s=o.valueOf)&&!n(a=e(s,o)))return a;if("string"!==i&&t(s=o.toString)&&!n(a=e(s,o)))return a;throw new r("Can't convert object to primitive value")}}function El(){if(xu)return Eu;xu=1;var e=gl(),t=ic(),n=vl(),r=wl(),o=kl(),i=Xc(),s=TypeError,a=i("toPrimitive");return Eu=function(i,c){if(!t(i)||n(i))return i;var u,l=r(i,a);if(l){void 0===c&&(c="default");u=e(l,i,c);if(!t(u)||n(u))return u;throw new s("Can't convert object to primitive value")}void 0===c&&(c="number");return o(i,c)}}function xl(){if(Tu)return Cu;Tu=1;var e=El(),t=vl();return Cu=function(n){var r=e(n,"string");return t(r)?r:r+""}}function Cl(){if(Iu)return hl;Iu=1;var e=ou(),t=ml(),n=iu(),r=Zc(),o=xl(),i=TypeError,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c="enumerable",u="configurable",l="writable";hl.f=e?n?function(e,t,n){r(e);t=o(t);r(n);if("function"==typeof e&&"prototype"===t&&"value"in n&&l in n&&!n[l]){var i=a(e,t);if(i&&i[l]){e[t]=n.value;n={configurable:u in n?n[u]:i[u],enumerable:c in n?n[c]:i[c],writable:!1}}}return s(e,t,n)}:s:function(e,n,a){r(e);n=o(n);r(a);if(t)try{return s(e,n,a)}catch(c){}if("get"in a||"set"in a)throw new i("Accessors not supported");"value"in a&&(e[n]=a.value);return e};return hl}function Tl(){if(Lu)return Ou;Lu=1;var e=function(){if(Ru)return Mu;Ru=1;var e=Math.ceil,t=Math.floor;Mu=Math.trunc||function(n){var r=+n;return(r>0?t:e)(r)};return Mu}();return Ou=function(t){var n=+t;return n!=n||0===n?0:e(n)}}function Il(){if(Pu)return Au;Pu=1;var e=Tl(),t=Math.max,n=Math.min;return Au=function(r,o){var i=e(r);return i<0?t(i+o,0):n(i,o)}}function Ml(){if(Nu)return Du;Nu=1;var e=Tl(),t=Math.min;return Du=function(n){var r=e(n);return r>0?t(r,9007199254740991):0}}function Rl(){if($u)return Fu;$u=1;var e=Ml();return Fu=function(t){return e(t.length)}}function Ol(){if(Hu)return Bu;Hu=1;return Bu={}}function Ll(){if(qu)return zu;qu=1;var e=uc(),t=Vc(),n=hc(),r=function(){if(ju)return Uu;ju=1;var e=hc(),t=Il(),n=Rl(),r=function(r){return function(o,i,s){var a=e(o),c=n(a);if(0===c)return!r&&-1;var u,l=t(s,c);if(r&&i!=i){for(;c>l;)if((u=a[l++])!=u)return!0}else for(;c>l;l++)if((r||l in a)&&a[l]===i)return r||l||0;return!r&&-1}};return Uu={includes:r(!0),indexOf:r(!1)}}().indexOf,o=Ol(),i=e([].push);zu=function(e,s){var a,c=n(e),u=0,l=[];for(a in c)!t(o,a)&&t(c,a)&&i(l,a);for(;s.length>u;)t(c,a=s[u++])&&(~r(l,a)||i(l,a));return l};return zu}function Al(){if(Vu)return Wu;Vu=1;return Wu=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}function Pl(){if(Ju)return Gu;Ju=1;var e=Ll(),t=Al();Gu=Object.keys||function(n){return e(n,t)};return Gu}function Dl(){if(Xu)return Yu;Xu=1;var e=yl();return Yu=e("document","documentElement")}function Nl(){if(Qu)return Zu;Qu=1;var e=qc(),t=Gc(),n=e("keys");return Zu=function(e){return n[e]||(n[e]=t(e))}}function Fl(){if(tl)return el;tl=1;var e,t=Zc(),n=function(){if(Ku)return ru;Ku=1;var e=ou(),t=iu(),n=Cl(),r=Zc(),o=hc(),i=Pl();ru.f=e&&!t?Object.defineProperties:function(e,t){r(e);for(var s,a=o(t),c=i(t),u=c.length,l=0;u>l;)n.f(e,s=c[l++],a[s]);return e};return ru}(),r=Al(),o=Ol(),i=Dl(),s=sc(),a=Nl(),c="prototype",u="script",l=a("IE_PROTO"),d=function(){},f=function(e){return"<"+u+">"+e+"</"+u+">"},p=function(e){e.write(f(""));e.close();var t=e.parentWindow.Object;e=null;return t},h=function(){try{e=new ActiveXObject("htmlfile")}catch(n){}h="undefined"!=typeof document?document.domain&&e?p(e):function(){var e,t=s("iframe"),n="java"+u+":";t.style.display="none";i.appendChild(t);t.src=String(n);(e=t.contentWindow.document).open();e.write(f("document.F=Object"));e.close();return e.F}():p(e);for(var t=r.length;t--;)delete h[c][r[t]];return h()};o[l]=!0;el=Object.create||function(e,r){var o;if(null!==e){d[c]=t(e);o=new d;d[c]=null;o[l]=e}else o=h();return void 0===r?o:n.f(o,r)};return el}function $l(){if(rl)return nl;rl=1;var e=Xc(),t=Fl(),n=Cl().f,r=e("unscopables"),o=Array.prototype;void 0===o[r]&&n(o,r,{configurable:!0,value:t(null)});return nl=function(e){o[r][e]=!0}}function Ul(){if(il)return ol;il=1;return ol={}}function jl(){if(ul)return cl;ul=1;return cl=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}}function Bl(){if(dl)return ll;dl=1;var e=ou(),t=Cl(),n=jl();return ll=e?function(e,r,o){return t.f(e,r,n(1,o))}:function(e,t,n){e[t]=n;return e}}function Hl(){if(pl)return fl;pl=1;var e,t,n,r=function(){if(al)return sl;al=1;var e=rc(),t=oc(),n=e.WeakMap;return sl=t(n)&&/native code/.test(String(n))}(),o=rc(),i=ic(),s=Bl(),a=Vc(),c=zc(),u=Nl(),l=Ol(),d="Object already initialized",f=o.TypeError,p=o.WeakMap;if(r||c.state){var h=c.state||(c.state=new p);h.get=h.get;h.has=h.has;h.set=h.set;e=function(e,t){if(h.has(e))throw new f(d);t.facade=e;h.set(e,t);return t};t=function(e){return h.get(e)||{}};n=function(e){return h.has(e)}}else{var m=u("state");l[m]=!0;e=function(e,t){if(a(e,m))throw new f(d);t.facade=e;s(e,m,t);return t};t=function(e){return a(e,m)?e[m]:{}};n=function(e){return a(e,m)}}return fl={set:e,get:t,has:n,enforce:function(r){return n(r)?t(r):e(r,{})},getterFor:function(e){return function(n){var r;if(!i(n)||(r=t(n)).type!==e)throw new f("Incompatible receiver, "+e+" required");return r}}}}var zl,ql,Wl={},Vl={};function Gl(){if(zl)return Vl;zl=1;var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,n=t&&!e.call({1:2},1);Vl.f=n?function(e){var n=t(this,e);return!!n&&n.enumerable}:e;return Vl}function Jl(){if(ql)return Wl;ql=1;var e=ou(),t=gl(),n=Gl(),r=jl(),o=hc(),i=xl(),s=Vc(),a=ml(),c=Object.getOwnPropertyDescriptor;Wl.f=e?c:function(e,u){e=o(e);u=i(u);if(a)try{return c(e,u)}catch(l){}if(s(e,u))return r(!t(n.f,e,u),e[u])};return Wl}var Kl,Yl,Xl,Zl,Ql,ed,td,nd={exports:{}};function rd(){if(Yl)return Kl;Yl=1;var e=ou(),t=Vc(),n=Function.prototype,r=e&&Object.getOwnPropertyDescriptor,o=t(n,"name"),i=o&&"something"===function(){}.name,s=o&&(!e||e&&r(n,"name").configurable);return Kl={EXISTS:o,PROPER:i,CONFIGURABLE:s}}function od(){if(Zl)return Xl;Zl=1;var e=uc(),t=oc(),n=zc(),r=e(Function.toString);t(n.inspectSource)||(n.inspectSource=function(e){return r(e)});return Xl=n.inspectSource}function id(){if(Ql)return nd.exports;Ql=1;var e=uc(),t=ac(),n=oc(),r=Vc(),o=ou(),i=rd().CONFIGURABLE,s=od(),a=Hl(),c=a.enforce,u=a.get,l=String,d=Object.defineProperty,f=e("".slice),p=e("".replace),h=e([].join),m=o&&!t(function(){return 8!==d(function(){},"length",{value:8}).length}),g=String(String).split("String"),y=nd.exports=function(e,t,n){"Symbol("===f(l(t),0,7)&&(t="["+p(l(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]");n&&n.getter&&(t="get "+t);n&&n.setter&&(t="set "+t);(!r(e,"name")||i&&e.name!==t)&&(o?d(e,"name",{value:t,configurable:!0}):e.name=t);m&&n&&r(n,"arity")&&e.length!==n.arity&&d(e,"length",{value:n.arity});try{n&&r(n,"constructor")&&n.constructor?o&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(a){}var s=c(e);r(s,"source")||(s.source=h(g,"string"==typeof t?t:""));return e};Function.prototype.toString=y(function(){return n(this)&&u(this).source||s(this)},"toString");return nd.exports}function sd(){if(td)return ed;td=1;var e=oc(),t=Cl(),n=id(),r=Hc();ed=function(o,i,s,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:i;e(s)&&n(s,u,a);if(a.global)c?o[i]=s:r(i,s);else{try{a.unsafe?o[i]&&(c=!0):delete o[i]}catch(l){}c?o[i]=s:t.f(o,i,{value:s,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return o};return ed}var ad,cd={};var ud,ld,dd,fd,pd,hd,md,gd,yd,_d,vd,bd,Sd,wd,kd,Ed,xd,Cd,Td,Id,Md,Rd,Od,Ld,Ad,Pd,Dd,Nd,Fd,$d,Ud,jd,Bd,Hd,zd={};function qd(){if(ud)return zd;ud=1;zd.f=Object.getOwnPropertySymbols;return zd}function Wd(){if(dd)return ld;dd=1;var e=yl(),t=uc(),n=function(){if(ad)return cd;ad=1;var e=Ll(),t=Al().concat("length","prototype");cd.f=Object.getOwnPropertyNames||function(n){return e(n,t)};return cd}(),r=qd(),o=Zc(),i=t([].concat);ld=e("Reflect","ownKeys")||function(e){var t=n.f(o(e)),s=r.f;return s?i(t,s(e)):t};return ld}function Vd(){if(pd)return fd;pd=1;var e=Vc(),t=Wd(),n=Jl(),r=Cl();fd=function(o,i,s){for(var a=t(i),c=r.f,u=n.f,l=0;l<a.length;l++){var d=a[l];e(o,d)||s&&e(s,d)||c(o,d,u(i,d))}};return fd}function Gd(){if(yd)return gd;yd=1;var e=rc(),t=Jl().f,n=Bl(),r=sd(),o=Hc(),i=Vd(),s=function(){if(md)return hd;md=1;var e=ac(),t=oc(),n=/#|\.prototype\./,r=function(n,r){var c=i[o(n)];return c===a||c!==s&&(t(r)?e(r):!!r)},o=r.normalize=function(e){return String(e).replace(n,".").toLowerCase()},i=r.data={},s=r.NATIVE="N",a=r.POLYFILL="P";return hd=r}();return gd=function(a,c){var u,l,d,f,p,h=a.target,m=a.global,g=a.stat;if(u=m?e:g?e[h]||o(h,{}):e[h]&&e[h].prototype)for(l in c){f=c[l];d=a.dontCallGetSet?(p=t(u,l))&&p.value:u[l];if(!s(m?l:h+(g?".":"#")+l,a.forced)&&void 0!==d){if(typeof f==typeof d)continue;i(f,d)}(a.sham||d&&d.sham)&&n(f,"sham",!0);r(u,l,f,a)}}}function Jd(){if(Sd)return bd;Sd=1;var e=Vc(),t=oc(),n=Wc(),r=Nl(),o=function(){if(vd)return _d;vd=1;var e=ac();_d=!e(function(){function e(){}e.prototype.constructor=null;return Object.getPrototypeOf(new e)!==e.prototype});return _d}(),i=r("IE_PROTO"),s=Object,a=s.prototype;bd=o?s.getPrototypeOf:function(r){var o=n(r);if(e(o,i))return o[i];var c=o.constructor;return t(c)&&o instanceof c?c.prototype:o instanceof s?a:null};return bd}function Kd(){if(kd)return wd;kd=1;var e,t,n,r=ac(),o=oc(),i=ic(),s=Fl(),a=Jd(),c=sd(),u=Xc(),l=Bc(),d=u("iterator"),f=!1;[].keys&&("next"in(n=[].keys())?(t=a(a(n)))!==Object.prototype&&(e=t):f=!0);!i(e)||r(function(){var t={};return e[d].call(t)!==t})?e={}:l&&(e=s(e));o(e[d])||c(e,d,function(){return this});return wd={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:f}}function Yd(){if(xd)return Ed;xd=1;var e=Cl().f,t=Vc(),n=Xc()("toStringTag");return Ed=function(r,o,i){r&&!i&&(r=r.prototype);r&&!t(r,n)&&e(r,n,{configurable:!0,value:o})}}function Xd(){if(Td)return Cd;Td=1;var e=Kd().IteratorPrototype,t=Fl(),n=jl(),r=Yd(),o=Ul(),i=function(){return this};return Cd=function(s,a,c,u){var l=a+" Iterator";s.prototype=t(e,{next:n(+!u,c)});r(s,l,!1,!0);o[l]=i;return s}}function Zd(){if(Od)return Rd;Od=1;var e=ic();return Rd=function(t){return e(t)||null===t}}function Qd(){if(Ad)return Ld;Ad=1;var e=Zd(),t=String,n=TypeError;return Ld=function(r){if(e(r))return r;throw new n("Can't set "+t(r)+" as a prototype")}}function ef(){if(Dd)return Pd;Dd=1;var e=function(){if(Md)return Id;Md=1;var e=uc(),t=Sl();return Id=function(n,r,o){try{return e(t(Object.getOwnPropertyDescriptor(n,r)[o]))}catch(i){}}}(),t=ic(),n=pc(),r=Qd();Pd=Object.setPrototypeOf||("__proto__"in{}?function(){var o,i=!1,s={};try{(o=e(Object.prototype,"__proto__","set"))(s,[]);i=s instanceof Array}catch(a){}return function(e,s){n(e);r(s);if(!t(e))return e;i?o(e,s):e.__proto__=s;return e}}():void 0);return Pd}function tf(){if(Fd)return Nd;Fd=1;var e=Gd(),t=gl(),n=Bc(),r=rd(),o=oc(),i=Xd(),s=Jd(),a=ef(),c=Yd(),u=Bl(),l=sd(),d=Xc(),f=Ul(),p=Kd(),h=r.PROPER,m=r.CONFIGURABLE,g=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,_=d("iterator"),v="keys",b="values",S="entries",w=function(){return this};return Nd=function(r,d,p,k,E,x,C){i(p,d,k);var T,I,M,R=function(e){if(e===E&&D)return D;if(!y&&e&&e in A)return A[e];switch(e){case v:case b:case S:return function(){return new p(this,e)}}return function(){return new p(this)}},O=d+" Iterator",L=!1,A=r.prototype,P=A[_]||A["@@iterator"]||E&&A[E],D=!y&&P||R(E),N="Array"===d&&A.entries||P;if(N&&(T=s(N.call(new r)))!==Object.prototype&&T.next){n||s(T)===g||(a?a(T,g):o(T[_])||l(T,_,w));c(T,O,!0,!0);n&&(f[O]=w)}if(h&&E===b&&P&&P.name!==b)if(!n&&m)u(A,"name",b);else{L=!0;D=function(){return t(P,this)}}if(E){I={values:R(b),keys:x?D:R(v),entries:R(S)};if(C)for(M in I)(y||L||!(M in A))&&l(A,M,I[M]);else e({target:d,proto:!0,forced:y||L},I)}n&&!C||A[_]===D||l(A,_,D,{name:E});f[d]=D;return I}}function nf(){if(Ud)return $d;Ud=1;return $d=function(e,t){return{value:e,done:t}}}function rf(){if(Bd)return jd;Bd=1;var e=hc(),t=$l(),n=Ul(),r=Hl(),o=Cl().f,i=tf(),s=nf(),a=Bc(),c=ou(),u="Array Iterator",l=r.set,d=r.getterFor(u);jd=i(Array,"Array",function(t,n){l(this,{type:u,target:e(t),index:0,kind:n})},function(){var e=d(this),t=e.target,n=e.index++;if(!t||n>=t.length){e.target=null;return s(void 0,!0)}switch(e.kind){case"keys":return s(n,!1);case"values":return s(t[n],!1)}return s([n,t[n]],!1)},"values");var f=n.Arguments=n.Array;t("keys");t("values");t("entries");if(!a&&c&&"values"!==f.name)try{o(f,"name",{value:"values"})}catch(p){}return jd}!function(){if(Hd)return nc;Hd=1;var e=rc(),t=function(){if(Ra)return Ma;Ra=1;return Ma={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}(),n=function(){if($a)return Fa;$a=1;var e=sc()("span").classList,t=e&&e.constructor&&e.constructor.prototype;return Fa=t===Object.prototype?void 0:t}(),r=rf(),o=Bl(),i=Yd(),s=Xc()("iterator"),a=r.values,c=function(e,n){if(e){if(e[s]!==a)try{o(e,s,a)}catch(u){e[s]=a}i(e,n,!0);if(t[n])for(var c in r)if(e[c]!==r[c])try{o(e,c,r[c])}catch(u){e[c]=r[c]}}};for(var u in t)c(e[u]&&e[u].prototype,u);c(n,"DOMTokenList")}();var of,sf,af,cf,uf,lf,df,ff,pf,hf,mf,gf,yf,_f,vf,bf,Sf,wf,kf,Ef,xf,Cf,Tf,If,Mf,Rf,Of,Lf,Af,Pf,Df,Nf,Ff,$f,Uf,jf,Bf,Hf,zf,qf,Wf,Vf,Gf,Jf={},Kf={},Yf={};function Xf(){if(cf)return af;cf=1;var e=function(){if(sf)return of;sf=1;var e={};e[Xc()("toStringTag")]="z";return of="[object z]"===String(e)}(),t=oc(),n=lc(),r=Xc()("toStringTag"),o=Object,i="Arguments"===n(function(){return arguments}());af=e?n:function(e){var s,a,c;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=function(e,t){try{return e[t]}catch(n){}}(s=o(e),r))?a:i?n(s):"Object"===(c=n(s))&&t(s.callee)?"Arguments":c};return af}function Zf(){if(lf)return uf;lf=1;var e=Xf(),t=String;return uf=function(n){if("Symbol"===e(n))throw new TypeError("Cannot convert a Symbol value to a string");return t(n)}}function Qf(){if(ff)return df;ff=1;var e=uc(),t=Tl(),n=Zf(),r=pc(),o=e("".charAt),i=e("".charCodeAt),s=e("".slice),a=function(e){return function(a,c){var u,l,d=n(r(a)),f=t(c),p=d.length;return f<0||f>=p?e?"":void 0:(u=i(d,f))<55296||u>56319||f+1===p||(l=i(d,f+1))<56320||l>57343?e?o(d,f):u:e?s(d,f,f+2):l-56320+(u-55296<<10)+65536}};return df={codeAt:a(!1),charAt:a(!0)}}function ep(){if(mf)return hf;mf=1;var e=ac(),t=Xc(),n=ou(),r=Bc(),o=t("iterator");return hf=!e(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),s="";e.pathname="c%20d";t.forEach(function(e,n){t.delete("b");s+=n+e});i.delete("a",2);i.delete("b",void 0);return r&&(!e.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b"))||!t.size&&(r||!n)||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://").host||"#%D0%B1"!==new URL("https://a#").hash||"a1c3"!==s||"x"!==new URL("https://x",void 0).host})}function tp(){if(vf)return _f;vf=1;var e=function(){if(yf)return gf;yf=1;var e=lc(),t=uc();return gf=function(n){if("Function"===e(n))return t(n)}}(),t=Sl(),n=cc(),r=e(e.bind);_f=function(e,o){t(e);return void 0===o?e:n?r(e,o):function(){return e.apply(o,arguments)}};return _f}function np(){if(Sf)return bf;Sf=1;var e=id(),t=Cl();return bf=function(n,r,o){o.get&&e(o.get,r,{getter:!0});o.set&&e(o.set,r,{setter:!0});return t.f(n,r,o)}}function rp(){if(kf)return wf;kf=1;var e=_l(),t=TypeError;return wf=function(n,r){if(e(r,n))return n;throw new t("Incorrect invocation")}}function op(){if(Tf)return Cf;Tf=1;var e=gl(),t=Zc(),n=wl();Cf=function(r,o,i){var s,a;t(r);try{if(!(s=n(r,"return"))){if("throw"===o)throw i;return i}s=e(s,r)}catch(c){a=!0;s=c}if("throw"===o)throw i;if(a)throw s;t(s);return i};return Cf}function ip(){if(Mf)return If;Mf=1;var e=Zc(),t=op();If=function(n,r,o,i){try{return i?r(e(o)[0],o[1]):r(o)}catch(s){t(n,"throw",s)}};return If}function sp(){if(Of)return Rf;Of=1;var e=Xc(),t=Ul(),n=e("iterator"),r=Array.prototype;return Rf=function(e){return void 0!==e&&(t.Array===e||r[n]===e)}}function ap(){if(Af)return Lf;Af=1;var e=uc(),t=ac(),n=oc(),r=Xf(),o=yl(),i=od(),s=function(){},a=o("Reflect","construct"),c=/^\s*(?:class|function)\b/,u=e(c.exec),l=!c.test(s),d=function(e){if(!n(e))return!1;try{a(s,[],e);return!0}catch(t){return!1}},f=function(e){if(!n(e))return!1;switch(r(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return l||!!u(c,i(e))}catch(t){return!0}};f.sham=!0;return Lf=!a||t(function(){var e;return d(d.call)||!d(Object)||!d(function(){e=!0})||e})?f:d}function cp(){if(Df)return Pf;Df=1;var e=ou(),t=Cl(),n=jl();return Pf=function(r,o,i){e?t.f(r,o,n(0,i)):r[o]=i}}function up(){if(Ff)return Nf;Ff=1;var e=Xf(),t=wl(),n=fc(),r=Ul(),o=Xc()("iterator");return Nf=function(i){if(!n(i))return t(i,o)||t(i,"@@iterator")||r[e(i)]}}function lp(){if(Uf)return $f;Uf=1;var e=gl(),t=Sl(),n=Zc(),r=bl(),o=up(),i=TypeError;$f=function(s,a){var c=arguments.length<2?o(s):a;if(t(c))return n(e(c,s));throw new i(r(s)+" is not iterable")};return $f}function dp(){if(Bf)return jf;Bf=1;var e=tp(),t=gl(),n=Wc(),r=ip(),o=sp(),i=ap(),s=Rl(),a=cp(),c=lp(),u=up(),l=Array;jf=function(d){var f=n(d),p=i(this),h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m;g&&(m=e(m,h>2?arguments[2]:void 0));var y,_,v,b,S,w,k=u(f),E=0;if(!k||this===l&&o(k)){y=s(f);_=p?new this(y):l(y);for(;y>E;E++){w=g?m(f[E],E):f[E];a(_,E,w)}}else{_=p?new this:[];S=(b=c(f,k)).next;for(;!(v=t(S,b)).done;E++){w=g?r(b,m,[v.value,E],!0):v.value;a(_,E,w)}}_.length=E;return _};return jf}function fp(){if(zf)return Hf;zf=1;var e=uc();return Hf=e([].slice)}function pp(){if(Wf)return qf;Wf=1;var e=uc(),t=2147483647,n=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",i=RangeError,s=e(r.exec),a=Math.floor,c=String.fromCharCode,u=e("".charCodeAt),l=e([].join),d=e([].push),f=e("".replace),p=e("".split),h=e("".toLowerCase),m=function(e){return e+22+75*(e<26)},g=function(e,t,n){var r=0;e=n?a(e/700):e>>1;e+=a(e/t);for(;e>455;){e=a(e/35);r+=36}return a(r+36*e/(e+38))},y=function(e){var n=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=u(e,n++);if(o>=55296&&o<=56319&&n<r){var i=u(e,n++);if(56320==(64512&i))d(t,((1023&o)<<10)+(1023&i)+65536);else{d(t,o);n--}}else d(t,o)}return t}(e);var r,s,f=e.length,p=128,h=0,y=72;for(r=0;r<e.length;r++)(s=e[r])<128&&d(n,c(s));var _=n.length,v=_;_&&d(n,"-");for(;v<f;){var b=t;for(r=0;r<e.length;r++)(s=e[r])>=p&&s<b&&(b=s);var S=v+1;if(b-p>a((t-h)/S))throw new i(o);h+=(b-p)*S;p=b;for(r=0;r<e.length;r++){if((s=e[r])<p&&++h>t)throw new i(o);if(s===p){for(var w=h,k=36;;){var E=k<=y?1:k>=y+26?26:k-y;if(w<E)break;var x=w-E,C=36-E;d(n,c(m(E+x%C)));w=a(x/C);k+=36}d(n,c(m(w)));y=g(h,S,v===_);h=0;v++}}h++;p++}return l(n,"")};qf=function(e){var t,o,i=[],a=p(f(h(e),r,"."),".");for(t=0;t<a.length;t++){o=a[t];d(i,s(n,o)?"xn--"+y(o):o)}return l(i,".")};return qf}function hp(){if(Gf)return Vf;Gf=1;var e=TypeError;return Vf=function(t,n){if(t<n)throw new e("Not enough arguments");return t}}var mp,gp,yp,_p,vp,bp,Sp,wp,kp,Ep,xp,Cp={};function Tp(){if(yp)return gp;yp=1;var e=rc(),t=ou(),n=Object.getOwnPropertyDescriptor;return gp=function(r){if(!t)return e[r];var o=n(e,r);return o&&o.value}}function Ip(){if(vp)return _p;vp=1;var e=sd();return _p=function(t,n,r){for(var o in n)e(t,o,n[o],r);return t}}function Mp(){if(Sp)return bp;Sp=1;var e=fp(),t=Math.floor,n=function(r,o){var i=r.length;if(i<8)for(var s,a,c=1;c<i;){a=c;s=r[c];for(;a&&o(r[a-1],s)>0;)r[a]=r[--a];a!==c++&&(r[a]=s)}else for(var u=t(i/2),l=n(e(r,0,u),o),d=n(e(r,u),o),f=l.length,p=d.length,h=0,m=0;h<f||m<p;)r[h+m]=h<f&&m<p?o(l[h],d[m])<=0?l[h++]:d[m++]:h<f?l[h++]:d[m++];return r};return bp=n}function Rp(){if(kp)return wp;kp=1;rf();!function(){if(mp)return Cp;mp=1;var e=Gd(),t=uc(),n=Il(),r=RangeError,o=String.fromCharCode,i=String.fromCodePoint,s=t([].join);e({target:"String",stat:!0,arity:1,forced:!!i&&1!==i.length},{fromCodePoint:function(e){for(var t,i=[],a=arguments.length,c=0;a>c;){t=+arguments[c++];if(n(t,1114111)!==t)throw new r(t+" is not a valid code point");i[c]=t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320)}return s(i,"")}})}();var e=Gd(),t=rc(),n=Tp(),r=yl(),o=gl(),i=uc(),s=ou(),a=ep(),c=sd(),u=np(),l=Ip(),d=Yd(),f=Xd(),p=Hl(),h=rp(),m=oc(),g=Vc(),y=tp(),_=Xf(),v=Zc(),b=ic(),S=Zf(),w=Fl(),k=jl(),E=lp(),x=up(),C=nf(),T=hp(),I=Xc(),M=Mp(),R=I("iterator"),O="URLSearchParams",L=O+"Iterator",A=p.set,P=p.getterFor(O),D=p.getterFor(L),N=n("fetch"),F=n("Request"),$=n("Headers"),U=F&&F.prototype,j=$&&$.prototype,B=t.TypeError,H=t.encodeURIComponent,z=String.fromCharCode,q=r("String","fromCodePoint"),W=parseInt,V=i("".charAt),G=i([].join),J=i([].push),K=i("".replace),Y=i([].shift),X=i([].splice),Z=i("".split),Q=i("".slice),ee=i(/./.exec),te=/\+/g,ne=/^[0-9a-f]+$/i,re=function(e,t){var n=Q(e,t,t+2);return ee(ne,n)?W(n,16):NaN},oe=function(e){for(var t=0,n=128;n>0&&0!==(e&n);n>>=1)t++;return t},ie=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},se=function(e){for(var t=(e=K(e,te," ")).length,n="",r=0;r<t;){var o=V(e,r);if("%"===o){if("%"===V(e,r+1)||r+3>t){n+="%";r++;continue}var i=re(e,r+1);if(i!=i){n+=o;r++;continue}r+=2;var s=oe(i);if(0===s)o=z(i);else{if(1===s||s>4){n+="";r++;continue}for(var a=[i],c=1;c<s&&!(++r+3>t||"%"!==V(e,r));){var u=re(e,r+1);if(u!=u){r+=3;break}if(u>191||u<128)break;J(a,u);r+=2;c++}if(a.length!==s){n+="";continue}var l=ie(a);null===l?n+="":o=q(l)}}n+=o;r++}return n},ae=/[!'()~]|%20/g,ce={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ue=function(e){return ce[e]},le=function(e){return K(H(e),ae,ue)},de=f(function(e,t){A(this,{type:L,target:P(e).entries,index:0,kind:t})},O,function(){var e=D(this),t=e.target,n=e.index++;if(!t||n>=t.length){e.target=null;return C(void 0,!0)}var r=t[n];switch(e.kind){case"keys":return C(r.key,!1);case"values":return C(r.value,!1)}return C([r.key,r.value],!1)},!0),fe=function(e){this.entries=[];this.url=null;void 0!==e&&(b(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===V(e,0)?Q(e,1):e:S(e)))};fe.prototype={type:O,bindURL:function(e){this.url=e;this.update()},parseObject:function(e){var t,n,r,i,s,a,c,u=this.entries,l=x(e);if(l){n=(t=E(e,l)).next;for(;!(r=o(n,t)).done;){s=(i=E(v(r.value))).next;if((a=o(s,i)).done||(c=o(s,i)).done||!o(s,i).done)throw new B("Expected sequence with length 2");J(u,{key:S(a.value),value:S(c.value)})}}else for(var d in e)g(e,d)&&J(u,{key:d,value:S(e[d])})},parseQuery:function(e){if(e)for(var t,n,r=this.entries,o=Z(e,"&"),i=0;i<o.length;)if((t=o[i++]).length){n=Z(t,"=");J(r,{key:se(Y(n)),value:se(G(n,"="))})}},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;){e=t[r++];J(n,le(e.key)+"="+le(e.value))}return G(n,"&")},update:function(){this.entries.length=0;this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var pe=function(){h(this,he);var e=A(this,new fe(arguments.length>0?arguments[0]:void 0));s||(this.size=e.entries.length)},he=pe.prototype;l(he,{append:function(e,t){var n=P(this);T(arguments.length,2);J(n.entries,{key:S(e),value:S(t)});s||this.size++;n.updateURL()},delete:function(e){for(var t=P(this),n=T(arguments.length,1),r=t.entries,o=S(e),i=n<2?void 0:arguments[1],a=void 0===i?i:S(i),c=0;c<r.length;){var u=r[c];if(u.key!==o||void 0!==a&&u.value!==a)c++;else{X(r,c,1);if(void 0!==a)break}}s||(this.size=r.length);t.updateURL()},get:function(e){var t=P(this).entries;T(arguments.length,1);for(var n=S(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=P(this).entries;T(arguments.length,1);for(var n=S(e),r=[],o=0;o<t.length;o++)t[o].key===n&&J(r,t[o].value);return r},has:function(e){for(var t=P(this).entries,n=T(arguments.length,1),r=S(e),o=n<2?void 0:arguments[1],i=void 0===o?o:S(o),s=0;s<t.length;){var a=t[s++];if(a.key===r&&(void 0===i||a.value===i))return!0}return!1},set:function(e,t){var n=P(this);T(arguments.length,1);for(var r,o=n.entries,i=!1,a=S(e),c=S(t),u=0;u<o.length;u++)if((r=o[u]).key===a)if(i)X(o,u--,1);else{i=!0;r.value=c}i||J(o,{key:a,value:c});s||(this.size=o.length);n.updateURL()},sort:function(){var e=P(this);M(e.entries,function(e,t){return e.key>t.key?1:-1});e.updateURL()},forEach:function(e){for(var t,n=P(this).entries,r=y(e,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new de(this,"keys")},values:function(){return new de(this,"values")},entries:function(){return new de(this,"entries")}},{enumerable:!0});c(he,R,he.entries,{name:"entries"});c(he,"toString",function(){return P(this).serialize()},{enumerable:!0});s&&u(he,"size",{get:function(){return P(this).entries.length},configurable:!0,enumerable:!0});d(pe,O);e({global:!0,constructor:!0,forced:!a},{URLSearchParams:pe});if(!a&&m($)){var me=i(j.has),ge=i(j.set),ye=function(e){if(b(e)){var t,n=e.body;if(_(n)===O){t=e.headers?new $(e.headers):new $;me(t,"content-type")||ge(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8");return w(e,{body:k(0,S(n)),headers:k(0,t)})}}return e};m(N)&&e({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return N(e,arguments.length>1?ye(arguments[1]):{})}});if(m(F)){var _e=function(e){h(this,U);return new F(e,arguments.length>1?ye(arguments[1]):{})};U.constructor=_e;_e.prototype=U;e({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:_e})}}return wp={URLSearchParams:pe,getState:P}}function Op(){if(Ep)return Kf;Ep=1;!function(){if(pf)return Yf;pf=1;var e=Qf().charAt,t=Zf(),n=Hl(),r=tf(),o=nf(),i="String Iterator",s=n.set,a=n.getterFor(i);r(String,"String",function(e){s(this,{type:i,string:t(e),index:0})},function(){var t,n=a(this),r=n.string,i=n.index;if(i>=r.length)return o(void 0,!0);t=e(r,i);n.index+=t.length;return o(t,!1)})}();var e,t=Gd(),n=ou(),r=ep(),o=rc(),i=tp(),s=uc(),a=sd(),c=np(),u=rp(),l=Vc(),d=function(){if(xf)return Ef;xf=1;var e=ou(),t=uc(),n=gl(),r=ac(),o=Pl(),i=qd(),s=Gl(),a=Wc(),c=dc(),u=Object.assign,l=Object.defineProperty,d=t([].concat);Ef=!u||r(function(){if(e&&1!==u({b:1},u(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},n={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";t[r]=7;i.split("").forEach(function(e){n[e]=e});return 7!==u({},t)[r]||o(u({},n)).join("")!==i})?function(t,r){for(var u=a(t),l=arguments.length,f=1,p=i.f,h=s.f;l>f;)for(var m,g=c(arguments[f++]),y=p?d(o(g),p(g)):o(g),_=y.length,v=0;_>v;){m=y[v++];e&&!n(h,g,m)||(u[m]=g[m])}return u}:u;return Ef}(),f=dp(),p=fp(),h=Qf().codeAt,m=pp(),g=Zf(),y=Yd(),_=hp(),v=Rp(),b=Hl(),S=b.set,w=b.getterFor("URL"),k=v.URLSearchParams,E=v.getState,x=o.URL,C=o.TypeError,T=o.parseInt,I=Math.floor,M=Math.pow,R=s("".charAt),O=s(/./.exec),L=s([].join),A=s(1.1.toString),P=s([].pop),D=s([].push),N=s("".replace),F=s([].shift),$=s("".split),U=s("".slice),j=s("".toLowerCase),B=s([].unshift),H="Invalid scheme",z="Invalid host",q="Invalid port",W=/[a-z]/i,V=/[\d+-.a-z]/i,G=/\d/,J=/^0x/i,K=/^[0-7]+$/,Y=/^\d+$/,X=/^[\da-f]+$/i,Z=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Q=/[\0\t\n\r #/:<>?@[\\\]^|]/,ee=/^[\u0000-\u0020]+/,te=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ne=/[\t\n\r]/g,re=function(e){var t,n,r,o;if("number"==typeof e){t=[];for(n=0;n<4;n++){B(t,e%256);e=I(e/256)}return L(t,".")}if("object"==typeof e){t="";r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)if(0!==e[i]){if(o>n){t=r;n=o}r=null;o=0}else{null===r&&(r=i);++o}return o>n?r:t}(e);for(n=0;n<8;n++)if(!o||0!==e[n]){o&&(o=!1);if(r===n){t+=n?":":"::";o=!0}else{t+=A(e[n],16);n<7&&(t+=":")}}return"["+t+"]"}return e},oe={},ie=d({},oe,{" ":1,'"':1,"<":1,">":1,"`":1}),se=d({},ie,{"#":1,"?":1,"{":1,"}":1}),ae=d({},se,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ce=function(e,t){var n=h(e,0);return n>32&&n<127&&!l(t,e)?e:encodeURIComponent(e)},ue={ftp:21,file:null,http:80,https:443,ws:80,wss:443},le=function(e,t){var n;return 2===e.length&&O(W,R(e,0))&&(":"===(n=R(e,1))||!t&&"|"===n)},de=function(e){var t;return e.length>1&&le(U(e,0,2))&&(2===e.length||"/"===(t=R(e,2))||"\\"===t||"?"===t||"#"===t)},fe=function(e){return"."===e||"%2e"===j(e)},pe=function(e){return".."===(e=j(e))||"%2e."===e||".%2e"===e||"%2e%2e"===e},he={},me={},ge={},ye={},_e={},ve={},be={},Se={},we={},ke={},Ee={},xe={},Ce={},Te={},Ie={},Me={},Re={},Oe={},Le={},Ae={},Pe={},De=function(e,t,n){var r,o,i,s=g(e);if(t){if(o=this.parse(s))throw new C(o);this.searchParams=null}else{void 0!==n&&(r=new De(n,!0));if(o=this.parse(s,null,r))throw new C(o);(i=E(new k)).bindURL(this);this.searchParams=i}};De.prototype={type:"URL",parse:function(t,n,r){var o,i,s,a,c=this,u=n||he,d=0,h="",m=!1,y=!1,_=!1;t=g(t);if(!n){c.scheme="";c.username="";c.password="";c.host=null;c.port=null;c.path=[];c.query=null;c.fragment=null;c.cannotBeABaseURL=!1;t=N(t,ee,"");t=N(t,te,"$1")}t=N(t,ne,"");o=f(t);for(;d<=o.length;){i=o[d];switch(u){case he:if(!i||!O(W,i)){if(n)return H;u=ge;continue}h+=j(i);u=me;break;case me:if(i&&(O(V,i)||"+"===i||"-"===i||"."===i))h+=j(i);else{if(":"!==i){if(n)return H;h="";u=ge;d=0;continue}if(n&&(c.isSpecial()!==l(ue,h)||"file"===h&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;c.scheme=h;if(n){c.isSpecial()&&ue[c.scheme]===c.port&&(c.port=null);return}h="";if("file"===c.scheme)u=Te;else if(c.isSpecial()&&r&&r.scheme===c.scheme)u=ye;else if(c.isSpecial())u=Se;else if("/"===o[d+1]){u=_e;d++}else{c.cannotBeABaseURL=!0;D(c.path,"");u=Le}}break;case ge:if(!r||r.cannotBeABaseURL&&"#"!==i)return H;if(r.cannotBeABaseURL&&"#"===i){c.scheme=r.scheme;c.path=p(r.path);c.query=r.query;c.fragment="";c.cannotBeABaseURL=!0;u=Pe;break}u="file"===r.scheme?Te:ve;continue;case ye:if("/"!==i||"/"!==o[d+1]){u=ve;continue}u=we;d++;break;case _e:if("/"===i){u=ke;break}u=Oe;continue;case ve:c.scheme=r.scheme;if(i===e){c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;c.path=p(r.path);c.query=r.query}else if("/"===i||"\\"===i&&c.isSpecial())u=be;else if("?"===i){c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;c.path=p(r.path);c.query="";u=Ae}else{if("#"!==i){c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;c.path=p(r.path);c.path.length--;u=Oe;continue}c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;c.path=p(r.path);c.query=r.query;c.fragment="";u=Pe}break;case be:if(!c.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;u=Oe;continue}u=ke}else u=we;break;case Se:u=we;if("/"!==i||"/"!==R(h,d+1))continue;d++;break;case we:if("/"!==i&&"\\"!==i){u=ke;continue}break;case ke:if("@"===i){m&&(h="%40"+h);m=!0;s=f(h);for(var v=0;v<s.length;v++){var b=s[v];if(":"!==b||_){var S=ce(b,ae);_?c.password+=S:c.username+=S}else _=!0}h=""}else if(i===e||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(m&&""===h)return"Invalid authority";d-=f(h).length+1;h="";u=Ee}else h+=i;break;case Ee:case xe:if(n&&"file"===c.scheme){u=Me;continue}if(":"!==i||y){if(i===e||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(c.isSpecial()&&""===h)return z;if(n&&""===h&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(h))return a;h="";u=Re;if(n)return;continue}"["===i?y=!0:"]"===i&&(y=!1);h+=i}else{if(""===h)return z;if(a=c.parseHost(h))return a;h="";u=Ce;if(n===xe)return}break;case Ce:if(!O(G,i)){if(i===e||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()||n){if(""!==h){var w=T(h,10);if(w>65535)return q;c.port=c.isSpecial()&&w===ue[c.scheme]?null:w;h=""}if(n)return;u=Re;continue}return q}h+=i;break;case Te:c.scheme="file";if("/"===i||"\\"===i)u=Ie;else{if(!r||"file"!==r.scheme){u=Oe;continue}switch(i){case e:c.host=r.host;c.path=p(r.path);c.query=r.query;break;case"?":c.host=r.host;c.path=p(r.path);c.query="";u=Ae;break;case"#":c.host=r.host;c.path=p(r.path);c.query=r.query;c.fragment="";u=Pe;break;default:if(!de(L(p(o,d),""))){c.host=r.host;c.path=p(r.path);c.shortenPath()}u=Oe;continue}}break;case Ie:if("/"===i||"\\"===i){u=Me;break}r&&"file"===r.scheme&&!de(L(p(o,d),""))&&(le(r.path[0],!0)?D(c.path,r.path[0]):c.host=r.host);u=Oe;continue;case Me:if(i===e||"/"===i||"\\"===i||"?"===i||"#"===i){if(!n&&le(h))u=Oe;else if(""===h){c.host="";if(n)return;u=Re}else{if(a=c.parseHost(h))return a;"localhost"===c.host&&(c.host="");if(n)return;h="";u=Re}continue}h+=i;break;case Re:if(c.isSpecial()){u=Oe;if("/"!==i&&"\\"!==i)continue}else if(n||"?"!==i)if(n||"#"!==i){if(i!==e){u=Oe;if("/"!==i)continue}}else{c.fragment="";u=Pe}else{c.query="";u=Ae}break;case Oe:if(i===e||"/"===i||"\\"===i&&c.isSpecial()||!n&&("?"===i||"#"===i)){if(pe(h)){c.shortenPath();"/"===i||"\\"===i&&c.isSpecial()||D(c.path,"")}else if(fe(h))"/"===i||"\\"===i&&c.isSpecial()||D(c.path,"");else{if("file"===c.scheme&&!c.path.length&&le(h)){c.host&&(c.host="");h=R(h,0)+":"}D(c.path,h)}h="";if("file"===c.scheme&&(i===e||"?"===i||"#"===i))for(;c.path.length>1&&""===c.path[0];)F(c.path);if("?"===i){c.query="";u=Ae}else if("#"===i){c.fragment="";u=Pe}}else h+=ce(i,se);break;case Le:if("?"===i){c.query="";u=Ae}else if("#"===i){c.fragment="";u=Pe}else i!==e&&(c.path[0]+=ce(i,oe));break;case Ae:if(n||"#"!==i)i!==e&&("'"===i&&c.isSpecial()?c.query+="%27":c.query+="#"===i?"%23":ce(i,oe));else{c.fragment="";u=Pe}break;case Pe:i!==e&&(c.fragment+=ce(i,ie))}d++}},parseHost:function(e){var t,n,r;if("["===R(e,0)){if("]"!==R(e,e.length-1))return z;t=function(e){var t,n,r,o,i,s,a,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,f=function(){return R(e,d)};if(":"===f()){if(":"!==R(e,1))return;d+=2;l=++u}for(;f();){if(8===u)return;if(":"!==f()){t=n=0;for(;n<4&&O(X,f());){t=16*t+T(f(),16);d++;n++}if("."===f()){if(0===n)return;d-=n;if(u>6)return;r=0;for(;f();){o=null;if(r>0){if(!("."===f()&&r<4))return;d++}if(!O(G,f()))return;for(;O(G,f());){i=T(f(),10);if(null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;d++}c[u]=256*c[u]+o;2!==++r&&4!==r||u++}if(4!==r)return;break}if(":"===f()){d++;if(!f())return}else if(f())return;c[u++]=t}else{if(null!==l)return;d++;l=++u}}if(null!==l){s=u-l;u=7;for(;0!==u&&s>0;){a=c[u];c[u--]=c[l+s-1];c[l+--s]=a}}else if(8!==u)return;return c}(U(e,1,-1));if(!t)return z;this.host=t}else if(this.isSpecial()){e=m(e);if(O(Z,e))return z;t=function(e){var t,n,r,o,i,s,a,c=$(e,".");c.length&&""===c[c.length-1]&&c.length--;if((t=c.length)>4)return e;n=[];for(r=0;r<t;r++){if(""===(o=c[r]))return e;i=10;if(o.length>1&&"0"===R(o,0)){i=O(J,o)?16:8;o=U(o,8===i?1:2)}if(""===o)s=0;else{if(!O(10===i?Y:8===i?K:X,o))return e;s=T(o,i)}D(n,s)}for(r=0;r<t;r++){s=n[r];if(r===t-1){if(s>=M(256,5-t))return null}else if(s>255)return null}a=P(n);for(r=0;r<n.length;r++)a+=n[r]*M(256,3-r);return a}(e);if(null===t)return z;this.host=t}else{if(O(Q,e))return z;t="";n=f(e);for(r=0;r<n.length;r++)t+=ce(n[r],oe);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return l(ue,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&le(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,s=e.path,a=e.query,c=e.fragment,u=t+":";if(null!==o){u+="//";e.includesCredentials()&&(u+=n+(r?":"+r:"")+"@");u+=re(o);null!==i&&(u+=":"+i)}else"file"===t&&(u+="//");u+=e.cannotBeABaseURL?s[0]:s.length?"/"+L(s,"/"):"";null!==a&&(u+="?"+a);null!==c&&(u+="#"+c);return u},setHref:function(e){var t=this.parse(e);if(t)throw new C(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Ne(e.path[0]).origin}catch(n){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+re(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(g(e)+":",he)},getUsername:function(){return this.username},setUsername:function(e){var t=f(g(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ce(t[n],ae)}},getPassword:function(){return this.password},setPassword:function(e){var t=f(g(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ce(t[n],ae)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?re(e):re(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ee)},getHostname:function(){var e=this.host;return null===e?"":re(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,xe)},getPort:function(){var e=this.port;return null===e?"":g(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=g(e))?this.port=null:this.parse(e,Ce))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+L(e,"/"):""},setPathname:function(e){if(!this.cannotBeABaseURL){this.path=[];this.parse(e,Re)}},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){if(""===(e=g(e)))this.query=null;else{"?"===R(e,0)&&(e=U(e,1));this.query="";this.parse(e,Ae)}this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(""!==(e=g(e))){"#"===R(e,0)&&(e=U(e,1));this.fragment="";this.parse(e,Pe)}else this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ne=function(e){var t=u(this,Fe),r=_(arguments.length,1)>1?arguments[1]:void 0,o=S(t,new De(e,!1,r));if(!n){t.href=o.serialize();t.origin=o.getOrigin();t.protocol=o.getProtocol();t.username=o.getUsername();t.password=o.getPassword();t.host=o.getHost();t.hostname=o.getHostname();t.port=o.getPort();t.pathname=o.getPathname();t.search=o.getSearch();t.searchParams=o.getSearchParams();t.hash=o.getHash()}},Fe=Ne.prototype,$e=function(e,t){return{get:function(){return w(this)[e]()},set:t&&function(e){return w(this)[t](e)},configurable:!0,enumerable:!0}};if(n){c(Fe,"href",$e("serialize","setHref"));c(Fe,"origin",$e("getOrigin"));c(Fe,"protocol",$e("getProtocol","setProtocol"));c(Fe,"username",$e("getUsername","setUsername"));c(Fe,"password",$e("getPassword","setPassword"));c(Fe,"host",$e("getHost","setHost"));c(Fe,"hostname",$e("getHostname","setHostname"));c(Fe,"port",$e("getPort","setPort"));c(Fe,"pathname",$e("getPathname","setPathname"));c(Fe,"search",$e("getSearch","setSearch"));c(Fe,"searchParams",$e("getSearchParams"));c(Fe,"hash",$e("getHash","setHash"))}a(Fe,"toJSON",function(){return w(this).serialize()},{enumerable:!0});a(Fe,"toString",function(){return w(this).serialize()},{enumerable:!0});if(x){var Ue=x.createObjectURL,je=x.revokeObjectURL;Ue&&a(Ne,"createObjectURL",i(Ue,x));je&&a(Ne,"revokeObjectURL",i(je,x))}y(Ne,"URL");t({global:!0,constructor:!0,forced:!r,sham:!n},{URL:Ne});return Kf}!function(){if(xp)return Jf;xp=1;Op()}();var Lp,Ap={};!function(){if(Lp)return Ap;Lp=1;var e=Gd(),t=gl();e({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return t(URL.prototype.toString,this)}})}();var Pp,Dp={};!function(){if(Pp)return Dp;Pp=1;Rp()}();const Np=n;let Fp=0;function $p(){return Fp>0}function Up(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!function(e){return"function"==typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(se(e))return e}catch{return e}const n=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];try{const n=r.map(e=>Up(e,t));return e.apply(this,n)}catch(i){!function(){Fp++;setTimeout(()=>{Fp--})}();Ue(e=>{e.addEventProcessor(e=>{if(t.mechanism){pe(e,void 0,void 0);he(e,t.mechanism)}e.extra={...e.extra,arguments:r};return e});Wn(i)});throw i}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch{}ie(n,e);oe(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch{}return n}function jp(){const e=Y(),{referrer:t}=Np.document||{},{userAgent:n}=Np.navigator||{};return{url:e,headers:{...t&&{Referer:t},...n&&{"User-Agent":n}}}}const Bp={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},Hp=Np;async function zp(e,t){const n=Bp[e],o=Hp.Sentry=Hp.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const i=o[e];if("function"==typeof i&&!("_isShim"in i))return i;const s=function(e){var t;const n=je(),o=(null==n||null===(t=n.getOptions())||void 0===t?void 0:t.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL(`/${r}/${e}.min.js`,o).toString()}(n),a=Np.document.createElement("script");a.src=s;a.crossOrigin="anonymous";a.referrerPolicy="strict-origin";t&&a.setAttribute("nonce",t);const c=new Promise((e,t)=>{a.addEventListener("load",()=>e());a.addEventListener("error",t)}),u=Np.document.currentScript,l=Np.document.body||Np.document.head||(null==u?void 0:u.parentElement);if(!l)throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);l.appendChild(a);try{await c}catch{throw new Error(`Error when loading integration: ${e}`)}const d=o[e];if("function"!=typeof d)throw new Error(`Could not load integration: ${e}`);return d}const qp=rs({lazyLoadIntegration:zp}),Wp=rs({getModalIntegration:()=>va,getScreenshotIntegration:()=>Ca});function Vp(e,t,n,r){Er({level:e,message:t,attributes:n,severityNumber:r})}var Gp=Object.freeze({__proto__:null,debug:function(e,t){Vp("debug",e,t)},error:function(e,t){Vp("error",e,t)},fatal:function(e,t){Vp("fatal",e,t)},fmt:Br,info:function(e,t){Vp("info",e,t)},trace:function(e,t){Vp("trace",e,t)},warn:function(e,t){Vp("warn",e,t)}});function Jp(e,t){const n=Xp(e,t),r={type:eh(t),value:th(t)};n.length&&(r.stacktrace={frames:n});void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught");return r}function Kp(e,t,n,r){const o=je(),i=null==o?void 0:o.getOptions().normalizeDepth,s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),a={__serialized__:Xt(t,i)};if(s)return{exception:{values:[Jp(e,s)]},extra:a};const c={exception:{values:[{type:H(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:sh(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=Xp(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function Yp(e,t){return{exception:{values:[Jp(e,t)]}}}function Xp(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&Zp.test(e.message))return 1;return 0}(t),o=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,o)}catch{}return[]}const Zp=/Minified React error #\d+;/i;function Qp(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function eh(e){const t=null==e?void 0:e.name;if(!t&&Qp(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function th(e){const t=null==e?void 0:e.message;return Qp(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function nh(e,t,n,r){const o=oh(e,t,(null==n?void 0:n.syntheticException)||void 0,r);he(o);o.level="error";null!=n&&n.event_id&&(o.event_id=n.event_id);return On(o)}function rh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const i=ih(e,t,(null==r?void 0:r.syntheticException)||void 0,o);i.level=n;null!=r&&r.event_id&&(i.event_id=r.event_id);return On(i)}function oh(e,t,n,r,o){let i;if(N(t)&&t.error){return Yp(e,t.error)}if(F(t)||D(t,"DOMException")){const o=t;if("stack"in t)i=Yp(e,t);else{const t=o.name||(F(o)?"DOMError":"DOMException"),s=o.message?`${t}: ${o.message}`:t;i=ih(e,s,n,r);pe(i,s)}"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`});return i}if(P(t))return Yp(e,t);if(B(t)||H(t)){i=Kp(e,t,n,o);he(i,{synthetic:!0});return i}i=ih(e,t,n,r);pe(i,`${t}`,void 0);he(i,{synthetic:!0});return i}function ih(e,t,n,r){const o={};if(r&&n){const r=Xp(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]});he(o,{synthetic:!0})}if(U(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;o.logentry={message:e,params:n};return o}o.message=t;return o}function sh(e,t){let{isUnhandledRejection:n}=t;const r=function(e,t=40){const n=Object.keys(ae(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return Z(r,t);for(let o=n.length;o>0;o--){const e=n.slice(0,o).join(", ");if(!(e.length>t))return o===n.length?e:Z(e,t)}return""}(e),o=n?"promise rejection":"exception";if(N(e))return`Event \`ErrorEvent\` captured as ${o} with message \`${e.message}\``;if(H(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e)}\` (type=${e.type}) captured as ${o}`}return`Object captured as ${o} with keys: ${r}`}class ah extends _r{constructor(e){const t=(n=e,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:null===(o=Np.SENTRY_RELEASE)||void 0===o?void 0:o.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...n});var n,o;!function(e,t,n=[t],o="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(e=>({name:`${o}:@sentry/${e}`,version:r})),version:r});e._metadata=i}(t,"browser",["browser"],Np.SENTRY_SDK_SOURCE||"npm");super(t);const{sendDefaultPii:i,sendClientReports:s,enableLogs:a,_experiments:c}=this._options,u=null!=a?a:null==c?void 0:c.enableLogs;Np.document&&(s||u)&&Np.document.addEventListener("visibilitychange",()=>{if("hidden"===Np.document.visibilityState){s&&this._flushOutcomes();u&&xr(this)}});if(u){this.on("flush",()=>{xr(this)});this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout);this._logFlushIdleTimeout=setTimeout(()=>{xr(this)},5e3)})}if(i){this.on("postprocessEvent",Hr);this.on("beforeSendSession",zr)}}eventFromException(e,t){return nh(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2?arguments[2]:void 0;return rh(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){e.platform=e.platform||"javascript";return super._prepareEvent(e,t,n,r)}}const ch="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,uh=n,lh=(e,t,n,r)=>{let o,i;return s=>{if(t.value>=0&&(s||r)){i=t.value-(o??0);if(i||void 0===o){o=t.value;t.delta=i;t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n);e(t)}}}},dh=(e=!0)=>{const t=uh.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},fh=()=>{const e=dh();return e?.activationStart??0},ph=(e,t=-1)=>{const n=dh();let r="navigate";n&&(uh.document?.prerendering||fh()>0?r="prerender":uh.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-")));return{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},hh=new WeakMap;function mh(e,t){hh.get(e)||hh.set(e,new t);return hh.get(e)}class gh{constructor(){gh.prototype.__init.call(this);gh.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){if(e.hadRecentInput)return;const t=this._sessionEntries[0],n=this._sessionEntries[this._sessionEntries.length-1];if(this._sessionValue&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3){this._sessionValue+=e.value;this._sessionEntries.push(e)}else{this._sessionValue=e.value;this._sessionEntries=[e]}this._onAfterProcessingUnexpectedShift?.(e)}}const yh=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});r.observe({type:e,buffered:!0,...n});return r}}catch{}},_h=e=>{let t=!1;return()=>{if(!t){e();t=!0}}};let vh=-1;const bh=e=>{if("hidden"===uh.document.visibilityState&&vh>-1){vh="visibilitychange"===e.type?e.timeStamp:0;Sh()}},Sh=()=>{removeEventListener("visibilitychange",bh,!0);removeEventListener("prerenderingchange",bh,!0)},wh=()=>{if(uh.document&&vh<0){const e=fh(),t=uh.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(t=>"hidden"===t.name&&t.startTime>e)[0]?.startTime;vh=t??("hidden"!==uh.document?.visibilityState||uh.document?.prerendering?1/0:0);(()=>{addEventListener("visibilitychange",bh,!0);addEventListener("prerenderingchange",bh,!0)})()}return{get firstHiddenTime(){return vh}}},kh=e=>{uh.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},Eh=[1800,3e3],xh=[.1,.25],Ch=(e,t={})=>{((e,t={})=>{kh(()=>{const n=wh(),r=ph("FCP");let o;const i=yh("paint",e=>{for(const t of e)if("first-contentful-paint"===t.name){i.disconnect();if(t.startTime<n.firstHiddenTime){r.value=Math.max(t.startTime-fh(),0);r.entries.push(t);o(!0)}}});i&&(o=lh(e,r,Eh,t.reportAllChanges))})})(_h(()=>{const n=ph("CLS",0);let r;const o=mh(t,gh),i=e=>{for(const t of e)o._processEntry(t);if(o._sessionValue>n.value){n.value=o._sessionValue;n.entries=o._sessionEntries;r()}},s=yh("layout-shift",i);if(s){r=lh(e,n,xh,t.reportAllChanges);uh.document?.addEventListener("visibilitychange",()=>{if("hidden"===uh.document?.visibilityState){i(s.takeRecords());r(!0)}});uh?.setTimeout?.(r)}}))},Th=e=>{const t=t=>{"pagehide"!==t.type&&"hidden"!==uh.document?.visibilityState||e(t)};if(uh.document){addEventListener("visibilitychange",t,!0);addEventListener("pagehide",t,!0)}},Ih=[100,300];let Mh=0,Rh=1/0,Oh=0;const Lh=e=>{e.forEach(e=>{if(e.interactionId){Rh=Math.min(Rh,e.interactionId);Oh=Math.max(Oh,e.interactionId);Mh=Oh?(Oh-Rh)/7+1:0}})};let Ah;const Ph=()=>Ah?Mh:performance.interactionCount||0,Dh=()=>{"interactionCount"in performance||Ah||(Ah=yh("event",Lh,{type:"event",buffered:!0,durationThreshold:0}))};let Nh=0;class Fh{constructor(){Fh.prototype.__init.call(this);Fh.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Nh=Ph();this._longestInteractionList.length=0;this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor((Ph()-Nh)/50));return this._longestInteractionList[e]}_processEntry(e){this._onBeforeProcessingEntry?.(e);if(!e.interactionId&&"first-input"!==e.entryType)return;const t=this._longestInteractionList.at(-1);let n=this._longestInteractionMap.get(e.interactionId);if(n||this._longestInteractionList.length<10||e.duration>t._latency){if(n)if(e.duration>n._latency){n.entries=[e];n._latency=e.duration}else e.duration===n._latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{n={id:e.interactionId,entries:[e],_latency:e.duration};this._longestInteractionMap.set(n.id,n);this._longestInteractionList.push(n)}this._longestInteractionList.sort((e,t)=>t._latency-e._latency);if(this._longestInteractionList.length>10){const e=this._longestInteractionList.splice(10);for(const t of e)this._longestInteractionMap.delete(t.id)}this._onAfterProcessingINPCandidate?.(n)}}}const $h=e=>{const t=uh.requestIdleCallback||uh.setTimeout;if("hidden"===uh.document?.visibilityState)e();else{t(e=_h(e));Th(e)}},Uh=[200,500];class jh{_processEntry(e){this._onBeforeProcessingEntry?.(e)}}const Bh=[2500,4e3],Hh=[800,1800],zh=e=>{uh.document?.prerendering?kh(()=>zh(e)):"complete"!==uh.document?.readyState?addEventListener("load",()=>zh(e),!0):setTimeout(e)},qh={},Wh={};let Vh,Gh,Jh,Kh,Yh;function Xh(e,t=!1){return cm("cls",e,rm,Vh,t)}function Zh(e,t=!1){return cm("lcp",e,im,Jh,t)}function Qh(e){return cm("fid",e,om,Gh)}function em(e){return cm("inp",e,am,Yh)}function tm(e,t){um(e,t);if(!Wh[e]){!function(e){const t={};"event"===e&&(t.durationThreshold=0);yh(e,t=>{nm(e,{entries:t})},t)}(e);Wh[e]=!0}return lm(e,t)}function nm(e,t){const n=qh[e];if(n?.length)for(const o of n)try{o(t)}catch(r){ch&&p.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${b(o)}\nError:`,r)}}function rm(){return Ch(e=>{nm("cls",{metric:e});Vh=e},{reportAllChanges:!0})}function om(){return((e,t={})=>{kh(()=>{const n=wh(),r=ph("FID");let o;const i=e=>{if(e.startTime<n.firstHiddenTime){r.value=e.processingStart-e.startTime;r.entries.push(e);o(!0)}},s=e=>{e.forEach(i)},a=yh("first-input",s);o=lh(e,r,Ih,t.reportAllChanges);a&&Th(_h(()=>{s(a.takeRecords());a.disconnect()}))})})(e=>{nm("fid",{metric:e});Gh=e})}function im(){return((e,t={})=>{kh(()=>{const n=wh(),r=ph("LCP");let o;const i=mh(t,jh),s=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e){i._processEntry(t);if(t.startTime<n.firstHiddenTime){r.value=Math.max(t.startTime-fh(),0);r.entries=[t];o()}}},a=yh("largest-contentful-paint",s);if(a){o=lh(e,r,Bh,t.reportAllChanges);const n=_h(()=>{s(a.takeRecords());a.disconnect();o(!0)});for(const e of["keydown","click","visibilitychange"])uh.document&&addEventListener(e,()=>$h(n),{capture:!0,once:!0})}})})(e=>{nm("lcp",{metric:e});Jh=e},{reportAllChanges:!0})}function sm(){return((e,t={})=>{const n=ph("TTFB"),r=lh(e,n,Hh,t.reportAllChanges);zh(()=>{const e=dh();if(e){n.value=Math.max(e.responseStart-fh(),0);n.entries=[e];r(!0)}})})(e=>{nm("ttfb",{metric:e});Kh=e})}function am(){return((e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&kh(()=>{Dh();const n=ph("INP");let r;const o=mh(t,Fh),i=e=>{$h(()=>{for(const n of e)o._processEntry(n);const t=o._estimateP98LongestInteraction();if(t&&t._latency!==n.value){n.value=t._latency;n.entries=t.entries;r()}})},s=yh("event",i,{durationThreshold:t.durationThreshold??40});r=lh(e,n,Uh,t.reportAllChanges);if(s){s.observe({type:"first-input",buffered:!0});Th(()=>{i(s.takeRecords());r(!0)})}})})(e=>{nm("inp",{metric:e});Yh=e})}function cm(e,t,n,r,o=!1){um(e,t);let i;if(!Wh[e]){i=n();Wh[e]=!0}r&&t({metric:r});return lm(e,t,o?i:void 0)}function um(e,t){qh[e]=qh[e]||[];qh[e].push(t)}function lm(e,t,n){return()=>{n&&n();const r=qh[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function dm(e){return"number"==typeof e&&isFinite(e)}function fm(e,t,n,{...r}){const o=kt(e).start_timestamp;o&&o>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t);return wn(e,()=>{const e=Sn({startTime:t,...r});e&&e.end(n);return e})}function pm(e){const t=je();if(!t)return;const{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a,sendDefaultPii:c}=t.getOptions(),u=t.getIntegrationByName("Replay"),l=u?.getReplayId(),d=Ne(),f=d.getUser(),p=void 0!==f?f.email||f.id||f.ip_address:void 0;let h;try{h=d.getScopeData().contexts.profile.profile_id}catch{}return Sn({name:n,attributes:{release:s,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:l||void 0,transaction:r,"user_agent.original":uh.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o},startTime:i,experimental:{standalone:!0}})}function hm(){return uh.addEventListener&&uh.performance}function mm(e){return e/1e3}function gm(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r;n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}function ym(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function _m(e,t){let n,r=!1;function o(e){!r&&n&&t(e,n);r=!0}Th(()=>{o("pagehide")});const i=e.on("beforeStartNavigationSpan",(e,t)=>{if(!t?.isRedirect){o("navigation");i?.();s?.()}}),s=e.on("afterStartPageLoadSpan",e=>{n=e.spanContext().spanId;s?.()})}function vm(e){let t,n=0;if(!ym("layout-shift"))return;const r=Xh(({metric:e})=>{const r=e.entries[e.entries.length-1];if(r){n=e.value;t=r}},!0);_m(e,(e,o)=>{!function(e,t,n,r){ch&&p.log(`Sending CLS span (${e})`);const o=mm((be()||0)+(t?.startTime||0)),i=Ne().getScopeData().transactionName,s=t?J(t.sources[0]?.node):"Layout shift",a={[Ve]:"auto.http.browser.cls",[We]:"ui.webvital.cls",[Ze]:t?.duration||0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((e,t)=>{a[`cls.source.${t+1}`]=J(e.node)});const c=pm({name:s,transaction:i,attributes:a,startTime:o});if(c){c.addEvent("cls",{[Je]:"",[Ke]:e});c.end(o)}}(n,t,o,e);r()})}function bm(e){let t,n=0;if(!ym("largest-contentful-paint"))return;const r=Zh(({metric:e})=>{const r=e.entries[e.entries.length-1];if(r){n=e.value;t=r}},!0);_m(e,(e,o)=>{!function(e,t,n,r){ch&&p.log(`Sending LCP span (${e})`);const o=mm((be()||0)+(t?.startTime||0)),i=Ne().getScopeData().transactionName,s=t?J(t.element):"Largest contentful paint",a={[Ve]:"auto.http.browser.lcp",[We]:"ui.webvital.lcp",[Ze]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};if(t){t.element&&(a["lcp.element"]=J(t.element));t.id&&(a["lcp.id"]=t.id);t.url&&(a["lcp.url"]=t.url.trim().slice(0,200));null!=t.loadTime&&(a["lcp.loadTime"]=t.loadTime);null!=t.renderTime&&(a["lcp.renderTime"]=t.renderTime);null!=t.size&&(a["lcp.size"]=t.size)}const c=pm({name:s,transaction:i,attributes:a,startTime:o});if(c){c.addEvent("lcp",{[Je]:"millisecond",[Ke]:e});c.end(o)}}(n,t,o,e);r()})}let Sm,wm,km=0,Em={};function xm({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=hm();if(r&&be()){r.mark&&uh.performance.mark("sentry-tracing-init");const o=Qh(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=mm(be()),r=mm(t.startTime);Em.fid={value:e.value,unit:"millisecond"};Em["mark.fid"]={value:n+r,unit:"second"}}),i=t?bm(n):Zh(({metric:e})=>{const t=e.entries[e.entries.length-1];if(t){Em.lcp={value:e.value,unit:"millisecond"};Sm=t}},!0),s=cm("ttfb",({metric:e})=>{e.entries[e.entries.length-1]&&(Em.ttfb={value:e.value,unit:"millisecond"})},sm,Kh),a=e?vm(n):Xh(({metric:e})=>{const t=e.entries[e.entries.length-1];if(t){Em.cls={value:e.value,unit:""};wm=t}},!0);return()=>{o();i?.();s();a?.()}}return()=>{}}function Cm(e,t){const n=hm(),r=be();if(!n?.getEntries||!r)return;const o=mm(r),i=n.getEntries(),{op:s,start_timestamp:a}=kt(e);i.slice(km).forEach(n=>{const r=mm(n.startTime),i=mm(Math.max(0,n.duration));if(!("navigation"===s&&a&&o+r<a))switch(n.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Tm(e,t,r,n)});Tm(e,t,"secureConnection",n,"TLS/SSL");Tm(e,t,"fetch",n,"cache");Tm(e,t,"domainLookup",n,"DNS");!function(e,t,n){const r=n+mm(t.requestStart),o=n+mm(t.responseEnd),i=n+mm(t.responseStart);if(t.responseEnd){fm(e,r,o,{op:"browser.request",name:t.name,attributes:{[Ve]:"auto.ui.browser.metrics"}});fm(e,i,o,{op:"browser.response",name:t.name,attributes:{[Ve]:"auto.ui.browser.metrics"}})}}(e,t,n)}(e,n,o);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o,i){if(["mark","measure"].includes(t.entryType)&&ne(t.name,i))return;const s=dh(!1),a=mm(s?s.requestStart:0),c=o+Math.max(n,a),u=o+n,l=u+r,d={[Ve]:"auto.resource.browser.metrics"};if(c!==u){d["sentry.browser.measure_happened_before_request"]=!0;d["sentry.browser.measure_start_time"]=c}!function(e,t){try{const n=t.detail;if(!n)return;if("object"==typeof n){for(const[t,r]of Object.entries(n))if(r&&j(r))e[`sentry.browser.measure.detail.${t}`]=r;else if(void 0!==r)try{e[`sentry.browser.measure.detail.${t}`]=JSON.stringify(r)}catch{}return}if(j(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}(d,t);c<=l&&fm(e,c,l,{name:t.name,op:t.entryType,attributes:d})}(e,n,r,i,o,t.ignorePerformanceApiSpans);const s=wh(),a=n.startTime<s.firstHiddenTime;"first-paint"===n.name&&a&&(Em.fp={value:n.startTime,unit:"millisecond"});"first-contentful-paint"===n.name&&a&&(Em.fcp={value:n.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,i,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(s?.includes(a))return;const c=Qo(n),u={[Ve]:"auto.resource.browser.metrics"};Im(u,t,"transferSize","http.response_transfer_size");Im(u,t,"encodedBodySize","http.response_content_length");Im(u,t,"decodedBodySize","http.decoded_response_content_length");const l=t.deliveryType;null!=l&&(u["http.response_delivery_type"]=l);const d=t.renderBlockingStatus;d&&(u["resource.render_blocking_status"]=d);c.protocol&&(u["url.scheme"]=c.protocol.split(":").pop());c.host&&(u["server.address"]=c.host);u["url.same_origin"]=n.includes(uh.location.origin);if(null!=t.nextHopProtocol){const{name:e,version:n}=gm(t.nextHopProtocol);u["network.protocol.name"]=e;u["network.protocol.version"]=n}const f=i+r,p=f+o;fm(e,f,p,{name:n.replace(uh.location.origin,""),op:a,attributes:u})}(e,n,n.name,r,i,o,t.ignoreResourceSpans)}});km=Math.max(i.length-1,0);!function(e){const t=uh.navigator;if(!t)return;const n=t.connection;if(n){n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType);n.type&&e.setAttribute("connectionType",n.type);dm(n.rtt)&&(Em["connection.rtt"]={value:n.rtt,unit:"millisecond"})}dm(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);dm(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e);if("pageload"===s){!function(e){const t=dh(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Em);const n=Em["mark.fid"];if(n&&Em.fid){fm(e,n.value,n.value+mm(Em.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Ve]:"auto.ui.browser.metrics"}});delete Em["mark.fid"]}t.recordClsOnPageloadSpan||delete Em.cls;t.recordLcpOnPageloadSpan||delete Em.lcp;Object.entries(Em).forEach(([e,t])=>{pn(e,t.value,t.unit)});e.setAttribute("performance.timeOrigin",o);e.setAttribute("performance.activationStart",fh());!function(e,t){if(Sm&&t.recordLcpOnPageloadSpan){Sm.element&&e.setAttribute("lcp.element",J(Sm.element));Sm.id&&e.setAttribute("lcp.id",Sm.id);Sm.url&&e.setAttribute("lcp.url",Sm.url.trim().slice(0,200));null!=Sm.loadTime&&e.setAttribute("lcp.loadTime",Sm.loadTime);null!=Sm.renderTime&&e.setAttribute("lcp.renderTime",Sm.renderTime);e.setAttribute("lcp.size",Sm.size)}wm?.sources&&t.recordClsOnPageloadSpan&&wm.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,J(t.node)))}(e,t)}Sm=void 0;wm=void 0;Em={}}function Tm(e,t,n,r,o=n){const i=function(e){if("secureConnection"===e)return"connectEnd";if("fetch"===e)return"domainLookupStart";return`${e}End`}(n),s=t[i],a=t[`${n}Start`];a&&s&&fm(e,r+mm(a),r+mm(s),{op:`browser.${o}`,name:t.name,attributes:{[Ve]:"auto.ui.browser.metrics",..."redirect"===n&&null!=t.redirectCount?{"http.redirect_count":t.redirectCount}:{}}})}function Im(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}const Mm=({entries:e})=>{const t=Ot(),n=t?Rt(t):void 0,r=n?kt(n).description:Ne().getScopeData().transactionName;e.forEach(e=>{const t=e;if(!t.identifier)return;const n=t.name,o=t.renderTime,i=t.loadTime,[s,a]=i?[mm(i),"load-time"]:o?[mm(o),"render-time"]:[ve(),"entry-emission"],c="image-paint"===n?mm(Math.max(0,(o??0)-(i??0))):0,u={[Ve]:"auto.ui.browser.elementtiming",[We]:"ui.elementtiming",[He]:"component","sentry.span_start_time_source":a,"sentry.transaction_name":r,"element.id":t.id,"element.type":t.element?.tagName?.toLowerCase()||"unknown","element.size":t.naturalWidth&&t.naturalHeight?`${t.naturalWidth}x${t.naturalHeight}`:void 0,"element.render_time":o,"element.load_time":i,"element.url":t.url||void 0,"element.identifier":t.identifier,"element.paint_type":n};bn({name:`element[${t.identifier}]`,attributes:u,startTime:s,onlyIfParent:!0},e=>{e.end(s+c)})})};let Rm,Om,Lm,Am;function Pm(e){E("dom",e);x("dom",Dm)}function Dm(){if(!uh.document)return;const e=C.bind(null,"dom"),t=Nm(e,!0);uh.document.addEventListener("click",t,!1);uh.document.addEventListener("keypress",t,!1);["EventTarget","Node"].forEach(t=>{const n=uh,r=n[t]?.prototype;if(r?.hasOwnProperty?.("addEventListener")){re(r,"addEventListener",function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},i=r[n]=r[n]||{refCount:0};if(!i.handler){const r=Nm(e);i.handler=r;t.call(this,n,r,o)}i.refCount++}catch{}return t.call(this,n,r,o)}});re(r,"removeEventListener",function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},o=n[t];if(o){o.refCount--;if(o.refCount<=0){e.call(this,t,o.handler,r);o.handler=void 0;delete n[t]}0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__}}catch{}return e.call(this,t,n,r)}})}})}function Nm(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch{return null}}(n);if(function(e,t){return"keypress"===e&&(!t?.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;oe(n,"_sentryCaptured",!0);r&&!r._sentryId&&oe(r,"_sentryId",le());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Om)return!1;try{if(!e.target||e.target._sentryId!==Lm)return!1}catch{}return!0}(n)){e({event:n,name:o,global:t});Om=n.type;Lm=r?r._sentryId:void 0}clearTimeout(Rm);Rm=uh.setTimeout(()=>{Lm=void 0;Om=void 0},1e3)}}function Fm(e){const t="history";E(t,e);x(t,$m)}function $m(){uh.addEventListener("popstate",()=>{const e=uh.location.href,t=Am;Am=e;if(t===e)return;C("history",{from:t,to:e})});if("history"in ui&&ui.history){re(uh.history,"pushState",e);re(uh.history,"replaceState",e)}function e(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const r=Am,o=function(e){try{return new URL(e,uh.location.origin).toString()}catch{return e}}(String(n));Am=o;if(r===o)return e.apply(this,t);C("history",{from:r,to:o})}return e.apply(this,t)}}}const Um={};function jm(e){const t=Um[e];if(t)return t;let n=uh[e];if(li(n))return Um[e]=n.bind(uh);const r=uh.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0;r.head.appendChild(t);const o=t.contentWindow;o?.[e]&&(n=o[e]);r.head.removeChild(t)}catch(o){ch&&p.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n?Um[e]=n.bind(uh):n}function Bm(e){Um[e]=void 0}function Hm(...e){return jm("setTimeout")(...e)}const zm="__sentry_xhr_v3__";function qm(e){E("xhr",e);x("xhr",Wm)}function Wm(){if(!uh.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=new Error,o=1e3*ve(),i=$(n[0])?n[0].toUpperCase():void 0,s=function(e){if($(e))return e;try{return e.toString()}catch{}return}(n[1]);if(!i||!s)return e.apply(t,n);t[zm]={method:i,url:s,request_headers:{}};"POST"===i&&s.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[zm];if(e&&4===t.readyState){try{e.status_code=t.status}catch{}C("xhr",{endTimestamp:1e3*ve(),startTimestamp:o,xhr:t,virtualError:r})}};"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(e,t,n){a();return e.apply(t,n)}}):t.addEventListener("readystatechange",a);t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,o]=n,i=t[zm];i&&$(r)&&$(o)&&(i.request_headers[r.toLowerCase()]=o);return e.apply(t,n)}});return e.apply(t,n)}});e.send=new Proxy(e.send,{apply(e,t,n){const r=t[zm];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);C("xhr",{startTimestamp:1e3*ve(),xhr:t});return e.apply(t,n)}})}function Vm(e){return new URLSearchParams(e).toString()}function Gm(e,t=p){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Vm(e)];if(!e)return[void 0]}catch(n){ch&&t.error(n,"Failed to serialize body",e);return[void 0,"BODY_PARSE_ERROR"]}ch&&t.log("Skipping network body because of body type",e);return[void 0,"UNPARSEABLE_BODY_TYPE"]}function Jm(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}const Km=[],Ym=new Map;function Xm(){if(hm()&&be()){const e=em(Qm);return()=>{e()}}return()=>{}}const Zm={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};const Qm=({metric:e})=>{if(null==e.value)return;const t=mm(e.value);if(t>60)return;const n=e.entries.find(t=>t.duration===e.value&&Zm[t.name]);if(!n)return;const{interactionId:r}=n,o=Zm[n.name],i=mm(be()+n.startTime),s=Ot(),a=s?Rt(s):void 0,c=(null!=r?Ym.get(r):void 0)||a,u=c?kt(c).description:Ne().getScopeData().transactionName,l=pm({name:J(n.target),transaction:u,attributes:{[Ve]:"auto.http.browser.inp",[We]:`ui.interaction.${o}`,[Ze]:n.duration},startTime:i});if(l){l.addEvent("inp",{[Je]:"millisecond",[Ke]:e.value});l.end(i+t)}};function eg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jm("fetch"),n=0,r=0;return Pr(e,function(o){const i=o.body.length;n+=i;r++;const s={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t){Bm("fetch");return Ln("No fetch implementation available")}try{return t(e.url,s).then(e=>{n-=i;r--;return{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}})}catch(a){Bm("fetch");n-=i;r--;return Ln(a)}})}function tg(e,t,n,r){const o={filename:e,function:"<anonymous>"===t?h:t,in_app:!0};void 0!==n&&(o.lineno=n);void 0!==r&&(o.colno=r);return o}const ng=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,rg=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,og=/\((\S*)(?::(\d+))(?::(\d+))\)/,ig=[30,e=>{const t=ng.exec(e);if(t){const[,e,n,r]=t;return tg(e,h,+n,+r)}const n=rg.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=og.exec(n[2]);if(e){n[2]=e[1];n[3]=e[2];n[4]=e[3]}}const[e,t]=yg(n[1]||h,n[2]);return tg(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],sg=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ag=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,cg=[50,e=>{const t=sg.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=ag.exec(t[3]);if(e){t[1]=t[1]||"eval";t[3]=e[1];t[4]=e[2];t[5]=""}}let e=t[3],n=t[1]||h;[n,e]=yg(n,e);return tg(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],ug=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,lg=[40,e=>{const t=ug.exec(e);return t?tg(t[2],t[1]||h,+t[3],t[4]?+t[4]:void 0):void 0}],dg=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,fg=[10,e=>{const t=dg.exec(e);return t?tg(t[2],t[3]||h,+t[1]):void 0}],pg=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,hg=[20,e=>{const t=pg.exec(e);return t?tg(t[5],t[3]||t[4]||h,+t[1],+t[2]):void 0}],mg=[ig,cg],gg=y(...mg),yg=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:h,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};const _g="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,vg=1024,bg=function(){const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"Breadcrumbs",setup(t){e.console&&fo(function(e){return function(t){if(je()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:ho(t.level),message:ee(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${ee(t.args.slice(1)," ")||"console.assert"}`;n.data.arguments=t.args.slice(1)}Vr(n,{input:t.args,level:t.level})}}(t));e.dom&&Pm(function(e,t){return function(n){if(je()!==e)return;let r,o,i="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;if(s&&s>vg){_g&&p.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`);s=vg}"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=J(t,{keyAttrs:i,maxStringLength:s});o=X(t)}catch{r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o});Vr(a,{event:n.event,name:n.name,global:n.global})}}(t,e.dom));e.xhr&&qm(function(e){return function(t){if(je()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[zm];if(!n||!r||!o)return;const{method:i,url:s,status_code:a,body:c}=o,u={method:i,url:s,status_code:a},l={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r},d={category:"xhr",data:u,type:"http",level:ci(a)};e.emit("beforeOutgoingRequestBreadcrumb",d,l);Vr(d,l)}}(t));e.fetch&&fi(function(e){return function(t){if(je()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method)){t.fetchData.method,t.fetchData.url;if(t.error){const o=t.fetchData,i={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},s={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",s,i);Vr(s,i)}else{const o=t.response,i={...t.fetchData,status_code:null==o?void 0:o.status};t.fetchData.request_body_size;t.fetchData.response_body_size;null==o||o.status;const s={input:t.args,response:o,startTimestamp:n,endTimestamp:r},a={category:"fetch",data:i,type:"http",level:ci(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",a,s);Vr(a,s)}}}}(t));e.history&&Fm(function(e){return function(t){var n;if(je()!==e)return;let r=t.from,o=t.to;const i=Qo(Np.location.href);let s=r?Qo(r):void 0;const a=Qo(o);null!==(n=s)&&void 0!==n&&n.path||(s=i);i.protocol===a.protocol&&i.host===a.host&&(o=a.relative);i.protocol===s.protocol&&i.host===s.host&&(r=s.relative);Vr({category:"navigation",data:{from:r,to:o}})}}(t));e.sentry&&t.on("beforeSendEvent",function(e){return function(t){je()===e&&Vr({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:fe(t)},{event:t})}}(t))}}};const Sg=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],wg=function(){const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&re(Np,"setTimeout",kg);e.setInterval&&re(Np,"setInterval",kg);e.requestAnimationFrame&&re(Np,"requestAnimationFrame",Eg);e.XMLHttpRequest&&"XMLHttpRequest"in Np&&re(XMLHttpRequest.prototype,"send",xg);const t=e.eventTarget;if(t){(Array.isArray(t)?t:Sg).forEach(t=>function(e,t){var n,r;const o=null===(n=Np[e])||void 0===n?void 0:n.prototype;if(null==o||null===(r=o.hasOwnProperty)||void 0===r||!r.call(o,"addEventListener"))return;re(o,"addEventListener",function(n){return function(r,o,i){try{"function"==typeof o.handleEvent&&(o.handleEvent=Up(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:b(o),target:e},handled:!1,type:"instrument"}}))}catch{}t.unregisterOriginalCallbacks&&function(e,t,n){e&&"object"==typeof e&&"removeEventListener"in e&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,n)}(this,r,o);return n.apply(this,[r,Up(o,{mechanism:{data:{function:"addEventListener",handler:b(o),target:e},handled:!1,type:"instrument"}}),i])}});re(o,"removeEventListener",function(e){return function(t,n,r){try{const o=n.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch{}return e.call(this,t,n,r)}})}(t,e))}}}};function kg(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0];n[0]=Up(o,{mechanism:{data:{function:b(e)},handled:!1,type:"instrument"}});return e.apply(this,n)}}function Eg(e){return function(t){return e.apply(this,[Up(t,{mechanism:{data:{function:"requestAnimationFrame",handler:b(e)},handled:!1,type:"instrument"}})])}}function xg(e){return function(){const t=this;["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in t&&"function"==typeof t[e]&&re(t,e,function(t){const n={mechanism:{data:{function:e,handler:b(t)},handled:!1,type:"instrument"}},r=se(t);r&&(n.mechanism.data.handler=b(r));return Up(t,n)})});for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.apply(this,r)}}const Cg=()=>({name:"BrowserSession",setupOnce(){if(void 0!==Np.document){Zn({ignoreDuration:!0});tr();Fm(e=>{let{from:t,to:n}=e;if(void 0!==t&&t!==n){Zn({ignoreDuration:!0});tr()}})}else _g&&p.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),Tg=function(){const e={onerror:!0,onunhandledrejection:!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(t){if(e.onerror){!function(e){I(t=>{const{stackParser:n,attachStacktrace:r}=Mg();if(je()!==e||$p())return;const{msg:o,url:i,line:s,column:a,error:c}=t,u=function(e,t,n,r){const o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=$(t)&&t.length>0?t:Y();0===c.length&&c.push({colno:u,filename:d,function:h,in_app:!0,lineno:l});return e}(oh(n,c||o,void 0,r,!1),i,s,a);u.level="error";Gn(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}(t);Ig("onerror")}if(e.onunhandledrejection){!function(e){O(t=>{const{stackParser:n,attachStacktrace:r}=Mg();if(je()!==e||$p())return;const o=function(e){if(j(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),i=j(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:oh(n,o,void 0,r,!0);i.level="error";Gn(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(t);Ig("onunhandledrejection")}}}};function Ig(e){_g&&p.log(`Global Handler attached: ${e}`)}function Mg(){const e=je();return(null==e?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Rg=()=>({name:"HttpContext",preprocessEvent(e){var t;if(!Np.navigator&&!Np.location&&!Np.document)return;const n=jp(),r={...n.headers,...null===(t=e.request)||void 0===t?void 0:t.headers};e.request={...n,...e.request,headers:r}}}),Og=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,o){to(Jp,o.getOptions().stackParser,n,t,e,r)}}};function Lg(){if(function(){var e;if(void 0===Np.window)return!1;const t=Np;if(t.nw)return!1;const n=t.chrome||t.browser;if(null==n||null===(e=n.runtime)||void 0===e||!e.id)return!1;const r=Y(),o=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Np===Np.top&&o.some(e=>r.startsWith(`${e}://`)))}()){_g&&u(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return!0}return!1}function Ag(e){return[Zr(),Kr(),wg(),bg(),Tg(),Og(),go(),Rg(),Cg()]}const Pg=n,Dg=new WeakMap,Ng=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).types||["crash","deprecation","intervention"];function t(e){if(Dg.has(je()))for(const t of e)Ue(e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];e.setExtra("body",n);if("crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Vn(`${n}: ${r}`)})}return{name:"ReportingObserver",setupOnce(){if(!("ReportingObserver"in ui))return;new Pg.ReportingObserver(t,{buffered:!0,types:e}).observe()},setup(e){Dg.set(e,!0)}}},Fg=function(){const e={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"HttpClient",setup(t){!function(e,t){if(!di())return;fi(n=>{if(je()!==e)return;const{response:r,args:o,error:i,virtualError:s}=n,[a,c]=o;r&&function(e,t,n,r,o){if(Bg(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let i,s,a,c;if(zg()){[i,a]=$g("Cookie",e);[s,c]=$g("Set-Cookie",n)}Gn(Hg({url:e.url,method:e.method,status:n.status,requestHeaders:i,responseHeaders:s,requestCookies:a,responseCookies:c,error:o}))}}(t,a,r,c,i||s)},!1)}(t,e);!function(e,t){if(!("XMLHttpRequest"in n))return;qm(n=>{if(je()!==e)return;const{error:r,virtualError:o}=n,i=n.xhr,s=i[zm];if(!s)return;const{method:a,request_headers:c}=s;try{!function(e,t,n,r,o){if(Bg(e,t.status,t.responseURL)){let e,i,s;if(zg()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(i=jg(e))}catch{}try{s=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce((e,t)=>{const[n,r]=t.split(": ");n&&r&&(e[n]=r);return e},{})}(t)}catch{}e=r}Gn(Hg({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:s,responseCookies:i,error:o}))}}(t,i,a,c,r||o)}catch(u){_g&&p.warn("Error while extracting response event form XHR response",u)}})}(t,e)}}};function $g(e,t){const n=function(e){const t={};e.forEach((e,n)=>{t[n]=e});return t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=jg(t))}catch{}return[n,r]}function Ug(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function jg(e){return e.split("; ").reduce((e,t)=>{const[n,r]=t.split("=");n&&r&&(e[n]=r);return e},{})}function Bg(e,t,n){return function(e,t){return e.some(e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1])}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some(e=>"string"==typeof e?o.includes(e):e.test(o)))&&!$r(n,je());var r,o}function Hg(e){const t=je(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,i={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Ug(e.responseHeaders)}}};he(i,{type:"http.client",handled:!1});return i}function zg(){const e=je();return!!e&&Boolean(e.getOptions().sendDefaultPii)}const qg=n,Wg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:e=>function(e,t){var n;const r=qg.document,o=qg.location&&ei(qg.location.href);if(!r||!o)return e;const i=null===(n=e.exception)||void 0===n?void 0:n.values;if(null==i||!i.length)return e;const s=r.documentElement.innerHTML;if(!s)return e;const a=["<!DOCTYPE html>","<html>",...s.split("\n"),"</html>"];i.forEach(e=>{const n=e.stacktrace;null!=n&&n.frames&&(n.frames=n.frames.map(e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;!function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(e=>Q(e,0));const i=Math.min(r-1,o);t.context_line=Q(e[i],t.colno||0);t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(e=>Q(e,0))}(t,e,r);return e}(e,a,o,t)))});return e}(e,t)}};function Vg(e){const{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=function(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const o=e.match(n);if(o)return{operationType:o[1],operationName:void 0};return{operationType:void 0,operationName:void 0}}(t);return r?`${o} ${r}`:`${o}`}function Gg(e){let t;if("xhr"in e){const n=e.xhr[zm];t=n&&Gm(n.body)[0]}else{t=Gm(Jm(e.input))[0]}return t}function Jg(e){let t;try{const n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}const Kg=e=>({name:"GraphQLClient",setup(t){!function(e,t){e.on("beforeOutgoingRequestSpan",(e,n)=>{const r=kt(e).data||{};if(!("http.client"===r[We]))return;const o=r[et]||r["http.url"],i=r[Qe]||r["http.method"];if(!$(o)||!$(i))return;const{endpoints:s}=t,a=ne(o,s),c=Gg(n);if(a&&c){const t=Jg(c);if(t){const n=Vg(t);e.updateName(`${i} ${o} (${n})`);e.setAttribute("graphql.document",c)}}})}(t,e);!function(e,t){e.on("beforeOutgoingRequestBreadcrumb",(e,n)=>{const{category:r,type:o,data:i}=e;if("http"===o&&("fetch"===r||"xhr"===r)){const e=null==i?void 0:i.url,{endpoints:r}=t,o=ne(e,r),s=Gg(n);if(o&&i&&s){const e=Jg(s);if(!i.graphql&&e){const t=Vg(e);i["graphql.document"]=e.query;i["graphql.operation"]=t}}}})}(t,e)}}),Yg=n,Xg="sentryReplaySession",Zg="Unable to send Replay",Qg=15e4,ey=5e3,ty=2e7,ny=36e5;var ry=Object.defineProperty,oy=(e,t,n)=>((e,t,n)=>t in e?ry(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),iy=(e=>{e[e.Document=0]="Document";e[e.DocumentType=1]="DocumentType";e[e.Element=2]="Element";e[e.Text=3]="Text";e[e.CDATA=4]="CDATA";e[e.Comment=5]="Comment";return e})(iy||{});function sy(e){const t=e?.host;return Boolean(t?.shadowRoot===e)}function ay(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function cy(e){try{const t=e.rules||e.cssRules;return t?function(e){e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;"));return e}(Array.from(t,uy).join("")):null}catch(t){return null}}function uy(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=cy(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`);e.supportsText&&n.push(`supports(${e.supportsText})`);e.media.length&&n.push(e.media.mediaText);return n.join(" ")+";"}(e)}catch(n){}else if(function(e){return"selectorText"in e}(e)){let t=e.cssText;const n=e.selectorText.includes(":"),r="string"==typeof e.style.all&&e.style.all;r&&(t=function(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,o=r[n],i=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}(e));n&&(t=function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(t));if(n||r)return t}return t||e.cssText}let ly=class{constructor(){oy(this,"idNodeMap",new Map);oy(this,"nodeMetaMap",new WeakMap)}getId(e){if(!e)return-1;const t=this.getMeta(e)?.id;return t??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t);e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e);this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map;this.nodeMetaMap=new WeakMap}};function dy({maskInputOptions:e,tagName:t,type:n}){"OPTION"===t&&(t="SELECT");return Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function fy({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";if(!e)return o;r&&(o=r(o,t));return"*".repeat(o.length)}function py(e){return e.toLowerCase()}function hy(e){return e.toUpperCase()}const my="__rrweb_original__";function gy(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?py(t):null}function yy(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function _y(e,t){let n;try{n=new URL(e,t??window.location.href)}catch(o){return null}const r=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return r?.[1]??null}const vy={};function by(e){const t=vy[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0;n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]);n.head.removeChild(t)}catch(o){}return vy[e]=r.bind(window)}function Sy(...e){return by("setTimeout")(...e)}function wy(...e){return by("clearTimeout")(...e)}function ky(e){try{return e.contentDocument}catch(t){}}let Ey=1;const xy=new RegExp("[^a-z0-9-_:]");function Cy(){return Ey++}let Ty,Iy;const My=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Ry=/^(?:[a-z+]+:)?\/\//i,Oy=/^www\..*/i,Ly=/^(data:)([^,]*),(.*)/i;function Ay(e,t){return(e||"").replace(My,(e,n,r,o,i,s)=>{const a=r||i||s,c=n||o||"";if(!a)return e;if(Ry.test(a)||Oy.test(a))return`url(${c}${a}${c})`;if(Ly.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0];t=t.split("?")[0];return t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const t of l)"."!==t&&(".."===t?u.pop():u.push(t));return`url(${c}${u.join("/")}${c})`})}const Py=/^[^ \t\n\r\u000c]+/,Dy=/^[, \t\n\r\u000c]+/;const Ny=new WeakMap;function Fy(e,t){return t&&""!==t.trim()?Uy(e,t):t}function $y(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Uy(e,t){let n=Ny.get(e);if(!n){n=e.createElement("a");Ny.set(e,n)}if(t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";n.setAttribute("href",t);return n.href}function jy(e,t,n,r,o,i){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Fy(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));if(o){r=o[0];n+=r.length;return r}return""}const o=[];for(;;){r(Dy);if(n>=t.length)break;let i=r(Py);if(","===i.slice(-1)){i=Fy(e,i.substring(0,i.length-1));o.push(i)}else{let r="";i=Fy(e,i);let s=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1;o.push((i+r).trim());break}"("===e&&(s=!0)}r+=e;n+=1}}}return o.join(", ")}(e,r):"style"===n?Ay(r,Uy(e)):"object"===t&&"data"===n?Fy(e,r):"function"==typeof i?i(n,r,o):r:Fy(e,r):r}function By(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Hy(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Hy(e.parentNode,t,n,r+1):-1}function zy(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch{return!1}}}function qy(e,t,n,r,o,i){try{const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){const e=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(i){c=Hy(s,zy(r,o));if(c<0)return!0;a=Hy(s,zy(t,n),c>=0?c:1/0)}else{a=Hy(s,zy(t,n));if(a<0)return!1;c=Hy(s,zy(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!i}catch(s){}return!!i}function Wy(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:iy.Document,childNodes:[],compatMode:e.compatMode}:{type:iy.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:iy.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:_,unmaskTextSelector:v}=t,b=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(o){}return!1}(e,r,o,i),S=function(e){if(e instanceof HTMLFormElement)return"form";const t=py(e.tagName);return xy.test(t)?"div":t}(e);let w={};const k=e.attributes.length;for(let C=0;C<k;C++){const t=e.attributes[C];t.name&&!By(S,t.name,t.value)&&(w[t.name]=jy(n,S,py(t.name),t.value,e,c))}if("link"===S&&s){const t=Array.from(n.styleSheets).find(t=>t.href===e.href);let r=null;t&&(r=cy(t));if(r){w.rel=null;w.href=null;w.crossorigin=null;w._cssText=Ay(r,t.href)}}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=cy(e.sheet);t&&(w._cssText=Ay(t,Uy(n)))}if("input"===S||"textarea"===S||"select"===S||"option"===S){const t=e,n=gy(t),r=yy(t,hy(S),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=qy(t,g,_,y,v,dy({type:n,tagName:hy(S),maskInputOptions:a}));w.value=fy({isMasked:e,element:t,value:r,maskInputFn:u})}o&&(w.checked=o)}"option"===S&&(e.selected&&!a.select?w.selected=!0:delete w.selected);if("canvas"===S&&f)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=my in o?o[my]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some(e=>0!==e))return!1}return!0})(e)||(w.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),r=n.createElement("canvas");r.width=e.width;r.height=e.height;t!==r.toDataURL(l.type,l.quality)&&(w.rr_dataURL=t)}if("img"===S&&d){if(!Ty){Ty=n.createElement("canvas");Iy=Ty.getContext("2d")}const t=e,r=(t.currentSrc||t.getAttribute("src"),t.crossOrigin),o=()=>{t.removeEventListener("load",o);try{Ty.width=t.naturalWidth;Ty.height=t.naturalHeight;Iy.drawImage(t,0,0);w.rr_dataURL=Ty.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin){t.crossOrigin="anonymous";t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o);return}}"anonymous"===t.crossOrigin&&(r?w.crossOrigin=r:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}if("audio"===S||"video"===S){w.rr_mediaState=e.paused?"paused":"played";w.rr_mediaCurrentTime=e.currentTime}if(!h){e.scrollLeft&&(w.rr_scrollLeft=e.scrollLeft);e.scrollTop&&(w.rr_scrollTop=e.scrollTop)}if(b){const{width:t,height:n}=e.getBoundingClientRect();w={class:w.class,rr_width:`${t}px`,rr_height:`${n}px`}}if("iframe"===S&&!p(w.src)){b||ky(e)||(w.rr_src=w.src);delete w.src}let E;try{customElements.get(S)&&(E=!0)}catch(x){}return{type:iy.Element,tagName:S,attributes:w,childNodes:[],isSVG:$y(e)||void 0,needBlock:b,rootId:m,isCustom:E}}(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:w,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p="STYLE"===d||void 0,h="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=cy(e.parentNode.sheet))}catch(y){}f=Ay(f,Uy(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const g=qy(e,r,i,o,s,n);p||h||m||!f||!g||(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*"));m&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*"));if("OPTION"===d&&f){f=fy({isMasked:qy(e,r,i,o,s,dy({type:null,tagName:d,maskInputOptions:c})),element:e,value:f,maskInputFn:u})}return{type:iy.Text,textContent:f||"",isStyle:p,rootId:l}}(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:iy.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:iy.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function Vy(e){return null==e?"":e.toLowerCase()}function Gy(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E=5e3,onBlockedImageLoad:x,onStylesheetLoad:C,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:I=()=>!1,newlyAddedElement:M=!1}=t;let{preserveWhiteSpace:R=!0}=t;const O=Wy(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:I,newlyAddedElement:M});if(!O)return null;let L;L=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===iy.Comment)return!0;if(e.type===iy.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===_y(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Vy(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Vy(e.attributes.name)||"icon"===Vy(e.attributes.rel)||"apple-touch-icon"===Vy(e.attributes.rel)||"shortcut icon"===Vy(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Vy(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Vy(e.attributes.property).match(/^(og|twitter|fb):/)||Vy(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Vy(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Vy(e.attributes.name)||"googlebot"===Vy(e.attributes.name)||"bingbot"===Vy(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Vy(e.attributes.name)||"generator"===Vy(e.attributes.name)||"framework"===Vy(e.attributes.name)||"publisher"===Vy(e.attributes.name)||"progid"===Vy(e.attributes.name)||Vy(e.attributes.property).match(/^article:/)||Vy(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Vy(e.attributes.name)||"yandex-verification"===Vy(e.attributes.name)||"csrf-token"===Vy(e.attributes.name)||"p:domain_verify"===Vy(e.attributes.name)||"verify-v1"===Vy(e.attributes.name)||"verification"===Vy(e.attributes.name)||"shopify-checkout-api-token"===Vy(e.attributes.name)))return!0}}return!1}(O,_)&&(R||O.type!==iy.Text||O.isStyle||O.textContent.replace(/^\s+|\s+$/gm,"").length)?Cy():-2;const A=Object.assign(O,{id:L});r.add(e,A);if(-2===L)return null;w&&w(e);let P=!f;if(A.type===iy.Element){P=P&&!A.needBlock;const t=e.shadowRoot;t&&ay(t)&&(A.isShadowHost=!0)}if((A.type===iy.Document||A.type===iy.Element)&&P){_.headWhitespace&&A.type===iy.Element&&"head"===A.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onBlockedImageLoad:x,onStylesheetLoad:C,stylesheetLoadTimeout:T,keepIframeSrcFn:I},M=e.childNodes?Array.from(e.childNodes):[];for(const e of M){const n=Gy(e,t);n&&A.childNodes.push(n)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Gy(n,t);if(r){ay(e.shadowRoot)&&(r.isShadow=!0);A.childNodes.push(r)}}}e.parentNode&&sy(e.parentNode)&&ay(e.parentNode)&&(A.isShadow=!0);A.type!==iy.Element||"iframe"!==A.tagName||A.needBlock||function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(a){return}if("complete"!==o){const r=Sy(()=>{if(!i){t();i=!0}},n);e.addEventListener("load",()=>{wy(r);i=!0;t()});return}const s="about:blank";if(r.location.href!==s||e.src===s||""===e.src){Sy(t,0);return e.addEventListener("load",t)}e.addEventListener("load",t)}(e,()=>{const t=ky(e);if(t&&k){const n=Gy(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:C,stylesheetLoadTimeout:T,keepIframeSrcFn:I});n&&k(e,n)}},E);if(A.type===iy.Element&&"img"===A.tagName&&!e.complete&&A.needBlock){const t=e,n=()=>{if(t.isConnected&&!t.complete&&x)try{const e=t.getBoundingClientRect();e.width>0&&e.height>0&&x(t,A,e)}catch(e){}t.removeEventListener("load",n)};t.isConnected&&t.addEventListener("load",n)}A.type===iy.Element&&"link"===A.tagName&&"string"==typeof A.attributes.rel&&("stylesheet"===A.attributes.rel||"preload"===A.attributes.rel&&"string"==typeof A.attributes.href&&"css"===_y(A.attributes.href))&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(s){return}if(r)return;const i=Sy(()=>{if(!o){t();o=!0}},n);e.addEventListener("load",()=>{wy(i);o=!0;t()})}(e,()=>{if(C){const t=Gy(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:C,stylesheetLoadTimeout:T,keepIframeSrcFn:I});t&&C(e,t)}},T);A.type===iy.Element&&delete A.needBlock;return A}function Jy(e,t,n=document){const r={capture:!0,passive:!0};n.addEventListener(e,t,r);return()=>n.removeEventListener(e,t,r)}const Ky="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Yy={map:{},getId(){console.error(Ky);return-1},getNode(){console.error(Ky);return null},removeNodeFromMap(){console.error(Ky)},has(){console.error(Ky);return!1},reset(){console.error(Ky)}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Yy=new Proxy(Yy,{get(e,t,n){"map"===t&&console.error(Ky);return Reflect.get(e,t,n)}}));function Xy(e,t,n={}){let r=null,o=0;return function(...i){const s=Date.now();o||!1!==n.leading||(o=s);const a=t-(s-o),c=this;if(a<=0||a>t){if(r){!function(...e){y_("clearTimeout")(...e)}(r);r=null}o=s;e.apply(c,i)}else r||!1===n.trailing||(r=__(()=>{o=!1===n.leading?0:Date.now();r=null;e.apply(c,i)},a))}}function Zy(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);o.Object.defineProperty(e,t,r?n:{set(e){__(()=>{n.set.call(this,e)},0);i&&i.set&&i.set.call(this,e)}});return()=>Zy(e,t,i||{},!0)}function Qy(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);if("function"==typeof o){o.prototype=o.prototype||{};Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})}e[t]=o;return()=>{e[t]=r}}catch{return()=>{}}}let e_=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(e_=()=>(new Date).getTime());function t_(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function n_(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function r_(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function o_(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(t){return null}}function i_(e,t,n,r,o){if(!e)return!1;const i=o_(e);if(!i)return!1;const s=zy(t,n);if(!o){const e=r&&i.matches(r);return s(i)&&!e}const a=Hy(i,s);let c=-1;if(a<0)return!1;r&&(c=Hy(i,zy(null,r)));return a>-1&&c<0||a<c}function s_(e,t){return-2===t.getId(e)}function a_(e,t){if(sy(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||a_(e.parentNode,t))}function c_(e){return Boolean(e.changedTouches)}function u_(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function l_(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function d_(e){return Boolean(e?.shadowRoot)}class f_{constructor(){this.id=1;this.styleIDMap=new WeakMap;this.idStyleMap=new Map}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;n=void 0===t?this.id++:t;this.styleIDMap.set(e,n);this.idStyleMap.set(n,e);return n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap;this.idStyleMap=new Map;this.id=1}generateId(){return this.id++}}function p_(e){let t=null;e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host);return t}function h_(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=p_(n);)n=t;return n}(e);return t.contains(n)}function m_(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||h_(e))}const g_={};function y_(e){const t=g_[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0;n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]);n.head.removeChild(t)}catch(o){}return g_[e]=r.bind(window)}function __(...e){return y_("setTimeout")(...e)}var v_=(e=>{e[e.DomContentLoaded=0]="DomContentLoaded";e[e.Load=1]="Load";e[e.FullSnapshot=2]="FullSnapshot";e[e.IncrementalSnapshot=3]="IncrementalSnapshot";e[e.Meta=4]="Meta";e[e.Custom=5]="Custom";e[e.Plugin=6]="Plugin";return e})(v_||{}),b_=(e=>{e[e.Mutation=0]="Mutation";e[e.MouseMove=1]="MouseMove";e[e.MouseInteraction=2]="MouseInteraction";e[e.Scroll=3]="Scroll";e[e.ViewportResize=4]="ViewportResize";e[e.Input=5]="Input";e[e.TouchMove=6]="TouchMove";e[e.MediaInteraction=7]="MediaInteraction";e[e.StyleSheetRule=8]="StyleSheetRule";e[e.CanvasMutation=9]="CanvasMutation";e[e.Font=10]="Font";e[e.Log=11]="Log";e[e.Drag=12]="Drag";e[e.StyleDeclaration=13]="StyleDeclaration";e[e.Selection=14]="Selection";e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet";e[e.CustomElement=16]="CustomElement";return e})(b_||{}),S_=(e=>{e[e.MouseUp=0]="MouseUp";e[e.MouseDown=1]="MouseDown";e[e.Click=2]="Click";e[e.ContextMenu=3]="ContextMenu";e[e.DblClick=4]="DblClick";e[e.Focus=5]="Focus";e[e.Blur=6]="Blur";e[e.TouchStart=7]="TouchStart";e[e.TouchMove_Departed=8]="TouchMove_Departed";e[e.TouchEnd=9]="TouchEnd";e[e.TouchCancel=10]="TouchCancel";return e})(S_||{}),w_=(e=>{e[e.Mouse=0]="Mouse";e[e.Pen=1]="Pen";e[e.Touch=2]="Touch";return e})(w_||{}),k_=(e=>{e[e.Play=0]="Play";e[e.Pause=1]="Pause";e[e.Seeked=2]="Seeked";e[e.VolumeChange=3]="VolumeChange";e[e.RateChange=4]="RateChange";return e})(k_||{});function E_(e){try{return e.contentDocument}catch(t){}}function x_(e){return"__ln"in e}class C_{constructor(){this.length=0;this.head=null;this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=t?.next||null;return t}addNode(e){const t={value:e,previous:null,next:null};e.__ln=t;if(e.previousSibling&&x_(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n;t.previous=e.previousSibling.__ln;e.previousSibling.__ln.next=t;n&&(n.previous=t)}else if(e.nextSibling&&x_(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n;t.next=e.nextSibling.__ln;e.nextSibling.__ln.previous=t;n&&(n.next=t)}else{this.head&&(this.head.previous=t);t.next=this.head;this.head=t}null===t.next&&(this.tail=t);this.length++}removeNode(e){const t=e.__ln;if(this.head){if(t.previous){t.previous.next=t.next;t.next?t.next.previous=t.previous:this.tail=t.previous}else{this.head=t.next;this.head?this.head.previous=null:this.tail=null}e.__ln&&delete e.__ln;this.length--}}}const T_=(e,t)=>`${e}@${t}`;class I_{constructor(){this.frozen=!1;this.locked=!1;this.texts=[];this.attributes=[];this.attributeMap=new WeakMap;this.removes=[];this.mapRemoves=[];this.movedMap={};this.addedSet=new Set;this.movedSet=new Set;this.droppedSet=new Set;this.processMutations=e=>{e.forEach(this.processMutation);this.emit()};this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new C_,r=e=>{let t=e,n=-2;for(;-2===n;){t=t&&t.nextSibling;n=t&&this.mirror.getId(t)}return n},o=o=>{if(!o.parentNode||!m_(o))return;const i=sy(o.parentNode)?this.mirror.getId(p_(o)):this.mirror.getId(o.parentNode),s=r(o);if(-1===i||-1===s)return n.addNode(o);const a=Gy(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{u_(e,this.mirror)&&!i_(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e);l_(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e);d_(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{if(!i_(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)){this.iframeManager.attachIframe(e,t);e.contentWindow&&this.canvasManager.addWindow(e.contentWindow);this.shadowDomManager.observeAttachShadow(e)}},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)},onBlockedImageLoad:(e,t,{width:n,height:r})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:{style:{width:`${n}px`,height:`${r}px`}}}]})}});if(a){e.push({parentId:i,nextId:s,node:a});t.add(a.id)}};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)R_(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||o(a);for(const a of this.addedSet)O_(this.droppedSet,a)||R_(this.removes,a,this.mirror)?O_(this.movedSet,a)?o(a):this.droppedSet.add(a):o(a);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;t=t.previous;if(n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous;n.removeNode(e.value);o(e.value)}const s={texts:this.texts.map(e=>({id:this.mirror.getId(e.node),value:e.value})).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};if(s.texts.length||s.attributes.length||s.removes.length||s.adds.length){this.texts=[];this.attributes=[];this.attributeMap=new WeakMap;this.removes=[];this.addedSet=new Set;this.movedSet=new Set;this.droppedSet=new Set;this.movedMap={};this.mutationCb(s)}};this.processMutation=e=>{if(!s_(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;i_(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:qy(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,o_(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){const t=gy(n),r=n.tagName;o=yy(n,r,t);const i=dy({maskInputOptions:this.maskInputOptions,tagName:r,type:t});o=fy({isMasked:qy(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:n,value:o,maskInputFn:this.maskInputFn})}if(i_(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===e.oldValue)return;let i=this.attributeMap.get(e.target);if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(o)){if(E_(n))return;r="rr_src"}if(!i){i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}};this.attributes.push(i);this.attributeMap.set(e.target,i)}"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true");if(!By(n.tagName,r)){i.attributes[r]=jy(this.doc,py(n.tagName),py(r),o,n,this.maskAttributeFn);if("style"===r){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}const r=this.unattachedDoc.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),o=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?t:[t,o]:i._unchangedStyles[e]=[t,o]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}}break}case"childList":if(i_(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target));e.removedNodes.forEach(t=>{const n=this.mirror.getId(t),r=sy(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);if(!i_(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&!s_(t,this.mirror)&&function(e,t){return-1!==t.getId(e)}(t,this.mirror)){if(this.addedSet.has(t)){M_(this.addedSet,t);this.droppedSet.add(t)}else this.addedSet.has(e.target)&&-1===n||a_(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[T_(n,r)]?M_(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!sy(e.target)||!ay(e.target))||void 0}));this.mapRemoves.push(t)}})}};this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(s_(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t));n&&-1!==n&&(this.movedMap[T_(this.mirror.getId(e),n)]=!0)}else{this.addedSet.add(e);this.droppedSet.delete(e)}if(!i_(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)){e.childNodes&&e.childNodes.forEach(e=>this.genAdds(e));d_(e)&&e.shadowRoot.childNodes.forEach(t=>{this.processedNodeManager.add(t,this);this.genAdds(t,e)})}}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0;this.canvasManager.freeze()}unfreeze(){this.frozen=!1;this.canvasManager.unfreeze();this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0;this.canvasManager.lock()}unlock(){this.locked=!1;this.canvasManager.unlock();this.emit()}reset(){this.shadowDomManager.reset();this.canvasManager.reset()}}function M_(e,t){e.delete(t);t.childNodes?.forEach(t=>M_(e,t))}function R_(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some(e=>e.id===t))return!0;r=r.parentNode}return!1}(e,t,n)}function O_(e,t){return 0!==e.size&&L_(e,t)}function L_(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||L_(e,n))}let A_;const P_=e=>{if(!A_)return e;return(...t)=>{try{return e(...t)}catch(n){if(A_&&!0===A_(n))return()=>{};throw n}}},D_=[];function N_(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function F_(e,t){const n=new I_;D_.push(n);n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);const i=new r(P_(t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)}));i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0});return i}function $_({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,c=[];let u=null;Object.keys(S_).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]).forEach(s=>{let a=py(s);const l=(t=>s=>{const a=N_(s);if(i_(a,r,o,i,!0))return;let c=null,l=t;if("pointerType"in s){switch(s.pointerType){case"mouse":c=w_.Mouse;break;case"touch":c=w_.Touch;break;case"pen":c=w_.Pen}c===w_.Touch?S_[t]===S_.MouseDown?l="TouchStart":S_[t]===S_.MouseUp&&(l="TouchEnd"):w_.Pen}else c_(s)&&(c=w_.Touch);if(null!==c){u=c;(l.startsWith("Touch")&&c===w_.Touch||l.startsWith("Mouse")&&c===w_.Mouse)&&(c=null)}else if(S_[t]===S_.Click){c=u;u=null}const d=c_(s)?s.changedTouches[0]:s;if(!d)return;const f=n.getId(a),{clientX:p,clientY:h}=d;P_(e)({type:S_[l],id:f,x:p,y:h,...null!==c&&{pointerType:c}})})(s);if(window.PointerEvent)switch(S_[s]){case S_.MouseDown:case S_.MouseUp:a=a.replace("mouse","pointer");break;case S_.TouchStart:case S_.TouchEnd:return}c.push(Jy(a,l,t))});return P_(()=>{c.forEach(e=>e())})}function U_({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){return Jy("scroll",P_(Xy(P_(s=>{const a=N_(s);if(!a||i_(a,r,o,i,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=t_(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})}),s.scroll||100)),t)}const j_=["INPUT","TEXTAREA","SELECT"],B_=new WeakMap;function H_({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function g(e){let n=N_(e);const l=e.isTrusted,g=n&&hy(n.tagName);"OPTION"===g&&(n=n.parentElement);if(!n||!g||j_.indexOf(g)<0||i_(n,r,o,i,!0))return;const _=n;if(_.classList.contains(s)||a&&_.matches(a))return;const v=gy(n);let b=yy(_,g,v),S=!1;const w=dy({maskInputOptions:c,tagName:g,type:v}),k=qy(n,f,h,p,m,w);"radio"!==v&&"checkbox"!==v||(S=n.checked);b=fy({isMasked:k,element:n,value:b,maskInputFn:u});y(n,d?{text:b,isChecked:S,userTriggered:l}:{text:b,isChecked:S});const E=n.name;"radio"===v&&E&&S&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach(e=>{if(e!==n){const t=fy({isMasked:k,element:e,value:yy(e,g,v),maskInputFn:u});y(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}})}function y(t,r){const o=B_.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){B_.set(t,r);const o=n.getId(t);P_(e)({...r,id:o})}}const _=("last"===l.input?["change"]:["input","change"]).map(e=>Jy(e,P_(g),t)),v=t.defaultView;if(!v)return()=>{_.forEach(e=>e())};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];b&&b.set&&_.push(...S.map(e=>Zy(e[0],e[1],{set(){P_(g)({target:this,isTrusted:!1})}},!1,v)));return P_(()=>{_.forEach(e=>e())})}function z_(e){return function(e,t){if(G_("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||G_("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||G_("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||G_("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function q_(e,t,n){let r,o;if(!e)return{};e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e);return{styleId:o,id:r}}function W_({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;if(null===r||-1===r||!o||!i)return()=>{};Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(e){const n=i.set?.call(this,e);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(o){}return n}});return P_(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})})}function V_(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=F_(e,e.doc));const o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const c=Xy(P_(t=>{const n=Date.now()-s;e(a.map(e=>{e.timeOffset-=n;return e}),t);a=[];s=null}),i),u=P_(Xy(P_(e=>{const t=N_(e),{clientX:n,clientY:o}=c_(e)?e.changedTouches[0]:e;s||(s=e_());a.push({x:n,y:o,id:r.getId(t),timeOffset:e_()-s});c("undefined"!=typeof DragEvent&&e instanceof DragEvent?b_.Drag:e instanceof MouseEvent?b_.MouseMove:b_.TouchMove)}),o,{trailing:!1})),l=[Jy("mousemove",u,n),Jy("touchmove",u,n),Jy("drag",u,n)];return P_(()=>{l.forEach(e=>e())})}(e),i=$_(e),s=U_(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Jy("resize",P_(Xy(P_(()=>{const t=n_(),o=r_();if(n!==t||r!==o){e({width:Number(o),height:Number(t)});n=t;r=o}}),200)),t)}(e,{win:n}),c=H_(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){const a=P_(s=>Xy(P_(i=>{const a=N_(i);if(!a||i_(a,t,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;e({type:s,id:o.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})}),i.media||500)),c=[Jy("play",a(k_.Play),s),Jy("pause",a(k_.Pause),s),Jy("seeked",a(k_.Seeked),s),Jy("volumechange",a(k_.VolumeChange),s),Jy("ratechange",a(k_.RateChange),s)];return P_(()=>{c.forEach(e=>e())})}(e);let l=()=>{},d=()=>{},f=()=>{},p=()=>{};if(e.recordDOM){l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:P_((r,o,i)=>{const[s,a]=i,{id:c,styleId:u}=q_(o,t,n.styleMirror);(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:s,index:a}]});return r.apply(o,i)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:P_((r,o,i)=>{const[s]=i,{id:a,styleId:c}=q_(o,t,n.styleMirror);(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:s}]});return r.apply(o,i)})});let s,a;if(r.CSSStyleSheet.prototype.replace){s=r.CSSStyleSheet.prototype.replace;r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:P_((r,o,i)=>{const[s]=i,{id:a,styleId:c}=q_(o,t,n.styleMirror);(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:s});return r.apply(o,i)})})}if(r.CSSStyleSheet.prototype.replaceSync){a=r.CSSStyleSheet.prototype.replaceSync;r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:P_((r,o,i)=>{const[s]=i,{id:a,styleId:c}=q_(o,t,n.styleMirror);(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:s});return r.apply(o,i)})})}const c={};if(J_("CSSGroupingRule"))c.CSSGroupingRule=r.CSSGroupingRule;else{J_("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule);J_("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule);J_("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule)}const u={};Object.entries(c).forEach(([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule};o.prototype.insertRule=new Proxy(u[r].insertRule,{apply:P_((r,o,i)=>{const[s,a]=i,{id:c,styleId:u}=q_(o.parentStyleSheet,t,n.styleMirror);(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:s,index:[...z_(o),a||0]}]});return r.apply(o,i)})});o.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:P_((r,o,i)=>{const[s]=i,{id:a,styleId:c}=q_(o.parentStyleSheet,t,n.styleMirror);(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...z_(o),s]}]});return r.apply(o,i)})})});return P_(()=>{r.CSSStyleSheet.prototype.insertRule=o;r.CSSStyleSheet.prototype.deleteRule=i;s&&(r.CSSStyleSheet.prototype.replace=s);a&&(r.CSSStyleSheet.prototype.replaceSync=a);Object.entries(c).forEach(([e,t])=>{t.prototype.insertRule=u[e].insertRule;t.prototype.deleteRule=u[e].deleteRule})})}(e,{win:n});d=W_(e,e.doc);f=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:P_((o,s,a)=>{const[c,u,l]=a;if(n.has(c))return i.apply(s,[c,u,l]);const{id:d,styleId:f}=q_(s.parentRule?.parentStyleSheet,t,r.styleMirror);(d&&-1!==d||f&&-1!==f)&&e({id:d,styleId:f,set:{property:c,value:u,priority:l},index:z_(s.parentRule)});return o.apply(s,a)})});const s=o.CSSStyleDeclaration.prototype.removeProperty;o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:P_((o,i,a)=>{const[c]=a;if(n.has(c))return s.apply(i,[c]);const{id:u,styleId:l}=q_(i.parentRule?.parentStyleSheet,t,r.styleMirror);(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,remove:{property:c},index:z_(i.parentRule)});return o.apply(i,a)})});return P_(()=>{o.CSSStyleDeclaration.prototype.setProperty=i;o.CSSStyleDeclaration.prototype.removeProperty=s})}(e,{win:n});e.collectFonts&&(p=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))});return r};const s=Qy(t.fonts,"add",function(t){return function(n){__(P_(()=>{const t=o.get(n);if(t){e(t);o.delete(n)}}),0);return t.apply(this,[n])}});r.push(()=>{n.FontFace=i});r.push(s);return P_(()=>{r.forEach(e=>e())})}(e))}const h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e;let a=!0;const c=P_(()=>{const e=t.getSelection();if(!e||a&&e?.isCollapsed)return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const s=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=s;i_(a,r,o,i,!0)||i_(l,r,o,i,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}s({ranges:c})});c();return Jy("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Qy(n.customElements,"define",function(e){return function(n,r,o){try{t({define:{name:n}})}catch(i){}return e.apply(this,[n,r,o])}}):()=>{}}(e),g=[];for(const y of e.plugins)g.push(y.observer(y.callback,n,y.options));return P_(()=>{D_.forEach(e=>e.reset());r?.disconnect();o();i();s();a();c();u();l();d();f();p();h();m();g.forEach(e=>e())})}function G_(e){return void 0!==window[e]}function J_(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class K_{constructor(e){this.generateIdFn=e;this.iframeIdToRemoteIdMap=new WeakMap;this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let s=o.get(t);if(!s){s=this.generateIdFn();o.set(t,s);i.set(s,t)}return s}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,n,r))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,n))}reset(e){if(e){this.iframeIdToRemoteIdMap.delete(e);this.iframeRemoteIdToIdMap.delete(e)}else{this.iframeIdToRemoteIdMap=new WeakMap;this.iframeRemoteIdToIdMap=new WeakMap}}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);if(!t){t=new Map;this.iframeIdToRemoteIdMap.set(e,t)}return t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);if(!t){t=new Map;this.iframeRemoteIdToIdMap.set(e,t)}return t}}class Y_{constructor(){this.crossOriginIframeMirror=new K_(Cy);this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class X_{constructor(e){this.iframes=new WeakMap;this.crossOriginIframeMap=new WeakMap;this.crossOriginIframeMirror=new K_(Cy);this.crossOriginIframeRootIdMap=new WeakMap;this.mutationCb=e.mutationCb;this.wrappedEmit=e.wrappedEmit;this.stylesheetManager=e.stylesheetManager;this.recordCrossOriginIframes=e.recordCrossOriginIframes;this.crossOriginIframeStyleMirror=new K_(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));this.mirror=e.mirror;this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0);e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0});this.recordCrossOriginIframes&&e.contentWindow?.addEventListener("message",this.handleMessage.bind(this));this.loadListener?.(e);const n=E_(e);n&&n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(n))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case v_.FullSnapshot:{this.crossOriginIframeMirror.reset(e);this.crossOriginIframeStyleMirror.reset(e);this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;this.crossOriginIframeRootIdMap.set(e,n);this.patchRootIdOnNode(t.data.node,n);return{timestamp:t.timestamp,type:v_.IncrementalSnapshot,data:{source:b_.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case v_.Meta:case v_.Load:case v_.DomContentLoaded:return!1;case v_.Plugin:return t;case v_.Custom:this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]);return t;case v_.IncrementalSnapshot:switch(t.data.source){case b_.Mutation:t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]);this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)});t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])});t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])});t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])});return t;case b_.Drag:case b_.TouchMove:case b_.MouseMove:t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])});return t;case b_.ViewportResize:return!1;case b_.MediaInteraction:case b_.MouseInteraction:case b_.Scroll:case b_.CanvasMutation:case b_.Input:this.replaceIds(t.data,e,["id"]);return t;case b_.StyleSheetRule:case b_.StyleDeclaration:this.replaceIds(t.data,e,["id"]);this.replaceStyleIds(t.data,e,["styleId"]);return t;case b_.Font:return t;case b_.Selection:t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])});return t;case b_.AdoptedStyleSheet:this.replaceIds(t.data,e,["id"]);this.replaceStyleIds(t.data,e,["styleIds"]);t.data.styles?.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])});return t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]);"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===iy.Document||e.rootId||(e.rootId=t);"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class Z_{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Q_{constructor(e){this.shadowDoms=new WeakSet;this.restoreHandlers=[];this.mutationCb=e.mutationCb;this.scrollCb=e.scrollCb;this.bypassOptions=e.bypassOptions;this.mirror=e.mirror;this.init()}init(){this.reset();this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!ay(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);this.bypassOptions.canvasManager.addShadowRoot(e);const n=F_({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>n.disconnect());this.restoreHandlers.push(U_({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror}));__(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host));this.restoreHandlers.push(W_({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){const t=E_(e),n=function(e){try{return e.contentWindow}catch(t){}}(e);t&&n&&this.patchAttachShadow(n.Element,t)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Qy(e.prototype,"attachShadow",function(e){return function(r){const o=e.call(this,r);this.shadowRoot&&m_(this)&&n.addShadowRoot(this.shadowRoot,t);return o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(t){}});this.restoreHandlers=[];this.shadowDoms=new WeakSet;this.bypassOptions.canvasManager.resetShadowRoots()}}for(var ev="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tv="undefined"==typeof Uint8Array?[]:new Uint8Array(256),nv=0;nv<64;nv++)tv[ev.charCodeAt(nv)]=nv;class rv{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class ov{constructor(e){this.trackedLinkElements=new WeakSet;this.styleMirror=new f_;this.mutationCb=e.mutationCb;this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]});this.trackLinkElement(e)}trackLinkElement(e){if(!this.trackedLinkElements.has(e)){this.trackedLinkElements.add(e);this.trackStylesheetInLinkElement(e)}}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const o of e){let e;if(this.styleMirror.has(o))e=this.styleMirror.getId(o);else{e=this.styleMirror.add(o);r.push({styleId:e,rules:Array.from(o.rules||CSSRule,(e,t)=>({rule:uy(e),index:t}))})}n.styleIds.push(e)}r.length>0&&(n.styles=r);this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset();this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class iv{constructor(){this.nodeMap=new WeakMap;this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some(e=>e!==t)}add(e,t){if(!this.active){this.active=!0;!function(...e){y_("requestAnimationFrame")(...e)}(()=>{this.nodeMap=new WeakMap;this.active=!1})}this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let sv,av;try{if(2!==Array.from([1],e=>2*e)[0]){const e=document.createElement("iframe");document.body.appendChild(e);Array.from=e.contentWindow?.Array.from||Array.from;document.body.removeChild(e)}}catch(Aw){}const cv=new ly;function uv(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:E={},mousemoveWait:x,recordDOM:C=!0,recordCanvas:T=!1,recordCrossOriginIframes:I=!1,recordAfter:M=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:O=!1,inlineImages:L=!1,plugins:A,keepIframeSrcFn:P=()=>!1,ignoreCSSAttributes:D=new Set([]),errorHandler:N,onMutation:F,getCanvasManager:$}=e;A_=N;const U=!I||window.parent===window;let j=!1;if(!U)try{window.parent.document&&(j=!1)}catch(te){j=!0}if(U&&!t)throw new Error("emit function is required");if(!U&&!j)return()=>{};void 0!==x&&void 0===k.mousemove&&(k.mousemove=x);cv.reset();const B=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},H=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach);"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach);Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let z,q=0;const W=e=>{for(const t of A||[])t.eventProcessor&&(e=t.eventProcessor(e));w&&!j&&(e=w(e));return e};sv=(e,o)=>{const i=e;i.timestamp=e_();!D_[0]?.isFrozen()||i.type===v_.FullSnapshot||i.type===v_.IncrementalSnapshot&&i.data.source===b_.Mutation||D_.forEach(e=>e.unfreeze());if(U)t?.(W(i),o);else if(j){const e={type:"rrweb",event:W(i),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(i.type===v_.FullSnapshot){z=i;q=0}else if(i.type===v_.IncrementalSnapshot){if(i.data.source===b_.Mutation&&i.data.isAttachIframe)return;q++;const e=r&&q>=r,t=n&&z&&i.timestamp-z.timestamp>n;(e||t)&&ee(!0)}};const V=e=>{sv({type:v_.IncrementalSnapshot,data:{source:b_.Mutation,...e}})},G=e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.Scroll,...e}}),J=e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.CanvasMutation,...e}}),K=new ov({mutationCb:V,adoptedStyleSheetCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.AdoptedStyleSheet,...e}})}),Y="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Y_:new X_({mirror:cv,mutationCb:V,stylesheetManager:K,recordCrossOriginIframes:I,wrappedEmit:sv});for(const re of A||[])re.getMirror&&re.getMirror({nodeMirror:cv,crossOriginIframeMirror:Y.crossOriginIframeMirror,crossOriginIframeStyleMirror:Y.crossOriginIframeStyleMirror});const X=new iv,Z=function(e,t){try{return e?e(t):new rv}catch{return new rv}}($,{mirror:cv,win:window,mutationCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.CanvasMutation,...e}}),recordCanvas:T,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:E,errorHandler:N}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Z_:new Q_({mutationCb:V,scrollCb:G,bypassOptions:{onMutation:F,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:B,dataURLOptions:E,maskAttributeFn:_,maskTextFn:b,maskInputFn:v,recordCanvas:T,inlineImages:L,sampling:k,slimDOMOptions:H,iframeManager:Y,stylesheetManager:K,canvasManager:Z,keepIframeSrcFn:P,processedNodeManager:X},mirror:cv}),ee=(e=!1)=>{if(!C)return;sv({type:v_.Meta,data:{href:window.location.href,width:r_(),height:n_()}},e);K.reset();Q.init();D_.forEach(e=>e.lock());const t=function(e,t){const{mirror:n=new ly,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onBlockedImageLoad:E,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:T=()=>!1}=t||{};return Gy(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:f,recordCanvas:p,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onBlockedImageLoad:E,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:T,newlyAddedElement:!1})}(document,{mirror:cv,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:B,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,slimDOM:H,dataURLOptions:E,recordCanvas:T,inlineImages:L,onSerialize:e=>{u_(e,cv)&&Y.addIframe(e);l_(e,cv)&&K.trackLinkElement(e);d_(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{Y.attachIframe(e,t);e.contentWindow&&Z.addWindow(e.contentWindow);Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{K.attachLinkElement(e,t)},onBlockedImageLoad:(e,t,{width:n,height:r})=>{V({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:{style:{width:`${n}px`,height:`${r}px`}}}]})},keepIframeSrcFn:P});if(!t)return console.warn("Failed to snapshot the document");sv({type:v_.FullSnapshot,data:{node:t,initialOffset:t_(window)}});D_.forEach(e=>e.unlock());document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&K.adoptStyleSheets(document.adoptedStyleSheets,cv.getId(document))};av=ee;try{const e=[],t=e=>P_(V_)({onMutation:F,mutationCb:V,mousemoveCb:(e,t)=>sv({type:v_.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.ViewportResize,...e}}),inputCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.Input,...e}}),mediaInteractionCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.MediaInteraction,...e}}),styleSheetRuleCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.StyleSheetRule,...e}}),styleDeclarationCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>sv({type:v_.IncrementalSnapshot,data:{source:b_.Font,...e}}),selectionCb:e=>{sv({type:v_.IncrementalSnapshot,data:{source:b_.Selection,...e}})},customElementCb:e=>{sv({type:v_.IncrementalSnapshot,data:{source:b_.CustomElement,...e}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:B,inlineStylesheet:h,sampling:k,recordDOM:C,recordCanvas:T,inlineImages:L,userTriggeredOnInput:R,collectFonts:O,doc:e,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:P,blockSelector:i,unblockSelector:s,slimDOMOptions:H,dataURLOptions:E,mirror:cv,iframeManager:Y,stylesheetManager:K,shadowDomManager:Q,processedNodeManager:X,canvasManager:Z,ignoreCSSAttributes:D,plugins:A?.filter(e=>e.observer)?.map(e=>({observer:e.observer,options:e.options,callback:t=>sv({type:v_.Plugin,data:{plugin:e.name,payload:t}})}))||[]},{});Y.addLoadListener(n=>{try{e.push(t(n.contentDocument))}catch(r){}});const n=()=>{ee();e.push(t(document))};if("interactive"===document.readyState||"complete"===document.readyState)n();else{e.push(Jy("DOMContentLoaded",()=>{sv({type:v_.DomContentLoaded,data:{}});"DOMContentLoaded"===M&&n()}));e.push(Jy("load",()=>{sv({type:v_.Load,data:{}});"load"===M&&n()},window))}return()=>{e.forEach(e=>e());X.destroy();av=void 0;A_=void 0}}catch(ne){}}uv.mirror=cv;uv.takeFullSnapshot=function(e){if(!av)throw new Error("please take full snapshot after start recording");av(e)};var lv,dv;(dv=lv||(lv={}))[dv.NotStarted=0]="NotStarted",dv[dv.Running=1]="Running",dv[dv.Stopped=2]="Stopped";function fv(e){return e>9999999999?e:1e3*e}function pv(e){return e>9999999999?e/1e3:e}function hv(e,t){if("sentry.transaction"!==t.category){["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession();e.addUpdate(()=>{e.throttledAddEvent({type:v_.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Yt(t,10,1e3)}});return"console"===t.category})}}function mv(e){return e.closest("button,a")||e}function gv(e){const t=yv(e);return t&&t instanceof Element?mv(t):t}function yv(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let _v;function vv(e){if(!_v){_v=[];re(Yg,"open",function(e){return function(...t){if(_v)try{_v.forEach(e=>e())}catch{}return e.apply(Yg,t)}})}_v.push(e);return()=>{const t=_v?_v.indexOf(e):-1;t>-1&&_v.splice(t,1)}}const bv=new Set([b_.Mutation,b_.StyleSheetRule,b_.StyleDeclaration,b_.AdoptedStyleSheet,b_.CanvasMutation,b_.Selection,b_.MediaInteraction]);class Sv{constructor(e,t,n=hv){this._lastMutation=0;this._lastScroll=0;this._clicks=[];this._timeout=t.timeout/1e3;this._threshold=t.threshold/1e3;this._scrollTimeout=t.scrollTimeout/1e3;this._replay=e;this._ignoreSelector=t.ignoreSelector;this._addBreadcrumbEvent=n}addListeners(){const e=vv(()=>{this._lastMutation=kv()});this._teardown=()=>{e();this._clicks=[];this._lastMutation=0;this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown();this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!wv.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:pv(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};if(!this._clicks.some(e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1)){this._clicks.push(n);1===this._clicks.length&&this._scheduleCheckClicks()}}registerMutation(e=Date.now()){this._lastMutation=pv(e)}registerScroll(e=Date.now()){this._lastScroll=pv(e)}registerClick(e){const t=mv(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach(e=>{e.clickCount++})}_getClicks(e){return this._clicks.filter(t=>t.node===e)}_checkClicks(){const e=[],t=kv();this._clicks.forEach(n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0);!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0);n.timestamp+this._timeout<=t&&e.push(n)});for(const n of e){const e=this._clicks.indexOf(n);if(e>-1){this._generateBreadcrumbs(n);this._clicks.splice(e,1)}}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:i,clickBreadcrumb:s}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.slowClickDetected",data:{...s.data,url:Yg.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:i||1}};this._addBreadcrumbEvent(t,o);return}if(i>1){const e={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.multiClick",data:{...s.data,url:Yg.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout);this._checkClickTimeout=Hm(()=>this._checkClicks(),1e3)}}const wv=["A","BUTTON","INPUT"];function kv(){return Date.now()/1e3}function Ev(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;bv.has(n)&&e.registerMutation(t.timestamp);n===b_.Scroll&&e.registerScroll(t.timestamp);if(function(e){return e.data.source===b_.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=uv.mirror.getNode(r);o instanceof HTMLElement&&n===S_.Click&&e.registerClick(o)}}catch{}}function xv(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Cv=(e=>{e[e.Document=0]="Document";e[e.DocumentType=1]="DocumentType";e[e.Element=2]="Element";e[e.Text=3]="Text";e[e.CDATA=4]="CDATA";e[e.Comment=5]="Comment";return e})(Cv||{});const Tv=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Iv(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(Tv.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId");t[r]=e[n]}return t}const Mv=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?gv(e.event):yv(e.event);n=J(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}(e);return xv({category:`ui.${e.name}`,...Rv(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;!(r&&e.clickDetector&&o?.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(i=e.clickDetector,s=n,a=gv(t.event),i.handleClick(s,a));var i,s,a;hv(e,n)};function Rv(e,t){const n=uv.mirror.getId(e),r=n&&uv.mirror.getNode(n),o=r&&uv.mirror.getMeta(r),i=o&&function(e){return e.type===Cv.Element}(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(e=>e.type===Cv.Text&&e.textContent).filter(Boolean).map(e=>e.trim()).join(""),attributes:Iv(i.attributes)}}:{}}}function Ov(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(s)||!i)return null;const a=t||r||o,c=1===i.length;if(!a&&c)return null;const u=J(s,{maxStringLength:200})||"<unknown>",l=Rv(s,u);return xv({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}(t);n&&hv(e,n)}const Lv={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:Dv(i),end:Dv(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,i=Dv(o);return{type:n,name:r,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:f,startTime:p,transferSize:h,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:Dv(p),end:Dv(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:f}}}};function Av(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function Pv(e){const t=Lv[e.entryType];return t?t(e):null}function Dv(e){return((be()||Yg.performance.timeOrigin)+e)/1e3}function Nv(e){const t=e.entries[e.entries.length-1];return Bv(e,"largest-contentful-paint",t?.element?[t.element]:void 0)}function Fv(e){return void 0!==e.sources}function $v(e){const t=[],n=[];for(const r of e.entries)if(Fv(r)){const e=[];for(const t of r.sources)if(t.node){n.push(t.node);const r=uv.mirror.getId(t.node);r&&e.push(r)}t.push({value:r.value,nodeIds:e.length?e:void 0})}return Bv(e,"cumulative-layout-shift",n,t)}function Uv(e){const t=e.entries[e.entries.length-1];return Bv(e,"first-input-delay",t?.target?[t.target]:void 0)}function jv(e){const t=e.entries[e.entries.length-1];return Bv(e,"interaction-to-next-paint",t?.target?[t.target]:void 0)}function Bv(e,t,n,r){const o=e.value,i=e.rating,s=Dv(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(e=>uv.mirror.getId(e)):void 0,attributions:r}}}const Hv="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;const zv=["log","warn","error"],qv="[Replay] ";function Wv(e,t="info"){Vr({category:"console",data:{logger:"replay"},level:t,message:`${qv}${e}`},{level:t})}const Vv=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=!!n.captureExceptions;t=!!n.traceInternals}};if(Hv){zv.forEach(e=>{n[e]=(...n)=>{p[e](qv,...n);t&&Wv(n.join(""),ho(e))}});n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o);p.error(qv,r);e?Wn(r):t&&Wv(r,"error")};n.infoTick=(...e)=>{p.log(qv,...e);t&&setTimeout(()=>Wv(e[0]),0)}}else zv.forEach(e=>{n[e]=()=>{}});return n}();class Gv extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Jv{constructor(){this.events=[];this._totalSize=0;this.hasCheckout=!1;this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;this._totalSize+=t;if(this._totalSize>ty)throw new Gv;this.events.push(e)}finish(){return new Promise(e=>{const t=this.events;this.clear();e(JSON.stringify(t))})}clear(){this.events=[];this._totalSize=0;this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(e=>e.timestamp).sort()[0];return e?fv(e):null}}class Kv{constructor(e){this._worker=e;this._id=0}ensureReady(){if(this._ensureReadyPromise)return this._ensureReadyPromise;this._ensureReadyPromise=new Promise((e,t)=>{this._worker.addEventListener("message",({data:n})=>{n.success?e():t()},{once:!0});this._worker.addEventListener("error",e=>{t(e)},{once:!0})});return this._ensureReadyPromise}destroy(){Hv&&Vv.log("Destroying compression worker");this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise((r,o)=>{const i=({data:t})=>{const s=t;if(s.method===e&&s.id===n){this._worker.removeEventListener("message",i);if(s.success)r(s.response);else{Hv&&Vv.error("Error in compression worker: ",s.response);o(new Error("Error in compression worker"))}}};this._worker.addEventListener("message",i);this._worker.postMessage({id:n,method:e,arg:t})})}_getAndIncrementId(){return this._id++}}class Yv{constructor(e){this._worker=new Kv(e);this._earliestTimestamp=null;this._totalSize=0;this.hasCheckout=!1;this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=fv(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);this._totalSize+=n.length;return this._totalSize>ty?Promise.reject(new Gv):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null;this._totalSize=0;this.hasCheckout=!1;this._worker.postMessage("clear").then(null,e=>{Hv&&Vv.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");this._earliestTimestamp=null;this._totalSize=0;return e}}class Xv{constructor(e){this._fallback=new Jv;this._compression=new Yv(e);this._used=this._fallback;this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy();this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){await this.ensureWorkerIsLoaded();return this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){Hv&&Vv.exception(e,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t,waitForCheckout:n}=this._fallback,r=[];for(const i of e)r.push(this._compression.addEvent(i));this._compression.hasCheckout=t;this._compression.waitForCheckout=n;this._used=this._compression;try{await Promise.all(r);this._fallback.clear()}catch(o){Hv&&Vv.exception(o,"Failed to add events when switching buffers.")}}}function Zv({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;Hv&&Vv.log("Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Xv(n)}catch(t){Hv&&Vv.exception(t,"Failed to create compression worker")}}(t);if(e)return e}Hv&&Vv.log("Using simple buffer");return new Jv}function Qv(){try{return"sessionStorage"in Yg&&!!Yg.sessionStorage}catch{return!1}}function eb(e){!function(){if(!Qv())return;try{Yg.sessionStorage.removeItem(Xg)}catch{}}();e.session=void 0}function tb(e){return void 0!==e&&Math.random()<e}function nb(e){if(Qv())try{Yg.sessionStorage.setItem(Xg,JSON.stringify(e))}catch{}}function rb(e){const t=Date.now();return{id:e.id||le(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function ob({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return tb(e)?"session":!!t&&"buffer"}(e,t),i=rb({sampled:o,previousSessionId:r});n&&nb(i);return i}function ib(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function sb(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return ib(e.started,t,r)||ib(e.lastActivity,n,r)}function ab(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!sb(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function cb({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const o=r.stickySession&&function(){if(!Qv())return null;try{const e=Yg.sessionStorage.getItem(Xg);if(!e)return null;const t=JSON.parse(e);Hv&&Vv.infoTick("Loading existing session");return rb(t)}catch{return null}}();if(!o){Hv&&Vv.infoTick("Creating new session");return ob(r,{previousSessionId:n})}if(!ab(o,{sessionIdleExpire:e,maxReplayDuration:t}))return o;Hv&&Vv.infoTick("Session in sessionStorage is expired, creating new one...");return ob(r,{previousSessionId:o.id})}function ub(e,t,n){if(!db(e,t))return!1;lb(e,t,n);return!0}async function lb(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const o="buffer"===e.recordingMode;try{n&&o&&r.clear();if(n){r.hasCheckout=!0;r.waitForCheckout=!1}const i=function(e,t){try{if("function"==typeof t&&function(e){return e.type===v_.Custom}(e))return t(e)}catch(n){Hv&&Vv.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event...");return null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!i)return;return await r.addEvent(i)}catch(i){const t=i&&i instanceof Gv,n=t?"addEventSizeExceeded":"addEvent";if(t&&o){r.clear();r.waitForCheckout=!0;return null}e.handleException(i);await e.stop({reason:n});const s=je();s&&s.recordDroppedEvent("internal_sdk_error","replay")}}function db(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=fv(t.timestamp);if(n+e.timeouts.sessionIdlePause<Date.now())return!1;if(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration){Hv&&Vv.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`);return!1}return!0}function fb(e){return!e.type}function pb(e){return"transaction"===e.type}function hb(e){return"feedback"===e.type}function mb(e){return(t,n)=>{if(!e.isEnabled()||!fb(t)&&!pb(t))return;const r=n?.statusCode;!r||r<200||r>=300||(pb(t)?function(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;Hm(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(Aw){e.handleException(Aw)}})}(e,t))}}function gb(e){return t=>{e.isEnabled()&&fb(t)&&function(e,t){const n=t.exception?.values?.[0]?.value;if("string"!=typeof n)return;if(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){hv(e,xv({category:"replay.hydrate-error",data:{url:Y()}}))}}(e,t)}}function yb(e){const t=je();t&&t.on("beforeAddBreadcrumb",t=>function(e,t){if(!e.isEnabled()||!_b(t))return;const n=function(e){if(!_b(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(e){const t=e.data?.arguments;if(!Array.isArray(t)||0===t.length)return xv(e);let n=!1;const r=t.map(e=>{if(!e)return e;if("string"==typeof e){if(e.length>ey){n=!0;return`${e.slice(0,ey)}`}return e}if("object"==typeof e)try{const t=Yt(e,7);if(JSON.stringify(t).length>ey){n=!0;return`${JSON.stringify(t,null,2).slice(0,ey)}`}return t}catch{}return e});return xv({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return xv(e)}(t);n&&hv(e,n)}(e,t))}function _b(e){return!!e.category}function vb(){const e=Ne().getPropagationContext().dsc;e&&delete e.replay_id;const t=Ot();if(t){delete Gt(t).replay_id}}function bb(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(function(e){return"replay_event"===e.type}(t)){delete t.breadcrumbs;return t}if(!fb(t)&&!pb(t)&&!hb(t))return t;if(!e.checkAndHandleExpiredSession()){vb();return t}if(hb(t)){e.flush();t.contexts.feedback.replay_id=e.getSessionId();!function(e,t){e.triggerUserActivity();e.addUpdate(()=>{if(!t.timestamp)return!0;e.throttledAddEvent({type:v_.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}});return!1})}(e,t);return t}if(function(e,t){return!(e.type||!e.exception?.values?.length||!t.originalException?.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions){Hv&&Vv.log("Ignoring error from rrweb internals",t);return null}const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==Zg&&!(!t.exception||t.type)&&tb(e.getOptions().errorSampleRate)}(e,t);(r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()});return t},{id:"Replay"})}function Sb(e,t){return t.map(({type:t,start:n,end:r,name:o,data:i})=>{const s=e.throttledAddEvent({type:v_.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:i}}});return"string"==typeof s?Promise.resolve(null):s})}function wb(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);if(null!==n){e.getContext().urls.push(n.name);e.triggerUserActivity();e.addUpdate(()=>{Sb(e,[n]);return!1})}}}function kb(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Hv||!e.getOptions()._experiments.traceInternals)&&$r(t,je())}(e,t.name)||e.addUpdate(()=>{Sb(e,[t]);return!0}))}function Eb(e){if(!e)return;const t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Vm(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function xb(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Cb(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];n.warnings=[...r,t];e._meta=n;return e}function Tb(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:i,statusCode:s,request:a,response:c}}}function Ib(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Mb(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Qg,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Qg);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}(n);r.body=o;i?.length&&(r._meta={warnings:i});return r}function Rb(e,t){return Object.entries(e).reduce((n,[r,o])=>{const i=r.toLowerCase();t.includes(i)&&e[r]&&(n[i]=o);return n},{})}function Ob(e,t){const n=function(e,t=Yg.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Yg.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return ne(n,t)}async function Lb(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=Ob(s,n.networkDetailAllowUrls)&&!Ob(s,n.networkDetailDenyUrls),f=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Pb(e[0],t);if(2===e.length)return Pb(e[1],t);return{}}(n,t):{};if(!e)return Mb(o,r,void 0);const i=Jm(n),[s,a]=Gm(i,Vv),c=Mb(o,r,s);if(a)return Cb(c,a);return c}(n,t.input,u):Ib(u),p=await async function(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&void 0!==o)return Ib(o);const i=r?Ab(r.headers,n):{};if(!r||!t&&void 0!==o)return Mb(i,o,void 0);const[s,a]=await async function(e){const t=function(e){try{return e.clone()}catch(t){Hv&&Vv.exception(t,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise((t,n)=>{const r=Hm(()=>n(new Error("Timeout while trying to read response body")),500);(async function(e){return await e.text()})(e).then(e=>t(e),e=>n(e)).finally(()=>clearTimeout(r))})}(t);return[e]}catch(n){if(n instanceof Error&&n.message.indexOf("Timeout")>-1){Hv&&Vv.warn("Parsing text body from response timed out");return[void 0,"BODY_PARSE_TIMEOUT"]}Hv&&Vv.exception(n,"Failed to get text body from response");return[void 0,"BODY_PARSE_ERROR"]}}(r),c=function(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{const i=e?.length&&void 0===n?Eb(e):n;return r?Mb(o,i,t?e:void 0):Ib(i)}catch(i){Hv&&Vv.exception(i,"Failed to serialize response body");return Mb(o,n,void 0)}}(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});if(a)return Cb(c,a);return c}(d,n,t.response,l);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:f,response:p}}(e,t,n),o=Tb("resource.fetch",r);kb(n.replay,o)}catch(r){Hv&&Vv.exception(r,"Failed to capture fetch breadcrumb")}}function Ab(e,t){const n={};t.forEach(t=>{e.get(t)&&(n[t]=e.get(t))});return n}function Pb(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Ab(n,t):Array.isArray(n)?{}:Rb(n,t):{}}async function Db(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:f}=e.data;if(!c)return null;if(!a||!Ob(c,n.networkDetailAllowUrls)||Ob(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:Ib(d),response:Ib(f)}}const p=a[zm],h=p?Rb(p.request_headers,n.networkRequestHeaders):{},m=Rb(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce((e,t)=>{const[n,r]=t.split(": ");r&&(e[n.toLowerCase()]=r);return e},{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?Gm(s,Vv):[void 0],[_,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){Hv&&Vv.exception(n,"Failed to serialize body",e);return[void 0,"BODY_PARSE_ERROR"]}Hv&&Vv.log("Skipping network body because of body type",e);return[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(n){t.push(n)}Hv&&Vv.warn("Failed to get xhr response body",...t);return[void 0]}(a):[void 0],b=Mb(h,d,g),S=Mb(m,f,_);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:y?Cb(b,y):b,response:v?Cb(S,v):S}}(e,t,n),o=Tb("resource.xhr",r);kb(n.replay,o)}catch(r){Hv&&Vv.exception(r,"Failed to capture xhr breadcrumb")}}function Nb(e,t){const{xhr:n,input:r}=t;if(!n)return;const o=Eb(r),i=n.getResponseHeader("content-length")?xb(n.getResponseHeader("content-length")):function(e,t){try{return Eb("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e)}catch{return}}(n.response,n.responseType);void 0!==o&&(e.data.request_body_size=o);void 0!==i&&(e.data.response_body_size=i)}function Fb(e){const t=je();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(e,t)=>function(e,t,n){if(!t.data)return;try{if(function(e){return"xhr"===e.category}(t)&&function(e){return e?.xhr}(n)){Nb(t,n);Db(t,n,e)}if(function(e){return"fetch"===e.category}(t)&&function(e){return e?.response}(n)){!function(e,t){const{input:n,response:r}=t,o=Eb(n?Jm(n):void 0),i=r?xb(r.headers.get("content-length")):void 0;void 0!==o&&(e.data.request_body_size=o);void 0!==i&&(e.data.response_body_size=i)}(t,n);Lb(t,n,e)}}catch(r){Hv&&Vv.exception(r,"Error when enriching network breadcrumb")}}(a,e,t))}catch{}}function $b(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Ub(e,t,n){return function(e,t,n){let r,o,i;const s=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){u();r=e();return r}function u(){void 0!==o&&clearTimeout(o);void 0!==i&&clearTimeout(i);o=i=void 0}function l(){o&&clearTimeout(o);o=a(c,t);s&&void 0===i&&(i=a(c,s));return r}l.cancel=u;l.flush=function(){return void 0!==o||void 0!==i?c():r};return l}(e,t,{...n,setTimeoutImpl:Hm})}const jb=n.navigator;function Bb(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){Hv&&Vv.warn("Received replay event after session expired.");return}const o=r||!t;t=!0;e.clickDetector&&Ev(e.clickDetector,n);e.addUpdate(()=>{"buffer"===e.recordingMode&&o&&e.setInitialState();if(!ub(e,n,o))return!0;if(!o)return!1;const t=e.session;!function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;ub(e,function(e){const t=e.getOptions();return{type:v_.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o);if("buffer"===e.recordingMode&&t&&e.eventBuffer){const n=e.eventBuffer.getEarliestTimestamp();if(n){Hv&&Vv.log(`Updating session start time to earliest event in buffer to ${new Date(n)}`);t.started=n;e.getOptions().stickySession&&nb(t)}}if(t?.previousSessionId)return!0;"session"===e.recordingMode&&e.flush();return!0})}}async function Hb({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){const s=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length);n.set(t);n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=je(),f=Ne(),p=d?.getTransport(),h=d?.getDsn();if(!(d&&p&&h&&i.sampled))return On({});const m={type:"replay_event",replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit("preprocessEvent",r,o);const i=await Hn(e.getOptions(),r,o,t,e,Fe());if(!i)return null;e.emit("postprocessEvent",i,o);i.platform=i.platform||"javascript";const s=e.getSdkMetadata(),{name:a,version:c}=s?.sdk||{};i.sdk={...i.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"};return i}({scope:f,client:d,replayId:t,event:m});if(!g){d.recordDroppedEvent("event_processor","replay");Hv&&Vv.log("An event processor returned `null`, will not send event.");return On({})}delete g.sdkProcessingMetadata;const y=function(e,t,n,r){return Qt(fn(e,dn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,s,h,d.getOptions().tunnel);let _;try{_=await p.send(y)}catch(Aw){const t=new Error(Zg);try{t.cause=Aw}catch{}throw t}if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new zb(_.statusCode);const v=Ar({},_);if(Lr(v,"replay"))throw new qb(v);return _}class zb extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class qb extends Error{constructor(e){super("Rate limit hit");this.rateLimits=e}}async function Wb(e,t={count:0,interval:5e3}){const{recordingData:n,onError:r}=e;if(n.length)try{await Hb(e);return!0}catch(Aw){if(Aw instanceof zb||Aw instanceof qb)throw Aw;Jn("Replays",{_retryCount:t.count});r&&r(Aw);if(t.count>=3){const e=new Error(`${Zg} - max retries exceeded`);try{e.cause=Aw}catch{}throw e}t.interval*=++t.count;return new Promise((r,o)=>{Hm(async()=>{try{await Wb(e,t);r(!0)}catch(n){o(n)}},t.interval)})}}const Vb="__THROTTLED";function Gb(e,t,n){const r=new Map;let o=!1;return(...i)=>{const s=Math.floor(Date.now()/1e3);(e=>{const t=e-n;r.forEach((e,n)=>{n<t&&r.delete(n)})})(s);if([...r.values()].reduce((e,t)=>e+t,0)>=t){const e=o;o=!0;return e?"__SKIPPED":Vb}o=!1;const a=r.get(s)||0;r.set(s,a+1);return e(...i)}}class Jb{constructor({options:e,recordingOptions:t}){this.eventBuffer=null;this.performanceEntries=[];this.replayPerformanceEntries=[];this.recordingMode="session";this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5};this._lastActivity=Date.now();this._isEnabled=!1;this._isPaused=!1;this._requiresManualStart=!1;this._hasInitializedCoreListeners=!1;this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""};this._recordingOptions=t;this._options=e;this._debouncedFlush=Ub(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay});this._throttledAddEvent=Gb((e,t)=>function(e,t,n){return db(e,t)?lb(e,t,n):Promise.resolve(null)}(this,e,t),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new Sv(this,o));if(Hv){const t=e._experiments;Vv.setConfig({captureExceptions:!!t.captureExceptions,traceInternals:!!t.traceInternals})}this._handleVisibilityChange=()=>{"visible"===Yg.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()};this._handleWindowBlur=()=>{const e=xv({category:"ui.blur"});this._doChangeToBackgroundTasks(e)};this._handleWindowFocus=()=>{const e=xv({category:"ui.focus"});this._doChangeToForegroundTasks(e)};this._handleKeyboardEvent=e=>{Ov(this,e)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}handleException(e){Hv&&Vv.exception(e);this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;this._requiresManualStart=r;if(!r){this._initializeSessionForSampling(e);if(this.session){if(!1!==this.session.sampled){this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session";Hv&&Vv.infoTick(`Starting replay in ${this.recordingMode} mode`);this._initializeRecording()}}else Hv&&Vv.exception(new Error("Unable to initialize and create session"))}}start(){if(this._isEnabled&&"session"===this.recordingMode){Hv&&Vv.log("Recording is already in progress");return}if(this._isEnabled&&"buffer"===this.recordingMode){Hv&&Vv.log("Buffering is in progress, call `flush()` to save the replay");return}Hv&&Vv.infoTick("Starting replay in session mode");this._updateUserActivity();const e=cb({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e;this.recordingMode="session";this._initializeRecording()}startBuffering(){if(this._isEnabled){Hv&&Vv.log("Buffering is in progress, call `flush()` to save the replay");return}Hv&&Vv.infoTick("Starting replay in buffer mode");const e=cb({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e;this.recordingMode="buffer";this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=uv({...this._recordingOptions,..."buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Bb(this),.../iPhone|iPad|iPod/i.test(jb?.userAgent??"")||/Macintosh/i.test(jb?.userAgent??"")&&jb?.maxTouchPoints&&jb?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{},onMutation:this._onMutationHandler.bind(this),...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(Aw){this.handleException(Aw)}}stopRecording(){try{if(this._stopRecording){this._stopRecording();this._stopRecording=void 0}return!0}catch(Aw){this.handleException(Aw);return!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;this.recordingMode="buffer";try{Hv&&Vv.log("Stopping Replay"+(t?` triggered by ${t}`:""));vb();this._removeListeners();this.stopRecording();this._debouncedFlush.cancel();e&&await this._flush({force:!0});this.eventBuffer?.destroy();this.eventBuffer=null;eb(this)}catch(Aw){this.handleException(Aw)}}}pause(){if(!this._isPaused){this._isPaused=!0;this.stopRecording();Hv&&Vv.log("Pausing replay")}}resume(){if(this._isPaused&&this._checkSession()){this._isPaused=!1;this.startRecording();Hv&&Vv.log("Resuming replay")}}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Hv&&Vv.log("Converting buffer to session");await this.flushImmediate();const n=this.stopRecording();if(e&&n&&"session"!==this.recordingMode){this.recordingMode="session";if(this.session){this._updateUserActivity(t);this._updateSessionActivity(t);this._maybeSaveSession()}this.startRecording()}}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&this._isEnabled&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){this._updateUserActivity();if(this._stopRecording){this.checkAndHandleExpiredSession();this._updateSessionActivity()}else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity();this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){this._debouncedFlush();return this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session?.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&ib(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Yg.location.pathname}${Yg.location.hash}${Yg.location.search}`,t=`${Yg.location.origin}${e}`;this.performanceEntries=[];this.replayPerformanceEntries=[];this._clearContext();this._context.initialUrl=t;this._context.initialTimestamp=Date.now();this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Vb){const e=xv({category:"replay.throttled"});this.addUpdate(()=>!ub(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}}))}return n}getCurrentRoute(){const e=this.lastActiveSpan||Ot(),t=e&&Rt(e),n=(t&&kt(t).data||{})[He];if(t&&n&&["route","custom"].includes(n))return kt(t).description}_initializeRecording(){this.setInitialState();this._updateSessionActivity();this.eventBuffer=Zv({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl});this._removeListeners();this._addListeners();this._isEnabled=!0;this._isPaused=!1;this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=cb({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;if(ab(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})){this._refreshSession(e);return!1}return!0}async _refreshSession(e){if(this._isEnabled){await this.stop({reason:"refresh session"});this.initializeSampling(e.id)}}_addListeners(){try{Yg.document.addEventListener("visibilitychange",this._handleVisibilityChange);Yg.addEventListener("blur",this._handleWindowBlur);Yg.addEventListener("focus",this._handleWindowFocus);Yg.addEventListener("keydown",this._handleKeyboardEvent);this.clickDetector&&this.clickDetector.addListeners();if(!this._hasInitializedCoreListeners){!function(e){const t=je();Pm(Mv(e));Fm(wb(e));yb(e);Fb(e);Xn(bb(e));if(t){t.on("beforeSendEvent",gb(e));t.on("afterSendEvent",mb(e));t.on("createDsc",t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)});t.on("spanStart",t=>{e.lastActiveSpan=t});t.on("spanEnd",t=>{e.lastActiveSpan=t});t.on("beforeSendFeedback",async(t,n)=>{const r=e.getSessionId();if(n?.includeReplay&&e.isEnabled()&&r&&t.contexts?.feedback){"api"===t.contexts.feedback.source&&await e.sendBufferedReplayOrFlush();t.contexts.feedback.replay_id=r}});t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()})}}(this);this._hasInitializedCoreListeners=!0}}catch(Aw){this.handleException(Aw)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];["navigation","paint","resource"].forEach(e=>{r.push(tm(e,n))});r.push(Zh(Av(Nv,e)),Xh(Av($v,e)),Qh(Av(Uv,e)),em(Av(jv,e)));return()=>{r.forEach(e=>e())}}(this)}_removeListeners(){try{Yg.document.removeEventListener("visibilitychange",this._handleVisibilityChange);Yg.removeEventListener("blur",this._handleWindowBlur);Yg.removeEventListener("focus",this._handleWindowFocus);Yg.removeEventListener("keydown",this._handleKeyboardEvent);this.clickDetector&&this.clickDetector.removeListeners();this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(Aw){this.handleException(Aw)}}_doChangeToBackgroundTasks(e){if(!this.session)return;if(!sb(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})){e&&this._createCustomBreadcrumb(e);this.conditionalFlush()}}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Hv&&Vv.log("Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){if(this.session){this.session.lastActivity=e;this._maybeSaveSession()}}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:v_.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){let e=(t=this.performanceEntries,t.map(Pv).filter(Boolean)).concat(this.replayPerformanceEntries);var t;this.performanceEntries=[];this.replayPerformanceEntries=[];if(this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter(e=>e.start>=t)}return Promise.all(Sb(this,e))}_clearContext(){this._context.errorIds.clear();this._context.traceIds.clear();this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};this._clearContext();return e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){await this._addPerformanceEntries();if(this.eventBuffer?.hasEvents){await async function(e){try{return Promise.all(Sb(e,[$b(Yg.performance.memory)]))}catch{return[]}}(this);if(this.eventBuffer&&e===this.getSessionId())try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Wb({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,timestamp:t,onError:e=>this.handleException(e)})}catch(Aw){this.handleException(Aw);this.stop({reason:"sendReplay"});const t=je();if(t){const n=Aw instanceof qb?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}}else Hv&&Vv.error("No session or eventBuffer found to flush.")}async _flush({force:e=!1}={}){if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){Hv&&Vv.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o){Hv&&Vv.log(`Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`);r&&this._debouncedFlush();return}const i=this.eventBuffer;i&&0===this.session.segmentId&&!i.hasCheckout&&Hv&&Vv.log("Flushing initial segment without checkout.");const s=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(Aw){this.handleException(Aw)}finally{this._flushLock=void 0;s&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&nb(this.session)}_onMutationHandler(e){const{ignoreMutations:t}=this._options._experiments;if(t?.length&&e.some(e=>{const n=function(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}(e.target),r=t.join(",");return n?.matches(r)}))return!1;const n=e.length,r=this._options.mutationLimit,o=r&&n>r;if(n>this._options.mutationBreadcrumbLimit||o){const e=xv({category:"replay.mutations",data:{count:n,limit:o}});this._createCustomBreadcrumb(e)}if(o){this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode});return!1}return!0}}function Kb(e,t){return[...e,...t].join(",")}const Yb='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Xb=["content-length","content-type","accept"];let Zb=!1;class Qb{constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:i=!0,workerUrl:s,_experiments:a={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:d=750,mutationLimit:f=1e4,slowClickTimeout:p=7e3,slowClickIgnoreSelectors:h=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:g=[],networkCaptureBodies:y=!0,networkRequestHeaders:_=[],networkResponseHeaders:v=[],mask:b=[],maskAttributes:S=["title","placeholder","aria-label"],unmask:w=[],block:k=[],unblock:E=[],ignore:x=[],maskFn:C,beforeAddRecordingEvent:T,beforeErrorSampling:I,onError:M}={}){this.name="Replay";const R=function({mask:e,unmask:t,block:n,unblock:r,ignore:o}){return{maskTextSelector:Kb(e,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:Kb(t,[]),blockSelector:Kb(n,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:Kb(r,[]),ignoreSelector:Kb(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:b,unmask:w,block:k,unblock:E,ignore:x});this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i:i}({maskAttributes:S,maskAllText:c,privacyOptions:R,key:e,value:t,el:n}),...R,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch{}},recordCrossOriginIframes:Boolean(a.recordCrossOriginIframes)};this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,ny),stickySession:o,useCompression:i,workerUrl:s,blockAllMedia:l,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:d,mutationLimit:f,slowClickTimeout:p,slowClickIgnoreSelectors:h,networkDetailAllowUrls:m,networkDetailDenyUrls:g,networkCaptureBodies:y,networkRequestHeaders:eS(_),networkResponseHeaders:eS(v),beforeAddRecordingEvent:T,beforeErrorSampling:I,onError:M,_experiments:a};this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Yb}`:Yb);if(this._isInitialized&&zi())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Zb}set _isInitialized(e){Zb=e}afterAllSetup(e){if(zi()&&!this._replay){this._setup(e);this._initialize(e)}}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){if(!this._replay)return Promise.resolve();if(!this._replay.isEnabled()){this._replay.start();return Promise.resolve()}return this._replay.sendBufferedReplayOrFlush(e)}getReplayId(){if(this._replay?.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(e){if(this._replay){this._maybeLoadFromReplayCanvasIntegration(e);this._replay.initializeSampling()}}_setup(e){const t=function(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=ft(n.replaysSessionSampleRate),i=ft(n.replaysOnErrorSampleRate);null==o&&null==i&&u(()=>{});null!=o&&(r.sessionSampleRate=o);null!=i&&(r.errorSampleRate=i);return r}(this._initialOptions,e);this._replay=new Jb({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch{}}}function eS(e){return[...Xb,...e.map(e=>e.toLowerCase())]}var tS=Object.defineProperty,nS=(e,t,n)=>((e,t,n)=>t in e?tS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class rS{constructor(){nS(this,"idNodeMap",new Map);nS(this,"nodeMetaMap",new WeakMap)}getId(e){if(!e)return-1;const t=this.getMeta(e)?.id;return t??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t);e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e);this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map;this.nodeMetaMap=new WeakMap}}function oS(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:oS(e.parentNode,t,n,r+1):-1}function iS(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch{return!1}}}const sS="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let aS={map:{},getId(){console.error(sS);return-1},getNode(){console.error(sS);return null},removeNodeFromMap(){console.error(sS)},has(){console.error(sS);return!1},reset(){console.error(sS)}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(aS=new Proxy(aS,{get(e,t,n){"map"===t&&console.error(sS);return Reflect.get(e,t,n)}}));function cS(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);o.Object.defineProperty(e,t,r?n:{set(e){hS(()=>{n.set.call(this,e)},0);i&&i.set&&i.set.call(this,e)}});return()=>cS(e,t,i||{},!0)}function uS(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);if("function"==typeof o){o.prototype=o.prototype||{};Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})}e[t]=o;return()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function lS(e,t,n,r,o){if(!e)return!1;const i=function(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(t){return null}}(e);if(!i)return!1;const s=iS(t,n);if(!o){const e=r&&i.matches(r);return s(i)&&!e}const a=oS(i,s);let c=-1;if(a<0)return!1;r&&(c=oS(i,iS(null,r)));return a>-1&&c<0||a<c}const dS={};function fS(e){const t=dS[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0;n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]);n.head.removeChild(t)}catch(o){}return dS[e]=r.bind(window)}function pS(...e){return fS("requestAnimationFrame")(...e)}function hS(...e){return fS("setTimeout")(...e)}var mS=(e=>{e[e["2D"]=0]="2D";e[e.WebGL=1]="WebGL";e[e.WebGL2=2]="WebGL2";return e})(mS||{});let gS;const yS=e=>{if(!gS)return e;return(...t)=>{try{return e(...t)}catch(n){if(gS&&!0===gS(n))return()=>{};throw n}}};for(var _S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vS="undefined"==typeof Uint8Array?[]:new Uint8Array(256),bS=0;bS<64;bS++)vS[_S.charCodeAt(bS)]=bS;const SS=new Map;const wS=(e,t,n)=>{if(!e||!xS(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=SS.get(e);if(!n){n=new Map;SS.set(e,n)}n.has(t)||n.set(t,[]);return n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);if(-1===o){o=r.length;r.push(e)}return o};function kS(e,t,n){if(e instanceof Array)return e.map(e=>kS(e,t,n));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){return{rr_type:e.constructor.name,base64:function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3){o+=_S[n[t]>>2];o+=_S[(3&n[t])<<4|n[t+1]>>4];o+=_S[(15&n[t+1])<<2|n[t+2]>>6];o+=_S[63&n[t+2]]}r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"==");return o}(e)}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[kS(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[kS(e.data,t,n),e.width,e.height]}}if(xS(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:wS(e,t,n)}}return e}const ES=(e,t,n)=>e.map(e=>kS(e,t,n)),xS=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(e=>"function"==typeof t[e]);return Boolean(n.find(n=>e instanceof t[n]))};function CS(e,t,n,r,o){const i=[];try{const s=uS(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(i,...s){if(!lS(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);"__context"in this||(this.__context=e);if(o&&["webgl","webgl2"].includes(e))if(s[0]&&"object"==typeof s[0]){const e=s[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...s])}});i.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(e=>e())}}function TS(e,t,n,r,o,i,s,a){const c=[],u=Object.getOwnPropertyNames(e);for(const l of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if("function"!=typeof e[l])continue;const s=uS(e,l,function(e){return function(...s){const c=e.apply(this,s);wS(c,a,this);if("tagName"in this.canvas&&!lS(this.canvas,r,o,i,!0)){const e=ES(s,a,this),r={type:t,property:l,args:e};n(this.canvas,r)}return c}});c.push(s)}catch{const r=cS(e,l,{set(e){n(this.canvas,{type:t,property:l,args:[e],setter:!0})}});c.push(r)}return c}class IS{constructor(e){this.pendingCanvasMutations=new Map;this.rafStamps={latestId:0,invokeId:null};this.shadowDoms=new Set;this.windowsSet=new WeakSet;this.windows=[];this.restoreHandlers=[];this.frozen=!1;this.locked=!1;this.snapshotInProgressMap=new Map;this.worker=null;this.lastSnapshotTime=0;this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId);this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]);this.pendingCanvasMutations.get(e).push(t)};const{enableManualSnapshot:t,sampling:n="all",win:r,recordCanvas:o,errorHandler:i}=e;e.sampling=n;this.mutationCb=e.mutationCb;this.mirror=e.mirror;this.options=e;i&&(gS=i);(o&&"number"==typeof n||t)&&(this.worker=this.initFPSWorker());this.addWindow(r);t||yS(()=>{if(o&&"all"===n){this.startRAFTimestamping();this.startPendingCanvasMutationFlusher()}o&&"number"==typeof n&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear();this.restoreHandlers.forEach(e=>{try{e()}catch(t){}});this.restoreHandlers=[];this.windowsSet=new WeakSet;this.windows=[];this.shadowDoms=new Set;this.worker?.terminate();this.worker=null;this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(e){const{sampling:t="all",blockClass:n,blockSelector:r,unblockSelector:o,recordCanvas:i,enableManualSnapshot:s}=this.options;if(!this.windowsSet.has(e))if(s){this.windowsSet.add(e);this.windows.push(new WeakRef(e))}else{yS(()=>{i&&"all"===t&&this.initCanvasMutationObserver(e,n,r,o);if(i&&"number"==typeof t){const t=CS(e,n,r,o,!0);this.restoreHandlers.push(()=>{t()})}})();this.windowsSet.add(e);this.windows.push(new WeakRef(e))}}addShadowRoot(e){this.shadowDoms.add(new WeakRef(e))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(e,t){t?.skipRequestAnimationFrame?this.takeSnapshot(performance.now(),!0,e):pS(t=>this.takeSnapshot(t,!0,e))}initFPSWorker(){const e=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());e.onmessage=e=>{const t=e.data,{id:n}=t;this.snapshotInProgressMap.set(n,!1);if(!("base64"in t))return;const{base64:r,type:o,width:i,height:s}=t;this.mutationCb({id:n,type:mS["2D"],commands:[{property:"clearRect",args:[0,0,i,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,i,s]}]})};return e}initCanvasFPSObserver(){let e;if(!this.windows.length&&!this.shadowDoms.size)return;const t=n=>{this.takeSnapshot(n,!1);e=pS(t)};e=pS(t);this.restoreHandlers.push(()=>{e&&cancelAnimationFrame(e)})}initCanvasMutationObserver(e,t,n,r){const o=CS(e,t,n,r,!1),i=function(e,t,n,r,o){const i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of s)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const s=uS(t.CanvasRenderingContext2D.prototype,a,function(i){return function(...s){lS(this.canvas,n,r,o,!0)||hS(()=>{const n=ES(s,t,this);e(this.canvas,{type:mS["2D"],property:a,args:n})},0);return i.apply(this,s)}});i.push(s)}catch{const n=cS(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:mS["2D"],property:a,args:[t],setter:!0})}});i.push(n)}return()=>{i.forEach(e=>e())}}(this.processMutation.bind(this),e,t,n,r),s=function(e,t,n,r,o){const i=[];i.push(...TS(t.WebGLRenderingContext.prototype,mS.WebGL,e,n,r,o,0,t));void 0!==t.WebGL2RenderingContext&&i.push(...TS(t.WebGL2RenderingContext.prototype,mS.WebGL2,e,n,r,o,0,t));return()=>{i.forEach(e=>e())}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.restoreHandlers.push(()=>{o();i();s()})}getCanvasElements(e,t,n){const r=[],o=o=>{o.querySelectorAll("canvas").forEach(o=>{lS(o,e,t,n,!0)||r.push(o)})};for(const i of this.windows){const e=i.deref();let t;try{t=e&&e.document}catch{}t&&o(t)}for(const i of this.shadowDoms){const e=i.deref();e&&o(e)}return r}takeSnapshot(e,t,n){const{sampling:r,blockClass:o,blockSelector:i,unblockSelector:s,dataURLOptions:a,maxCanvasSize:c}=this.options,u=1e3/("all"===r?2:r||2);if(this.lastSnapshotTime&&e-this.lastSnapshotTime<u)return!1;this.lastSnapshotTime=e;(n?[n]:this.getCanvasElements(o,i,s)).forEach(e=>{const n=this.mirror.getId(e);if(this.mirror.hasNode(e)&&e.width&&e.height&&!this.snapshotInProgressMap.get(n)){this.snapshotInProgressMap.set(n,!0);if(!t&&["webgl","webgl2"].includes(e.__context)){const t=e.getContext(e.__context);!1===t?.getContextAttributes()?.preserveDrawingBuffer&&t.clear(t.COLOR_BUFFER_BIT)}createImageBitmap(e).then(t=>{this.worker?.postMessage({id:n,bitmap:t,width:e.width,height:e.height,dataURLOptions:a,maxCanvasSize:c},[t])}).catch(e=>{yS(()=>{this.snapshotInProgressMap.delete(n);throw e})()})}});return!0}startPendingCanvasMutationFlusher(){pS(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t;pS(e)};pS(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)});pS(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map(e=>{const{type:t,...n}=e;return n}),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r});this.pendingCanvasMutations.delete(e)}}try{if(2!==Array.from([1],e=>2*e)[0]){const e=document.createElement("iframe");document.body.appendChild(e);Array.from=e.contentWindow?.Array.from||Array.from;document.body.removeChild(e)}}catch(Aw){}new rS;var MS;!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(MS||(MS={}));const RS={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},OS=1280,LS=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,OS):OS,n?Math.min(n,OS):OS]};let o;const i=new Promise(e=>o=e);return{name:"ReplayCanvas",getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new IS({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch{}}});o(r);return r},...RS[e]||RS.medium}},async snapshot(e,t){(await i).snapshot(e,t)}}};function AS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return((be()||performance.timeOrigin)+e)/1e3}const PS=new WeakMap,DS=new Map,NS={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function FS(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:a,onRequestSpanStart:c}={...NS,...t},u="function"==typeof i?i:e=>!0,l=e=>function(e,t){const n=Y();if(n){let r,o;try{r=new URL(e,n);o=new URL(n).origin}catch{return!1}const i=r.origin===o;return t?ne(r.toString(),t)||i&&ne(r.pathname,t):i}{const n=!!e.match(/^\/(?!\/)/);return t?ne(e,t):n}}(e,a),d={};if(n){e.addEventProcessor(e=>{"transaction"===e.type&&e.spans&&e.spans.forEach(e=>{if("http.client"===e.op){const t=DS.get(e.span_id);if(t){e.timestamp=t/1e3;DS.delete(e.span_id)}}});return e});o&&function(e){const t="fetch-body-resolved";E(t,e);x(t,()=>pi(hi))}(e=>{if(e.response){const t=PS.get(e.response);t&&e.endTimestamp&&DS.set(t,e.endTimestamp)}});fi(e=>{const t=ti(e,u,l,d);e.response&&e.fetchData.__span&&PS.set(e.response,e.fetchData.__span);if(t){const n=US(e.fetchData.url),r=n?Qo(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r});s&&$S(t);null==c||c(t,{headers:e.headers})}})}r&&qm(e=>{const t=function(e,t,n,r){const o=e.xhr,i=null==o?void 0:o[zm];if(!o||o.__sentry_own_request__||!i)return;const{url:s,method:a}=i,c=Dt()&&t(s);if(e.endTimestamp&&c){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];if(t&&void 0!==i.status_code){rt(t,i.status_code);t.end();delete r[e]}return}const u=US(s),l=Qo(u||s),d=ei(s),f=!!Ot(),p=c&&f?Sn({name:`${a} ${d}`,attributes:{url:s,type:"xhr","http.method":a,"http.url":u,"server.address":null==l?void 0:l.host,[Ve]:"auto.http.browser",[We]:"http.client",...(null==l?void 0:l.search)&&{"http.query":null==l?void 0:l.search},...(null==l?void 0:l.hash)&&{"http.fragment":null==l?void 0:l.hash}}}):new Jt;o.__sentry_xhr_span_id__=p.spanContext().spanId;r[o.__sentry_xhr_span_id__]=p;n(s)&&function(e,t){const{"sentry-trace":n,baggage:r}=qr({span:t});n&&function(e,t,n){var r;const o=null===(r=e.__sentry_xhr_v3__)||void 0===r?void 0:r.request_headers;if(null!=o&&o["sentry-trace"])return;try{e.setRequestHeader("sentry-trace",t);if(n){const t=null==o?void 0:o.baggage;t&&t.split(",").some(e=>e.trim().startsWith("sentry-"))||e.setRequestHeader("baggage",n)}}catch{}}(e,n,r)}(o,Dt()&&f?p:void 0);const h=je();h&&h.emit("beforeOutgoingRequestSpan",p,e);return p}(e,u,l,d);if(t){s&&$S(t);let r;try{var n;r=new Headers(null===(n=e.xhr.__sentry_xhr_v3__)||void 0===n?void 0:n.request_headers)}catch{}null==c||c(t,{headers:r})}})}function $S(e){const{url:t}=kt(e).data;if(!t||"string"!=typeof t)return;const n=tm("resource",r=>{let{entries:o}=r;o.forEach(r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){const t=function(e){const t=[];if(null!=e.nextHopProtocol){const{name:n,version:r}=gm(e.nextHopProtocol);t.push(["network.protocol.version",r],["network.protocol.name",n])}return be()?[...t,["http.request.redirect_start",AS(e.redirectStart)],["http.request.fetch_start",AS(e.fetchStart)],["http.request.domain_lookup_start",AS(e.domainLookupStart)],["http.request.domain_lookup_end",AS(e.domainLookupEnd)],["http.request.connect_start",AS(e.connectStart)],["http.request.secure_connection_start",AS(e.secureConnectionStart)],["http.request.connection_end",AS(e.connectEnd)],["http.request.request_start",AS(e.requestStart)],["http.request.response_start",AS(e.responseStart)],["http.request.response_end",AS(e.responseEnd)]]:t}(r);t.forEach(t=>e.setAttribute(...t));setTimeout(n)}})})}function US(e){try{return new URL(e,Np.location.origin).href}catch{return}}const jS="sentry_previous_trace",BS="sentry.previous_trace";function HS(e,t){let{linkPreviousTrace:n,consistentTraceSampling:r}=t;const o="session-storage"===n;let i=o?function(){try{var e;const t=null===(e=Np.sessionStorage)||void 0===e?void 0:e.getItem(jS);return JSON.parse(t)}catch{return}}():void 0;e.on("spanStart",e=>{if(Rt(e)!==e)return;const t=Ne().getPropagationContext();i=function(e,t,n){const r=kt(t);function o(){try{var e,t,o;return null!==(e=Number(null===(t=n.dsc)||void 0===t?void 0:t.sample_rate))&&void 0!==e?e:Number(null===(o=r.data)||void 0===o?void 0:o[ze])}catch{return 0}}const i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return i;const s=e.spanContext;if(s.traceId===r.trace_id)return e;if(Date.now()/1e3-e.startTimestamp<=3600){_g&&p.log(`Adding previous_trace ${s} link to span ${{op:r.op,...t.spanContext()}}`);t.addLink({context:s,attributes:{[tt]:"previous_trace"}});t.setAttribute(BS,`${s.traceId}-${s.spanId}-${zS(s)?1:0}`)}return i}(i,e,t);o&&function(e){try{Np.sessionStorage.setItem(jS,JSON.stringify(e))}catch(t){_g&&p.warn("Could not store previous trace in sessionStorage",t)}}(i)});let s=!0;r&&e.on("beforeSampling",e=>{if(!i)return;const t=Ne(),n=t.getPropagationContext();if(s&&n.parentSpanId)s=!1;else{t.setPropagationContext({...n,dsc:{...n.dsc,sample_rate:String(i.sampleRate),sampled:String(zS(i.spanContext))},sampleRand:i.sampleRand});e.parentSampled=zS(i.spanContext);e.parentSampleRate=i.sampleRate;e.spanAttributes={...e.spanAttributes,[qe]:i.sampleRate}}})}function zS(e){return 1===e.traceFlags}const qS={...Mn,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{},...NS};function WS(e,t,n){e.emit("startPageLoadSpan",t,n);Ne().setTransactionName(t.name);const r=KS(e);r&&e.emit("afterStartPageLoadSpan",r);return r}function VS(e,t,n){const{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o});e.emit("startNavigationSpan",t,{isRedirect:o});const i=Ne();i.setTransactionName(t.name);r&&!o&&i.setSDKProcessingMetadata({normalizedRequest:{...jp(),url:r}});return KS(e)}function GS(e){const t=Np.document,n=null==t?void 0:t.querySelector(`meta[name=${e}]`);return(null==n?void 0:n.getAttribute("content"))||void 0}const JS="_sentry_idleSpan";function KS(e){return e[JS]}function YS(e,t){oe(e,JS,t)}const XS=.3;function ZS(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result);e.onabort=e.onerror=()=>n(e.error)})}function QS(e){return ZS(e.getAllKeys())}function ew(e){let t;function n(){null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=ZS(n);return e=>r.then(n=>e(n.transaction(t,"readwrite").objectStore(t)))}(e.dbName||"sentry-offline",e.storeName||"queue"));return t}return{push:async t=>{try{const r=await on(t);await function(e,t,n){return e(e=>QS(e).then(r=>{if(!(r.length>=n)){e.put(t,Math.max(...r,0)+1);return ZS(e.transaction)}}))}(n(),r,e.maxQueueSize||30)}catch{}},unshift:async t=>{try{const r=await on(t);await function(e,t,n){return e(e=>QS(e).then(r=>{if(!(r.length>=n)){e.put(t,Math.min(...r,0)-1);return ZS(e.transaction)}}))}(n(),r,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const e=await function(e){return e(e=>QS(e).then(t=>{const n=t[0];if(null!=n)return ZS(e.get(n)).then(t=>{e.delete(n);return ZS(e.transaction).then(()=>t)})}))}(n());if(e)return sn(e)}catch{}}}}var tw;const nw=1e6,rw=String(0),ow="main",iw=Np.navigator;let sw="",aw="",cw="",uw=(null==iw?void 0:iw.userAgent)||"",lw="";const dw=(null==iw?void 0:iw.language)||(null==iw||null===(tw=iw.languages)||void 0===tw?void 0:tw[0])||"";const fw=null==iw?void 0:iw.userAgentData;"object"==typeof(pw=fw)&&null!==pw&&"getHighEntropyValues"in pw&&fw.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;sw=e.platform||"";cw=e.architecture||"";lw=e.model||"";aw=e.platformVersion||"";if(null!==(t=e.fullVersionList)&&void 0!==t&&t.length){const t=e.fullVersionList[e.fullVersionList.length-1];uw=`${t.brand} ${t.version}`}}).catch(e=>{});var pw;function hw(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[rw]:{name:ow}}},o=e.samples[0];if(!o)return r;const i=o.timestamp,s=be(),a="number"==typeof performance.timeOrigin?performance.timeOrigin:s||0,c=a-(s||a);e.samples.forEach((o,s)=>{if(void 0===o.stackId){if(void 0===t){t=n;r.stacks[t]=[];n++}r.samples[s]={elapsed_since_start_ns:((o.timestamp+c-i)*nw).toFixed(0),stack_id:t,thread_id:rw};return}let a=e.stacks[o.stackId];const u=[];for(;a;){u.push(a.frameId);const t=e.frames[a.frameId];t&&void 0===r.frames[a.frameId]&&(r.frames[a.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column});a=void 0===a.parentId?void 0:e.stacks[a.parentId]}const l={elapsed_since_start_ns:((o.timestamp+c-i)*nw).toFixed(0),stack_id:n,thread_id:rw};r.stacks[n]=u;r.samples[s]=l;n++});return r}(e):e}function mw(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){var t;const n=null===(t=e.contexts)||void 0===t||null===(t=t.trace)||void 0===t?void 0:t.trace_id;"string"==typeof n&&32!==n.length&&_g&&p.log(`[Profiling] Invalid traceId: ${n} on profiled event`);return"string"!=typeof n?"":n}(r),i=hw(n),s=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:1e3*ve()),a="number"==typeof r.timestamp?1e3*r.timestamp:1e3*ve();return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Nt,runtime:{name:"javascript",version:Np.navigator.userAgent},os:{name:sw,version:aw,build_number:uw},device:{locale:dw,model:lw,manufacturer:uw,architecture:cw,is_emulator:!1},debug_meta:{images:yw(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||le(),trace_id:o,active_thread_id:rw,relative_start_ns:"0",relative_end_ns:(1e6*(a-s)).toFixed(0)}]}}function gw(e){return"pageload"===kt(e).op}function yw(e){const t=je(),n=null==t?void 0:t.getOptions(),r=null==n?void 0:n.stackParser;return r?function(e,t){const n=Bn(e);if(!n)return[];const r=[];for(const o of t)o&&n[o]&&r.push({type:"sourcemap",code_file:o,debug_id:n[o]});return r}(r,e):[]}let _w=!1;function vw(e){if(_w){_g&&p.log("[Profiling] Profiling has been disabled for the duration of the current user session.");return!1}if(!e.isRecording()){_g&&p.log("[Profiling] Discarding profile because transaction was not sampled.");return!1}const t=je(),n=null==t?void 0:t.getOptions();if(!n){_g&&p.log("[Profiling] Profiling disabled, no options found.");return!1}const r=n.profilesSampleRate;if(!function(e){if("number"!=typeof e&&"boolean"!=typeof e||"number"==typeof e&&isNaN(e)){_g&&p.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`);return!1}if(!0===e||!1===e)return!0;if(e<0||e>1){_g&&p.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`);return!1}return!0}(r)){_g&&p.warn("[Profiling] Discarding profile because of invalid sample rate.");return!1}if(!r){_g&&p.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0");return!1}if(!(!0===r||Math.random()<r)){_g&&p.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`);return!1}return!0}function bw(e,t,n,r){return function(e){if(e.samples.length<2){_g&&p.log("[Profiling] Discarding profile because it contains less than 2 samples");return!1}if(!e.frames.length){_g&&p.log("[Profiling] Discarding profile because it contains no frames");return!1}return!0}(n)?mw(e,t,n,r):null}const Sw=new Map;function ww(e){const t=Sw.get(e);t&&Sw.delete(e);return t}function kw(e){let t;gw(e)&&(t=1e3*ve());const n=function(){const e=Np.Profiler;if(!(t=e,"function"==typeof t)){_g&&p.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}var t;const n=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:n})}catch(r){if(_g){p.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header.");p.log("[Profiling] Disabling profiling for current user session.")}_w=!0}}();if(!n)return;_g&&p.log(`[Profiling] started profiling span: ${kt(e).description}`);const r=le();Ne().setContext("profile",{profile_id:r,start_timestamp:t});async function o(){if(e&&n)return n.stop().then(t=>{if(i){Np.clearTimeout(i);i=void 0}_g&&p.log(`[Profiling] stopped profiling of span: ${kt(e).description}`);t?function(e,t){Sw.set(e,t);if(Sw.size>30){const e=Sw.keys().next().value;Sw.delete(e)}}(r,t):_g&&p.log(`[Profiling] profiler returned null profile for: ${kt(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")}).catch(e=>{_g&&p.log("[Profiling] error while stopping profiler:",e)})}let i=Np.setTimeout(()=>{_g&&p.log("[Profiling] max profile duration elapsed, stopping profiling for:",kt(e).description);o()},3e4);const s=e.end.bind(e);e.end=function(){if(!e)return s();o().then(()=>{s()},()=>{s()});return e}}const Ew=()=>({name:"BrowserProfiling",setup(e){const t=Ot(),n=t&&Rt(t);n&&gw(n)&&vw(n)&&kw(n);e.on("spanStart",e=>{e===Rt(e)&&vw(e)&&kw(e)});e.on("beforeEnvelope",e=>{if(!Sw.size)return;const t=function(e){const t=[];tn(e,(e,n)=>{if("transaction"===n)for(let o=1;o<e.length;o++){var r;const n=e[o];null!=n&&null!==(r=n.contexts)&&void 0!==r&&null!==(r=r.profile)&&void 0!==r&&r.profile_id&&t.push(e[o])}});return t}(e);if(!t.length)return;const n=[];for(const i of t){var r,o;const e=null==i?void 0:i.contexts,t=null==e||null===(r=e.profile)||void 0===r?void 0:r.profile_id,s=null==e||null===(o=e.profile)||void 0===o?void 0:o.start_timestamp;if("string"!=typeof t){_g&&p.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!t){_g&&p.log("[Profiling] cannot find profile for a span without a profile context");continue}null!=e&&e.profile&&delete e.profile;const a=ww(t);if(!a){_g&&p.log(`[Profiling] Could not retrieve profile for span: ${t}`);continue}const c=bw(t,s,a,i);c&&n.push(c)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)})}});const xw=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sidecarUrl||"http://localhost:8969/stream";return{name:"SpotlightBrowser",setup:()=>{_g&&p.log("Using Sidecar URL",e)},processEvent:e=>function(e){var t;return Boolean("transaction"===e.type&&e.spans&&(null===(t=e.contexts)||void 0===t?void 0:t.trace)&&"ui.action.click"===e.contexts.trace.op&&e.spans.some(e=>{let{description:t}=e;return null==t?void 0:t.includes("#sentry-spotlight")}))}(e)?null:e,afterAllSetup:t=>{!function(e,t){const n=jm("fetch");let r=0;e.on("beforeEnvelope",e=>{r>3?p.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r):n(t,{method:"POST",body:on(e),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(e=>{e.status>=200&&e.status<400&&(r=0)},e=>{r++;p.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",e)})})}(t,e)}}};const Cw=()=>({name:"LaunchDarkly",processEvent:(e,t,n)=>Vo(e)});const Tw=()=>({name:"OpenFeature",processEvent:(e,t,n)=>Vo(e)});const Iw=e=>{let{featureFlagClientClass:t}=e;return{name:"Unleash",setupOnce(){re(t.prototype,"isEnabled",Mw)},processEvent:(e,t,n)=>Vo(e)}};function Mw(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0],i=e.apply(this,n);if("string"==typeof o&&"boolean"==typeof i){Go(o,i);Jo(o,i)}else _g&&p.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${o} (${typeof o}), result: ${i} (${typeof i})`);return i}}const Rw=e=>{let{featureFlagClient:t}=e;return{name:"Statsig",setup(e){t.on("gate_evaluation",e=>{Go(e.gate.name,e.gate.value);Jo(e.gate.name,e.gate.value)})},processEvent:(e,t,n)=>Vo(e)}};const Ow=e=>{let{worker:t}=e;return{name:"WebWorker",setupOnce:()=>{(Array.isArray(t)?t:[t]).forEach(e=>Lw(e))},addWorker:e=>Lw(e)}};function Lw(e){e.addEventListener("message",e=>{if(B(t=e.data)&&!0===t._sentryMessage&&"_sentryDebugIds"in t&&(B(t._sentryDebugIds)||void 0===t._sentryDebugIds)){e.stopImmediatePropagation();_g&&p.log("Sentry debugId web worker message received",e.data);Np._sentryDebugIds={...e.data._sentryDebugIds,...Np._sentryDebugIds}}var t})}e.BrowserClient=ah;e.OpenFeatureIntegrationHook=class{after(e,t){Go(t.flagKey,t.value);Jo(t.flagKey,t.value)}error(e,t,n){Go(e.flagKey,e.defaultValue);Jo(e.flagKey,e.defaultValue)}};e.SDK_VERSION=r;e.SEMANTIC_ATTRIBUTE_SENTRY_OP=We;e.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=Ve;e.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=ze;e.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=He;e.Scope=Me;e.WINDOW=Np;e.addBreadcrumb=Vr;e.addEventProcessor=Xn;e.addIntegration=cr;e.breadcrumbsIntegration=bg;e.browserApiErrorsIntegration=wg;e.browserProfilingIntegration=Ew;e.browserSessionIntegration=Cg;e.browserTracingIntegration=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={name:void 0,source:void 0},r=Np.document,{enableInp:o,enableElementTiming:i,enableLongTask:s,enableLongAnimationFrame:a,_experiments:{enableInteractions:c,enableStandaloneClsSpans:u,enableStandaloneLcpSpans:l},beforeStartSpan:d,idleTimeout:f,finalTimeout:h,childSpanTimeout:m,markBackgroundSpan:g,traceFetch:y,traceXHR:_,trackFetchStreamPerformance:v,shouldCreateSpanForRequest:b,enableHTTPTimings:S,ignoreResourceSpans:w,ignorePerformanceApiSpans:k,instrumentPageLoad:E,instrumentNavigation:x,detectRedirects:C,linkPreviousTrace:T,consistentTraceSampling:I,onRequestSpanStart:M}={...qS,...e};let R,O;function L(e,n){let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i="pageload"===n.op,s=d?d(n):n,a=s.attributes||{};if(n.name!==s.name){a[He]="custom";s.attributes=a}if(!o){const e=ge();Sn({...s,startTime:e}).end(e);return}t.name=s.name;t.source=a[He];const c=Rn(s,{idleTimeout:f,finalTimeout:h,childSpanTimeout:m,disableAutoFinish:i,beforeSpanEnd:t=>{var n;null===(n=R)||void 0===n||n();Cm(t,{recordClsOnPageloadSpan:!u,recordLcpOnPageloadSpan:!l,ignoreResourceSpans:w,ignorePerformanceApiSpans:k});YS(e,void 0);const r=Ne(),o=r.getPropagationContext();r.setPropagationContext({...o,traceId:c.spanContext().traceId,sampled:Et(c),dsc:Gt(t)})}});YS(e,c);function p(){r&&["interactive","complete"].includes(r.readyState)&&e.emit("idleSpanEnableAutoFinish",c)}if(i&&r){r.addEventListener("readystatechange",()=>{p()});p()}}return{name:"BrowserTracing",setup(e){Pt();R=xm({recordClsStandaloneSpans:u||!1,recordLcpStandaloneSpans:l||!1,client:e});o&&Xm();i&&hm()&&be()&&tm("element",Mm);a&&n.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?function(){const e=new PerformanceObserver(e=>{const t=Ot();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=mm(be()+n.startTime),{start_timestamp:r,op:o}=kt(t);if("navigation"===o&&r&&e<r)continue;const i=mm(n.duration),s={[Ve]:"auto.ui.browser.metrics"},a=n.scripts[0],{invoker:c,invokerType:u,sourceURL:l,sourceFunctionName:d,sourceCharPosition:f}=a;s["browser.script.invoker"]=c;s["browser.script.invoker_type"]=u;l&&(s["code.filepath"]=l);d&&(s["code.function"]=d);-1!==f&&(s["browser.script.source_char_position"]=f);fm(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:s})}});e.observe({type:"long-animation-frame",buffered:!0})}():s&&tm("longtask",({entries:e})=>{const t=Ot();if(!t)return;const{op:n,start_timestamp:r}=kt(t);for(const o of e){const e=mm(be()+o.startTime),i=mm(o.duration);"navigation"===n&&r&&e<r||fm(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Ve]:"auto.ui.browser.metrics"}})}});c&&tm("event",({entries:e})=>{const t=Ot();if(t)for(const n of e)if("click"===n.name){const e=mm(be()+n.startTime),r=mm(n.duration),o={name:J(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[Ve]:"auto.ui.browser.metrics"}},i=X(n.target);i&&(o.attributes["ui.component_name"]=i);fm(t,e,e+r,o)}});if(C&&r){const e=()=>{O=ve()};addEventListener("click",e,{capture:!0});addEventListener("keydown",e,{capture:!0,passive:!0})}function t(){const t=KS(e);if(t&&!kt(t).timestamp){_g&&p.log(`[Tracing] Finishing current active span with op: ${kt(t).op}`);t.setAttribute(Ge,"cancelled");t.end()}}e.on("startNavigationSpan",(n,r)=>{if(je()!==e)return;if(null!=r&&r.isRedirect){_g&&p.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span.");L(e,{op:"navigation.redirect",...n},!1);return}t();Fe().setPropagationContext({traceId:Ee(),sampleRand:Math.random()});const o=Ne();o.setPropagationContext({traceId:Ee(),sampleRand:Math.random()});o.setSDKProcessingMetadata({normalizedRequest:void 0});L(e,{op:"navigation",...n})});e.on("startPageLoadSpan",function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(je()!==e)return;t();const o=ht(r.sentryTrace||GS("sentry-trace"),r.baggage||GS("baggage")),i=Ne();i.setPropagationContext(o);i.setSDKProcessingMetadata({normalizedRequest:jp()});L(e,{op:"pageload",...n})})},afterAllSetup(e){let n=Y();"off"!==T&&HS(e,{linkPreviousTrace:T,consistentTraceSampling:I});if(Np.location){if(E){const t=be();WS(e,{name:Np.location.pathname,startTime:t?t/1e3:void 0,attributes:{[He]:"url",[Ve]:"auto.pageload.browser"}})}x&&Fm(t=>{var r;let{to:o,from:i}=t;if(void 0===i&&-1!==(null===(r=n)||void 0===r?void 0:r.indexOf(o))){n=void 0;return}n=void 0;const s=Xo(o),a=KS(e),c=a&&C&&function(e,t){const n=kt(e),r=ge(),o=n.start_timestamp;if(r-o>XS)return!1;if(t&&r-t<=XS)return!1;return!0}(a,O);VS(e,{name:(null==s?void 0:s.pathname)||Np.location.pathname,attributes:{[He]:"url",[Ve]:"auto.navigation.browser"}},{url:o,isRedirect:c})})}g&&(Np.document?Np.document.addEventListener("visibilitychange",()=>{const e=Ot();if(!e)return;const t=Rt(e);if(Np.document.hidden&&t){const e="cancelled",{op:n,status:r}=kt(t);_g&&p.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`);r||t.setStatus({code:2,message:e});t.setAttribute("sentry.cancellation_reason","document.hidden");t.end()}}):_g&&p.warn("[Tracing] Could not set up background tab detection due to lack of global document"));c&&function(e,t,n,r,o){const i=Np.document;let s;const a=()=>{const i="ui.action.click",a=KS(e);if(a){const e=kt(a).op;if(["navigation","pageload"].includes(e)){_g&&p.warn(`[Tracing] Did not create ${i} span because a pageload or navigation span is in progress.`);return}}if(s){s.setAttribute(Ge,"interactionInterrupted");s.end();s=void 0}o.name?s=Rn({name:o.name,op:i,attributes:{[He]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r}):_g&&p.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`)};i&&addEventListener("click",a,{capture:!0})}(e,f,h,m,t);o&&function(){const e=({entries:e})=>{const t=Ot(),n=t&&Rt(t);e.forEach(e=>{if(!function(e){return"duration"in e}(e)||!n)return;const t=e.interactionId;if(null!=t&&!Ym.has(t)){if(Km.length>10){const e=Km.shift();Ym.delete(e)}Km.push(t);Ym.set(t,n)}})};tm("event",e);tm("first-input",e)}();FS(e,{traceFetch:y,traceXHR:_,trackFetchStreamPerformance:v,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:S,onRequestSpanStart:M})}}};e.buildLaunchDarklyFlagUsedHandler=function(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{Go(e,t.value);Jo(e,t.value)}}};e.captureConsoleIntegration=mo;e.captureEvent=Gn;e.captureException=Wn;e.captureFeedback=oi;e.captureMessage=Vn;e.captureSession=tr;e.chromeStackLineParser=ig;e.close=async function(e){const n=je();if(n)return n.close(e);t&&p.warn("Cannot flush events and disable SDK. No client defined.");return Promise.resolve(!1)};e.consoleLoggingIntegration=si;e.contextLinesIntegration=Wg;e.continueTrace=(e,t)=>{const n=De(o());if(n.continueTrace)return n.continueTrace(e,t);const{sentryTrace:r,baggage:i}=e;return Ue(e=>{const n=ht(r,i);e.setPropagationContext(n);return t()})};e.createTransport=Pr;e.createUserFeedbackEnvelope=function(e,t){let{metadata:n,tunnel:r,dsn:o}=t;const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...(null==n?void 0:n.sdk)&&{sdk:{name:n.sdk.name,version:n.sdk.version}},...!!r&&!!o&&{dsn:Ut(o)}},s=function(e){return[{type:"user_report"},e]}(e);return Qt(i,[s])};e.dedupeIntegration=go;e.defaultRequestInstrumentationOptions=NS;e.defaultStackLineParsers=mg;e.defaultStackParser=gg;e.diagnoseSdkConnectivity=async function(){const e=je();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"})}catch{return"sentry-unreachable"}};e.endSession=Qn;e.eventFiltersIntegration=Xr;e.eventFromException=nh;e.eventFromMessage=rh;e.exceptionFromError=Jp;e.extraErrorDataIntegration=bo;e.featureFlagsIntegration=Ko;e.feedbackAsyncIntegration=qp;e.feedbackIntegration=Wp;e.feedbackSyncIntegration=Wp;e.flush=async function(e){const n=je();if(n)return n.flush(e);t&&p.warn("Cannot flush events. No client defined.");return Promise.resolve(!1)};e.forceLoad=function(){};e.functionToStringIntegration=Kr;e.geckoStackLineParser=cg;e.getActiveSpan=Ot;e.getClient=je;e.getCurrentScope=Ne;e.getDefaultIntegrations=Ag;e.getFeedback=function(){const e=je();return e?.getIntegrationByName("Feedback")};e.getGlobalScope=$e;e.getIsolationScope=Fe;e.getReplay=function(){const e=je();return e?.getIntegrationByName("Replay")};e.getRootSpan=Rt;e.getSpanDescendants=Mt;e.getSpanStatusFromHttpCode=nt;e.getTraceData=qr;e.globalHandlersIntegration=Tg;e.graphqlClientIntegration=Kg;e.httpClientIntegration=Fg;e.httpContextIntegration=Rg;e.inboundFiltersIntegration=Zr;e.init=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=!e.skipBrowserExtensionCheck&&Lg(),r={...e,enabled:!n&&e.enabled,stackParser:(o=e.stackParser||gg,Array.isArray(o)?y(...o):o),integrations:ir({integrations:e.integrations,defaultIntegrations:null==e.defaultIntegrations?Ag():e.defaultIntegrations}),transport:e.transport||eg};var o;return function(e,n){!0===n.debug&&(t?p.enable():u(()=>{}));Ne().update(n.initialScope);const r=new e(n);Ir(r);r.init();return r}(ah,r)};e.instrumentOutgoingRequests=FS;e.instrumentSupabaseClient=No;e.isEnabled=Yn;e.isInitialized=function(){return!!je()};e.lastEventId=Kn;e.launchDarklyIntegration=Cw;e.lazyLoadIntegration=zp;e.linkedErrorsIntegration=Og;e.logger=Gp;e.makeBrowserOfflineTransport=function(){return function(e){return t=>{const n=e({...t,createStore:ew});Np.addEventListener("online",async e=>{await n.flush()});return n}}(Nr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:eg))};e.makeFetchTransport=eg;e.makeMultiplexedTransport=function(e,t){return n=>{const r=e(n),o=new Map;function i(t,r){const i=r?`${t}:${r}`:t;let s=o.get(i);if(!s){const a=jt(t);if(!a)return;const c=rr(a,n.tunnel);s=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=Fr(e,["event","transaction","profile","replay_event"]);n&&(n.release=t);return r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c});o.set(i,s)}return[t,s]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){return Fr(e,t?.length?t:["event"])}}).map(e=>"string"==typeof e?i(e,void 0):i(e.dsn,e.release)).filter(e=>!!e),o=n.length?n:[["",r]];return(await Promise.all(o.map(([t,n])=>n.send(function(e,t){return Qt(t?{...e[0],dsn:t}:e[0],e[1])}(e,t)))))[0]},flush:async function(e){const t=[...o.values(),r];return(await Promise.all(t.map(t=>t.flush(e)))).every(e=>e)}}}};e.moduleMetadataIntegration=lo;e.onLoad=function(e){e()};e.openFeatureIntegration=Tw;e.opera10StackLineParser=fg;e.opera11StackLineParser=hg;e.parameterize=jr;e.registerSpanErrorInstrumentation=Pt;e.registerWebWorker=function(e){var t;let{self:n}=e;n.postMessage({_sentryMessage:!0,_sentryDebugIds:null!==(t=n._sentryDebugIds)&&void 0!==t?t:void 0})};e.replayCanvasIntegration=LS;e.replayIntegration=e=>new Qb(e);e.reportingObserverIntegration=Ng;e.rewriteFramesIntegration=xo;e.sendFeedback=Ji;e.setContext=Jn;e.setCurrentClient=Ir;e.setExtra=function(e,t){Fe().setExtra(e,t)};e.setExtras=function(e){Fe().setExtras(e)};e.setHttpStatus=rt;e.setMeasurement=pn;e.setTag=function(e,t){Fe().setTag(e,t)};e.setTags=function(e){Fe().setTags(e)};e.setUser=function(e){Fe().setUser(e)};e.showReportDialog=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Np.document,n=(null==t?void 0:t.head)||(null==t?void 0:t.body);if(!n){_g&&p.error("[showReportDialog] Global document not defined");return}const r=Ne(),o=je(),i=null==o?void 0:o.getDsn();if(!i){_g&&p.error("[showReportDialog] DSN not configured");return}const s={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Kn()},a=Np.document.createElement("script");a.async=!0;a.crossOrigin="anonymous";a.src=function(e,t){const n=Ht(e);if(!n)return"";const r=`${nr(n)}embed/error-page/`;let o=`dsn=${Ut(n)}`;for(const i in t)if("dsn"!==i&&"onClose"!==i)if("user"===i){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`);e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${o}`}(i,s);const{onLoad:c,onClose:u}=s;c&&(a.onload=c);if(u){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{u()}finally{Np.removeEventListener("message",e)}};Np.addEventListener("message",e)}n.appendChild(a)};e.spanToBaggageHeader=function(e){return lt(Gt(e))};e.spanToJSON=kt;e.spanToTraceHeader=vt;e.spotlightBrowserIntegration=xw;e.startBrowserTracingNavigationSpan=VS;e.startBrowserTracingPageLoadSpan=WS;e.startInactiveSpan=Sn;e.startNewTrace=function(e){return Ue(n=>{n.setPropagationContext({traceId:Ee(),sampleRand:Math.random()});t&&p.log(`Starting a new trace with id ${n.getPropagationContext().traceId}`);return wn(null,e)})};e.startSession=Zn;e.startSpan=bn;e.startSpanManual=function(e,t){const n=xn();if(n.startSpanManual)return n.startSpanManual(e,t);const r=En(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Ue(a,()=>In(i)(()=>{const n=Ne(),s=Tn(n,i),a=e.onlyIfParent&&!s?new Jt:kn({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});Te(n,a);return _n(()=>t(a,()=>a.end()),()=>{const{status:e}=kt(a);!a.isRecording()||e&&"ok"!==e||a.setStatus({code:2,message:"internal_error"})})}))};e.statsigIntegration=Rw;e.supabaseIntegration=Fo;e.suppressTracing=function(e){const t=xn();return t.suppressTracing?t.suppressTracing(e):Ue(t=>{t.setSDKProcessingMetadata({[vn]:!0});const n=e();t.setSDKProcessingMetadata({[vn]:void 0});return n})};e.thirdPartyErrorFilterIntegration=zo;e.unleashIntegration=Iw;e.updateSpanName=function(e,t){e.updateName(t);e.setAttributes({[He]:"custom",[Ye]:t})};e.webWorkerIntegration=Ow;e.winjsStackLineParser=lg;e.withActiveSpan=wn;e.withIsolationScope=function(...e){const t=De(o());if(2===e.length){const[n,r]=e;return n?t.withSetIsolationScope(n,r):t.withIsolationScope(r)}return t.withIsolationScope(e[0])};e.withScope=Ue;e.zodErrorsIntegration=Ho});
